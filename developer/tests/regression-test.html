<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°å›å½’æµ‹è¯•å¥—ä»¶</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        button:hover { opacity: 0.8; transform: translateY(-1px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background-color: #28a745;
            transition: width 0.3s ease;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        .test-card h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-pending { background-color: #ffc107; }
        .status-running { background-color: #17a2b8; }
        .status-pass { background-color: #28a745; }
        .status-fail { background-color: #dc3545; }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .stat-number { font-size: 24px; font-weight: bold; }
        .stat-label { font-size: 14px; opacity: 0.9; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æœ¬åœ°å›å½’æµ‹è¯•å¥—ä»¶</h1>
        <p>è‡ªåŠ¨åŒ–æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’Œæ•°æ®å®Œæ•´æ€§</p>

        <div class="test-section">
            <h3>ğŸ¯ æµ‹è¯•æ§åˆ¶é¢æ¿</h3>

            <div style="margin: 15px 0;">
                <button class="btn-primary" onclick="runAllTests()" id="runAllBtn">
                    ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•
                </button>
                <button class="btn-success" onclick="runExamTests()">
                    ğŸ“š ExamåŠ è½½æµ‹è¯•
                </button>
                <button class="btn-success" onclick="runPracticeTests()">
                    ğŸ“ Practiceè®°å½•æµ‹è¯•
                </button>
                <button class="btn-success" onclick="runBackupTests()">
                    ğŸ’¾ å¤‡ä»½æ¢å¤æµ‹è¯•
                </button>
                <button class="btn-warning" onclick="runStateTests()">
                    ğŸ”„ çŠ¶æ€åºåˆ—åŒ–æµ‹è¯•
                </button>
                <button class="btn-secondary" onclick="clearResults()">
                    ğŸ—‘ï¸ æ¸…é™¤ç»“æœ
                </button>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div id="progressText" style="text-align: center; margin: 10px 0;">å‡†å¤‡å°±ç»ª</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»</h3>

            <div class="summary-stats" id="summaryStats">
                <div class="stat-card">
                    <div class="stat-number" id="totalTests">0</div>
                    <div class="stat-label">æ€»æµ‹è¯•æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="passedTests">0</div>
                    <div class="stat-label">é€šè¿‡æµ‹è¯•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="failedTests">0</div>
                    <div class="stat-label">å¤±è´¥æµ‹è¯•</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="successRate">0%</div>
                    <div class="stat-label">æˆåŠŸç‡</div>
                </div>
            </div>

            <div id="testResults"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ è¯¦ç»†æµ‹è¯•æŠ¥å‘Š</h3>
            <pre id="detailedReport">ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"å¼€å§‹æµ‹è¯•...</pre>
        </div>

        <div class="test-grid">
            <div class="test-card">
                <h4><span class="status-indicator status-pending" id="examStatus"></span>ExamåŠ è½½æµ‹è¯•</h4>
                <p>éªŒè¯è€ƒè¯•æ•°æ®åŠ è½½ã€åˆ†ç±»ã€æœç´¢å’ŒUIæ¸²æŸ“åŠŸèƒ½</p>
                <button class="btn-primary" onclick="runExamTests()">è¿è¡Œæµ‹è¯•</button>
                <div id="examResults" style="margin-top: 10px;"></div>
            </div>

            <div class="test-card">
                <h4><span class="status-indicator status-pending" id="practiceStatus"></span>Practiceè®°å½•æµ‹è¯•</h4>
                <p>éªŒè¯ç»ƒä¹ è®°å½•çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤å’Œæ‰¹é‡æ“ä½œ</p>
                <button class="btn-primary" onclick="runPracticeTests()">è¿è¡Œæµ‹è¯•</button>
                <div id="practiceResults" style="margin-top: 10px;"></div>
            </div>

            <div class="test-card">
                <h4><span class="status-indicator status-pending" id="backupStatus"></span>å¤‡ä»½æ¢å¤æµ‹è¯•</h4>
                <p>éªŒè¯æ•°æ®å¤‡ä»½åˆ›å»ºã€æ¢å¤ã€åˆ é™¤å’Œå®Œæ•´æ€§éªŒè¯</p>
                <button class="btn-primary" onclick="runBackupTests()">è¿è¡Œæµ‹è¯•</button>
                <div id="backupResults" style="margin-top: 10px;"></div>
            </div>

            <div class="test-card">
                <h4><span class="status-indicator status-pending" id="stateStatus"></span>çŠ¶æ€åºåˆ—åŒ–æµ‹è¯•</h4>
                <p>éªŒè¯Set/Mapå¯¹è±¡çš„åºåˆ—åŒ–/ååºåˆ—åŒ–å’Œæ•°æ®å®Œæ•´æ€§</p>
                <button class="btn-primary" onclick="runStateTests()">è¿è¡Œæµ‹è¯•</button>
                <div id="stateResults" style="margin-top: 10px;"></div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½å¿…è¦çš„è„šæœ¬ -->
    <script src="../../js/utils/storage.js"></script>
    <script src="../../js/data/dataSources/storageDataSource.js"></script>
    <script src="../../js/data/repositories/baseRepository.js"></script>
    <script src="../../js/data/repositories/dataRepositoryRegistry.js"></script>
    <script src="../../js/data/repositories/practiceRepository.js"></script>
    <script src="../../js/data/repositories/settingsRepository.js"></script>
    <script src="../../js/data/repositories/backupRepository.js"></script>
    <script src="../../js/data/repositories/metaRepository.js"></script>
    <script src="../../js/data/index.js"></script>
    <script src="../../js/utils/stateSerializer.js"></script>
    <script src="../../js/utils/simpleStorageWrapper.js"></script>
    <script src="./js/stateSerializerTest.js"></script>
    <script src="./js/dataIntegrityValidator.js"></script>
    <script src="./js/examAutomationTest.js"></script>
    <script src="./js/practiceRecordTest.js"></script>
    <script src="./js/backupRestoreTest.js"></script>

    <!-- åŠ è½½ä¸»è¦æ•°æ®æ–‡ä»¶ -->
    <script src="../../assets/scripts/complete-exam-data.js"></script>
    <script src="../../assets/scripts/listening-exam-data.js"></script>
    <script src="../../js/utils/dataBackupManager.js"></script>

    <script>
        // æµ‹è¯•å®ä¾‹
        let examTest = null;
        let practiceTest = null;
        let backupTest = null;
        let stateTest = null;
        let integrityValidator = null;

        // æµ‹è¯•ç»“æœ
        let allTestResults = {
            exam: null,
            practice: null,
            backup: null,
            state: null
        };

        // åˆå§‹åŒ–æµ‹è¯•å®ä¾‹
        function initializeTestInstances() {
            try {
                // æ£€æŸ¥æ‰€æœ‰å¿…è¦çš„ç±»æ˜¯å¦å­˜åœ¨
                const requiredClasses = [
                    { name: 'ExamAutomationTest', class: window.ExamAutomationTest },
                    { name: 'PracticeRecordTest', class: window.PracticeRecordTest },
                    { name: 'BackupRestoreTest', class: window.BackupRestoreTest },
                    { name: 'StateSerializerTest', class: window.StateSerializerTest },
                    { name: 'DataIntegrityValidator', class: window.DataIntegrityValidator }
                ];

                const missingClasses = requiredClasses.filter(req => typeof req.class === 'undefined');
                if (missingClasses.length > 0) {
                    throw new Error('ç¼ºå°‘å¿…è¦çš„ç±»: ' + missingClasses.map(c => c.name).join(', '));
                }

                // åˆ›å»ºå®ä¾‹
                examTest = new ExamAutomationTest();
                practiceTest = new PracticeRecordTest();
                backupTest = new BackupRestoreTest();
                stateTest = new StateSerializerTest();
                integrityValidator = new DataIntegrityValidator();

                console.log('âœ… æµ‹è¯•å®ä¾‹åˆå§‹åŒ–æˆåŠŸ');
                return true;
            } catch (error) {
                console.error('âŒ æµ‹è¯•å®ä¾‹åˆå§‹åŒ–å¤±è´¥:', error);

                // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                document.getElementById('testResults').innerHTML =
                    `<div class="fail"><strong>âŒ åˆå§‹åŒ–å¤±è´¥:</strong> ${error.message}</div>`;

                return false;
            }
        }

        // æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨
        function updateStatusIndicator(testName, status) {
            const indicator = document.getElementById(`${testName}Status`);
            if (indicator) {
                indicator.className = `status-indicator status-${status}`;
            }
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress(current, total, text = '') {
            const percentage = total > 0 ? (current / total) * 100 : 0;
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = text || `${current}/${total} å®Œæˆ`;
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        async function runAllTests() {
            if (!initializeTestInstances()) {
                alert('æµ‹è¯•å®ä¾‹åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¾èµ–æ˜¯å¦æ­£ç¡®åŠ è½½');
                return;
            }

            const runAllBtn = document.getElementById('runAllBtn');
            runAllBtn.disabled = true;

            try {
                updateProgress(0, 4, 'å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...');
                clearResults();

                // 1. è¿è¡ŒExamæµ‹è¯•
                updateStatusIndicator('exam', 'running');
                updateProgress(1, 4, 'æ­£åœ¨è¿è¡ŒExamåŠ è½½æµ‹è¯•...');
                await runExamTests(false);
                updateStatusIndicator('exam', allTestResults.exam ? 'pass' : 'fail');

                // 2. è¿è¡ŒPracticeæµ‹è¯•
                updateStatusIndicator('practice', 'running');
                updateProgress(2, 4, 'æ­£åœ¨è¿è¡ŒPracticeè®°å½•æµ‹è¯•...');
                await runPracticeTests(false);
                updateStatusIndicator('practice', allTestResults.practice ? 'pass' : 'fail');

                // 3. è¿è¡Œå¤‡ä»½æµ‹è¯•
                updateStatusIndicator('backup', 'running');
                updateProgress(3, 4, 'æ­£åœ¨è¿è¡Œå¤‡ä»½æ¢å¤æµ‹è¯•...');
                await runBackupTests(false);
                updateStatusIndicator('backup', allTestResults.backup ? 'pass' : 'fail');

                // 4. è¿è¡ŒçŠ¶æ€æµ‹è¯•
                updateStatusIndicator('state', 'running');
                updateProgress(4, 4, 'æ­£åœ¨è¿è¡ŒçŠ¶æ€åºåˆ—åŒ–æµ‹è¯•...');
                await runStateTests(false);
                updateStatusIndicator('state', allTestResults.state ? 'pass' : 'fail');

                updateProgress(4, 4, 'æ‰€æœ‰æµ‹è¯•å®Œæˆï¼');
                updateSummaryStats();
                generateDetailedReport();

            } catch (error) {
                console.error('è¿è¡Œæ‰€æœ‰æµ‹è¯•æ—¶å‘ç”Ÿé”™è¯¯:', error);
                updateProgress(4, 4, 'æµ‹è¯•æ‰§è¡Œå‡ºé”™');
            } finally {
                runAllBtn.disabled = false;
            }
        }

        // è¿è¡ŒExamæµ‹è¯•
        async function runExamTests(updateUI = true) {
            try {
                if (updateUI) {
                    updateStatusIndicator('exam', 'running');
                    document.getElementById('examResults').innerHTML = '<div class="info">æ­£åœ¨è¿è¡ŒExamæµ‹è¯•...</div>';
                }

                if (!examTest) {
                    if (!initializeTestInstances()) {
                        throw new Error('æ— æ³•åˆå§‹åŒ–æµ‹è¯•å®ä¾‹');
                    }
                }

                const results = await examTest.runAllTests();
                const allPassed = results.every(r => r.passed);
                allTestResults.exam = results;

                if (updateUI) {
                    updateStatusIndicator('exam', allPassed ? 'pass' : 'fail');
                    displayTestResults('examResults', results, allPassed);
                    updateSummaryStats();
                }

                return results;

            } catch (error) {
                console.error('Examæµ‹è¯•å¤±è´¥:', error);
                if (updateUI) {
                    updateStatusIndicator('exam', 'fail');
                    document.getElementById('examResults').innerHTML = `<div class="fail">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                }
                return null;
            }
        }

        // è¿è¡ŒPracticeæµ‹è¯•
        async function runPracticeTests(updateUI = true) {
            try {
                if (updateUI) {
                    updateStatusIndicator('practice', 'running');
                    document.getElementById('practiceResults').innerHTML = '<div class="info">æ­£åœ¨è¿è¡ŒPracticeè®°å½•æµ‹è¯•...</div>';
                }

                if (!practiceTest) {
                    if (!initializeTestInstances()) {
                        throw new Error('æ— æ³•åˆå§‹åŒ–æµ‹è¯•å®ä¾‹');
                    }
                }

                const results = await practiceTest.runAllTests();
                const allPassed = results.every(r => r.passed);
                allTestResults.practice = results;

                if (updateUI) {
                    updateStatusIndicator('practice', allPassed ? 'pass' : 'fail');
                    displayTestResults('practiceResults', results, allPassed);
                    updateSummaryStats();
                }

                return results;

            } catch (error) {
                console.error('Practiceæµ‹è¯•å¤±è´¥:', error);
                if (updateUI) {
                    updateStatusIndicator('practice', 'fail');
                    document.getElementById('practiceResults').innerHTML = `<div class="fail">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                }
                return null;
            }
        }

        // è¿è¡Œå¤‡ä»½æµ‹è¯•
        async function runBackupTests(updateUI = true) {
            try {
                if (updateUI) {
                    updateStatusIndicator('backup', 'running');
                    document.getElementById('backupResults').innerHTML = '<div class="info">æ­£åœ¨è¿è¡Œå¤‡ä»½æ¢å¤æµ‹è¯•...</div>';
                }

                if (!backupTest) {
                    if (!initializeTestInstances()) {
                        throw new Error('æ— æ³•åˆå§‹åŒ–æµ‹è¯•å®ä¾‹');
                    }
                }

                const results = await backupTest.runAllTests();
                const allPassed = results.every(r => r.passed);
                allTestResults.backup = results;

                if (updateUI) {
                    updateStatusIndicator('backup', allPassed ? 'pass' : 'fail');
                    displayTestResults('backupResults', results, allPassed);
                    updateSummaryStats();
                }

                return results;

            } catch (error) {
                console.error('å¤‡ä»½æµ‹è¯•å¤±è´¥:', error);
                if (updateUI) {
                    updateStatusIndicator('backup', 'fail');
                    document.getElementById('backupResults').innerHTML = `<div class="fail">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                }
                return null;
            }
        }

        // è¿è¡ŒçŠ¶æ€æµ‹è¯•
        async function runStateTests(updateUI = true) {
            try {
                if (updateUI) {
                    updateStatusIndicator('state', 'running');
                    document.getElementById('stateResults').innerHTML = '<div class="info">æ­£åœ¨è¿è¡ŒçŠ¶æ€åºåˆ—åŒ–æµ‹è¯•...</div>';
                }

                if (!stateTest) {
                    if (!initializeTestInstances()) {
                        throw new Error('æ— æ³•åˆå§‹åŒ–æµ‹è¯•å®ä¾‹');
                    }
                }

                const results = await stateTest.runAllTests();
                const allPassed = results.every(r => r.passed);
                allTestResults.state = results;

                if (updateUI) {
                    updateStatusIndicator('state', allPassed ? 'pass' : 'fail');
                    displayTestResults('stateResults', results, allPassed);
                    updateSummaryStats();
                }

                return results;

            } catch (error) {
                console.error('çŠ¶æ€æµ‹è¯•å¤±è´¥:', error);
                if (updateUI) {
                    updateStatusIndicator('state', 'fail');
                    document.getElementById('stateResults').innerHTML = `<div class="fail">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
                }
                return null;
            }
        }

        // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
        function displayTestResults(elementId, results, allPassed) {
            const element = document.getElementById(elementId);
            if (!element) return;

            const totalTests = results.length;
            const passedTests = results.filter(r => r.passed).length;
            const failedTests = totalTests - passedTests;

            let html = `
                <div class="${allPassed ? 'pass' : 'fail'}">
                    <strong>æµ‹è¯•ç»“æœ: ${passedTests}/${totalTests} é€šè¿‡</strong>
                    ${failedTests > 0 ? ` (${failedTests} å¤±è´¥)` : ''}
                </div>
            `;

            if (failedTests > 0) {
                html += '<div style="margin-top: 10px;"><strong>å¤±è´¥çš„æµ‹è¯•:</strong></div>';
                results.filter(r => !r.passed).forEach(r => {
                    html += `<div class="fail" style="font-size: 12px; margin: 2px 0;">â€¢ ${r.name}</div>`;
                });
            }

            element.innerHTML = html;
        }

        // æ›´æ–°æ±‡æ€»ç»Ÿè®¡
        function updateSummaryStats() {
            const results = Object.values(allTestResults).filter(r => r !== null);
            if (results.length === 0) return;

            const totalTests = results.reduce((sum, r) => sum + r.length, 0);
            const passedTests = results.reduce((sum, r) => sum + r.filter(t => t.passed).length, 0);
            const failedTests = totalTests - passedTests;
            const successRate = totalTests > 0 ? ((passedTests / totalTests) * 100).toFixed(1) : 0;

            document.getElementById('totalTests').textContent = totalTests;
            document.getElementById('passedTests').textContent = passedTests;
            document.getElementById('failedTests').textContent = failedTests;
            document.getElementById('successRate').textContent = `${successRate}%`;

            // æ›´æ–°æ•´ä½“ç»“æœåŒºåŸŸ
            const testResultsElement = document.getElementById('testResults');
            if (failedTests === 0) {
                testResultsElement.innerHTML = '<div class="pass"><strong>ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ç³»ç»Ÿè¿è¡Œæ­£å¸¸</strong></div>';
            } else {
                testResultsElement.innerHTML = `<div class="fail"><strong>âš ï¸ å‘ç° ${failedTests} ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼Œéœ€è¦å…³æ³¨</strong></div>`;
            }
        }

        // ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
        function generateDetailedReport() {
            const report = {
                timestamp: new Date().toISOString(),
                summary: {
                    totalSuites: Object.keys(allTestResults).filter(k => allTestResults[k] !== null).length,
                    totalTests: 0,
                    totalPassed: 0,
                    totalFailed: 0
                },
                suites: {}
            };

            // æ”¶é›†å„æµ‹è¯•å¥—ä»¶çš„ç»“æœ
            ['exam', 'practice', 'backup', 'state'].forEach(suiteName => {
                const results = allTestResults[suiteName];
                if (results) {
                    const passed = results.filter(r => r.passed).length;
                    const failed = results.length - passed;

                    report.suites[suiteName] = {
                        name: suiteName,
                        total: results.length,
                        passed,
                        failed,
                        successRate: ((passed / results.length) * 100).toFixed(1)
                    };

                    report.summary.totalTests += results.length;
                    report.summary.totalPassed += passed;
                    report.summary.totalFailed += failed;
                }
            });

            report.summary.successRate = report.summary.totalTests > 0
                ? ((report.summary.totalPassed / report.summary.totalTests) * 100).toFixed(1)
                : 0;

            // æ˜¾ç¤ºè¯¦ç»†æŠ¥å‘Š
            document.getElementById('detailedReport').textContent = JSON.stringify(report, null, 2);
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            allTestResults = { exam: null, practice: null, backup: null, state: null };

            document.getElementById('testResults').innerHTML = '<div class="info">å‡†å¤‡è¿è¡Œæµ‹è¯•...</div>';
            document.getElementById('detailedReport').textContent = 'ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"å¼€å§‹æµ‹è¯•...';

            ['exam', 'practice', 'backup', 'state'].forEach(testName => {
                updateStatusIndicator(testName, 'pending');
                const resultsElement = document.getElementById(`${testName}Results`);
                if (resultsElement) {
                    resultsElement.innerHTML = '';
                }
            });

            updateSummaryStats();
            updateProgress(0, 4, 'å‡†å¤‡å°±ç»ª');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', () => {
            console.log('ğŸ§ª å›å½’æµ‹è¯•å¥—ä»¶å·²åŠ è½½');
            initializeTestInstances();
            updateProgress(0, 4, 'å‡†å¤‡å°±ç»ª');
        });
    </script>
</body>
</html>
