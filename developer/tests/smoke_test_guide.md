# Phase 04: 手动冒烟测试指南

## 测试环境准备

1. **启动应用**
   ```bash
   cd /Users/maziheng/Downloads/0.3.1\ working
   npm start
   ```

2. **清理测试数据（可选）**
   - 删除或备份现有数据库：`~/Library/Application Support/ielts-writing/ielts-writing.db`
   - 清理 localStorage：开发者工具 > Application > Local Storage > Clear

---

## 1. ComposePage - 作文输入页 + 草稿功能

### 测试点

#### 1.1 基础功能
- [ ] 访问 `/` 路径，ComposePage 正常渲染
- [ ] Task 1 / Task 2 切换按钮正常工作，任务提示文字正确更新
- [ ] 字数统计实时更新且准确
- [ ] 字数不足时显示警告样式(橙色)
- [ ] 空内容时「提交评分」按钮被禁用

#### 1.2 草稿自动保存
- [ ] 输入内容后等待 10 秒，草稿自动保存（检查 localStorage 中 `draft:compose-essay`）
- [ ] 刷新页面后，草稿恢复通知正确显示（渐变紫色卡片，磁盘图标）
- [ ] 点击「恢复草稿」，内容和任务类型正确恢复
- [ ] 点击「放弃」，草稿被清除，通知消失

#### 1.3 提交流程
- [ ] 字数充足时，点击「提交评分」直接跳转到 Evaluating 页面
- [ ] 字数不足时，点击「提交评分」弹出确认对话框
  - [ ] 点击「取消」，对话框关闭，停留在当前页
  - [ ] 点击「继续提交」，跳转到 Evaluating 页面
- [ ] 成功提交后，localStorage 中的草稿被清除

#### 1.4 错误处理
- [ ] 模拟 API 错误（断开网络或后端未运行），错误信息正确显示

---

## 2. TopicManagePage - 题目管理页

### 测试点

#### 2.1 题目列表与筛选
- [ ] 访问 `/topics` 路径，页面正常渲染
- [ ] 官方题目和自定义题目正确显示
- [ ] 筛选器工作正确：
  - [ ] 按任务类型筛选 (All / Task 1 / Task 2)
  - [ ] 按分类筛选 (折线图、饼图、议论文等)
  - [ ] 按难度筛选 (Easy / Medium / Hard)
  - [ ] 多重筛选组合生效
- [ ] 点击「重置」，所有筛选器清空

#### 2.2 题目 CRUD
- [ ] 点击「+ 新增题目」，打开编辑弹窗
- [ ] 填写完整信息（类型、分类、难度、标题、描述）并保存
  - [ ] 表单验证生效（缺少必填项时提示错误）
  - [ ] 保存成功后，新题目出现在列表中
- [ ] 点击题目卡片的「编辑」按钮，弹窗正确回填数据
- [ ] 修改题目后保存，列表更新正确
- [ ] 点击「删除」：
  - [ ] 官方题目显示「无法删除」提示
  - [ ] 自定义题目弹出确认框，确认后题目被删除

#### 2.3 图片上传 (Task 1 专用)
- [ ] 新增 Task 1 题目时，显示图片上传区域
- [ ] 点击上传，选择图片文件
  - [ ] 验证文件类型（仅允许 jpg/png/gif）
  - [ ] 验证文件大小（最大 5MB）
  - [ ] 上传成功后显示预览
  - [ ] 点击「移除图片」，预览消失
- [ ] 保存题目后，图片正确关联并显示在题目卡片上

#### 2.4 批量导入
- [ ] 点击「批量导入」，选择符合格式的 JSON 文件
- [ ] 导入成功后，新题目出现在列表中
- [ ] 尝试导入格式错误的文件，显示错误提示

#### 2.5 分页
- [ ] 当题目数量超过 12 个时，分页器显示
- [ ] 点击下一页，正确加载后续题目
- [ ] 页码跳转功能正常

---

## 3. HistoryPage - 历史记录页

### 测试点

#### 3.1 历史列表
- [ ] 访问 `/history` 路径，页面正常渲染
- [ ] 历史记录按时间倒序排列（最新的在最前）
- [ ] 显示正确的字段：日期、任务类型、字数、总分
- [ ] 点击「查看详情」，打开详情弹窗
  - [ ] 弹窗正确显示完整评分（TR/CC/LR/GRA 或 TA/CC/LR/GRA）
  - [ ] 反馈内容正确显示
  - [ ] 弹窗是只读的（无法编辑）

#### 3.2 筛选功能
- [ ] 任务类型筛选 (All / Task 1 / Task 2)
- [ ] 日期范围筛选：
  - [ ] 仅选择开始日期 → 正确筛选
  - [ ] 仅选择结束日期 → 正确筛选
  - [ ] 选择开始 > 结束 → 显示验证错误
- [ ] 分数范围筛选 (0-9)：
  - [ ] 最小分 > 最大分 → 显示验证错误
  - [ ] 正常范围 → 正确筛选
- [ ] 点击「筛选」，列表更新为筛选结果
- [ ] 点击「重置」，所有筛选条件清空

#### 3.3 批量操作
- [ ] 勾选多条记录
- [ ] 点击「批量删除」，弹出确认框
  - [ ] 确认后，选中的记录被删除
  - [ ] 列表刷新，选中状态清空

#### 3.4 清空历史
- [ ] 点击「清空历史」，弹出确认输入框
- [ ] 输入错误的确认文字 → 无法清空
- [ ] 正确输入「确认删除」→ 所有历史记录被删除

#### 3.5 CSV 导出
- [ ] 点击「导出 CSV」，导出所有筛选结果
- [ ] 应用筛选后导出 → 仅导出筛选后的记录
- [ ] 检查导出的 CSV 文件：
  - [ ] 文件名包含时间戳和筛选条件描述
  - [ ] 字段完整（日期、类型、字数、分数、反馈摘要）

#### 3.6 空状态
- [ ] 无任何历史记录时，显示「暂无历史记录」空状态
- [ ] 筛选后无结果时，显示「无符合条件的记录」空状态

#### 3.7 历史统计与雷达图 ⭐ 新增功能
- [ ] 有历史记录时，显示「📊 历史统计与对比」区域
- [ ] 对比范围选择器正常工作：
  - [ ] 全部历史 → 显示所有记录的平均
  - [ ] 最近10次 → 仅统计最近10次
  - [ ] 本月 → 仅统计本月提交的记录
  - [ ] Task 1专项 → 仅统计 Task 1
  - [ ] Task 2专项 → 仅统计 Task 2
- [ ] 雷达图正确渲染：
  - [ ] 显示4个维度（TR/TA, CC, LR, GRA）
  - [ ] 蓝色实线 + 填充表示最新作文分数
  - [ ] 灰色虚线 + 半透明填充表示历史平均分
  - [ ] Hover时显示具体数值（所有维度）
  - [ ] Task 1 显示 "TR Task Achievement"
  - [ ] Task 2 显示 "TA Task Response"
- [ ] 对比表格显示正确：
  - [ ] 评分项、最新、平均、差值列齐全
  - [ ] **正差值**：绿色 `+X.X` (+0.5, +1.0 等)
  - [ ] **负差值**：红色 `-X.X` (-0.3, -0.8 等)
  - [ ] **零差值**：灰色 `0.0`
  - [ ] 数值精确到小数点后1位
- [ ] 统计摘要显示：
  - [ ] 统计范围描述（全部历史/最近10次/本月/Task X专项）
  - [ ] 记录数量（X 次）
  - [ ] 最新提交时间（格式化日期）
- [ ] 无历史记录时，整个统计区域隐藏
- [ ] 切换范围后无数据时，显示「XX下暂无数据」空状态

---

## 4. SettingsPage - 设置页

### 测试点

#### 4.1 模型参数标签
- [ ] 访问 `/settings`，页面正常渲染
- [ ] 切换到「模型参数」标签
- [ ] 三种温度模式卡片正确显示（精确、平衡、创意）
- [ ] 点击不同模式卡片，选中状态切换
- [ ] 点击「保存」，设置生效（检查后端 `settings.json` 文件）
- [ ] 刷新页面，温度模式选择正确回显

#### 4.2 数据管理标签
- [ ] 切换到「数据管理」标签
- [ ] 历史记录数量限制输入框显示当前值
- [ ] 修改限制值（范围 1-1000）：
  - [ ] 输入超出范围的值 → 显示错误提示
  - [ ] 输入合法值并保存 → 成功更新
- [ ] 点击「清空所有历史」，弹出确认输入框
  - [ ] 输入错误的确认文字 → 无法清空
  - [ ] 正确输入「清空历史」→ 所有历史记录被删除

#### 4.3 关于标签
- [ ] 切换到「关于」标签
- [ ] 应用版本号正确显示 (`0.3.1`)
- [ ] Electron 版本和 Node 版本正确显示（从 preload API 获取）
- [ ] 用户数据路径正确显示（从 `getUserDataPath` API 获取）
- [ ] 功能清单正确显示已实现和待实现的功能

---

## 5. 导航与路由

### 测试点
- [ ] NavBar 显示所有导航链接：作文输入、题库管理、历史记录、设置
- [ ] 点击各个链接，路由正确跳转
- [ ] 当前活动路由高亮显示（如果有样式）
- [ ] 「返回经典版」按钮正常工作（跳转到 `index.html`）

---

## 6. 回归测试：核心评分流程

### 测试点
- [ ] 在 ComposePage 输入作文并提交
- [ ] Evaluating 页面正确显示进度动画
- [ ] 评分完成后自动跳转到 Result 页面
- [ ] Result 页面正确显示评分结果和反馈
- [ ] 点击「返回首页」，跳转回 ComposePage
- [ ] 历史记录中出现刚才提交的记录

---

## 测试完成后

### 检查项
- [ ] 所有基础功能正常工作
- [ ] 无明显 UI 错误或样式破损
- [ ] 无控制台错误（除预期的警告外）
- [ ] 数据正确持久化（数据库和 localStorage）

### 已知限制
- 搜索功能（HistoryPage）暂未实现，输入框已禁用
- API 配置 UI 和提示词管理 UI 待后续集成
- 雷达图 "最近10次" 范围：后端 LIMIT 10 已实现，但仅显示最新 1 条对比平均

---

## 问题记录模板

如果发现问题，请记录：

```
【问题描述】：
【复现步骤】：
【预期行为】：
【实际行为】：
【截图/错误日志】：
```
