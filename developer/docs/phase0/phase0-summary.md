# Phase 0 å®Œæˆæ€»ç»“

## å·²å®Œæˆå·¥ä½œ

### ğŸ“‹ 1. å…¨å±€å˜é‡/å‡½æ•°å½’å±æ¸…å•
**æ–‡æ¡£**: `developer/docs/phase0-inventory.md`

å·²å®Œæˆå¯¹ `js/main.js` çš„å…¨é¢ç›˜ç‚¹ï¼ŒåŒ…æ‹¬:
- **140+ ä¸ªå‡½æ•°**çš„å½’å±æ¨¡å—æ ‡æ³¨
- **10 ä¸ªå…¨å±€å˜é‡**çš„è¿ç§»ç›®æ ‡
- **10 å¤§åŠŸèƒ½æ¨¡å—**çš„è¯¦ç»†åˆ†ç±»
- **HTML æ¨¡æ¿è°ƒç”¨**çš„å…¼å®¹å±‚æ¸…å•
- **è·¨æ¨¡å—ä¾èµ–**çš„å®Œæ•´æ ‡æ³¨

#### ä¸»è¦å‘ç°
1. **å¯¼èˆª/è§†å›¾æ§åˆ¶**: 20+ å‡½æ•° â†’ `navigation-controller.js` + `main-entry.js`
2. **æµè§ˆ/é¢˜åº“ç®¡ç†**: 45+ å‡½æ•° â†’ `browseController.js` + `examActions.js` + `libraryManager.js`
3. **ç»ƒä¹ è®°å½•/å¯¼å‡º**: 35+ å‡½æ•° â†’ `app-actions.js` + `state-service.js`
4. **é¢˜åº“é…ç½®**: 25+ å‡½æ•° â†’ `libraryManager.js`
5. **æ›´å¤šå·¥å…·/å°æ¸¸æˆ**: 15+ å‡½æ•° â†’ `moreView.js` + `miniGames.js`

#### å…³é”®çº¦æŸ
- âš ï¸ **å¿…é¡»ä¿ç•™çš„å…¨å±€ API**: 12 ä¸ªï¼ˆå¦‚ `window.browseCategory`ã€`window.switchLibraryConfig` ç­‰ï¼‰
- âš ï¸ **HTML onclick è°ƒç”¨**: 10+ å¤„ï¼ˆå¿…é¡»ä¿æŒå…¼å®¹ï¼‰
- âš ï¸ **æ‡’åŠ è½½é¡ºåºä¾èµ–**: `state-service.js` â†’ æ§åˆ¶å™¨ â†’ `main.js`

---

### ğŸ—ºï¸ 2. åŠ è½½é¡ºåºä¸ä¾èµ–å…³ç³»å›¾
**æ–‡æ¡£**: `developer/docs/phase0-dependency-diagram.md`

å·²åˆ›å»º 6 ç±»å¯è§†åŒ–ä¾èµ–å›¾:

#### 2.1 åŠ è½½æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰
- å±•ç¤ºä» `file://` æ‰“å¼€åˆ°é¦–å±æ¸²æŸ“çš„å®Œæ•´æµç¨‹
- æ ‡æ³¨ `examIndexLoaded` äº‹ä»¶è§¦å‘ç‚¹
- æ ‡æ³¨æ‡’åŠ è½½åˆ†ç»„çš„è§¦å‘æ—¶æœº

#### 2.2 æ¨¡å—ä¾èµ–å…³ç³»å›¾ï¼ˆDependency Graphï¼‰
- åŒæ­¥åŠ è½½å±‚ï¼ˆindex.html ä¸­çš„ 34 ä¸ªè„šæœ¬ï¼‰
- æ‡’åŠ è½½å±‚ï¼ˆ4 ä¸ªåˆ†ç»„ï¼Œå…± 33 ä¸ªè„šæœ¬ï¼‰
- ä¾èµ–ç®­å¤´æ ‡æ³¨åŠ è½½é¡ºåº

#### 2.3 å‡½æ•°è¿ç§»æµå‘å›¾ï¼ˆMigration Flowï¼‰
- ä» main.js çš„ 5 å¤§åŠŸèƒ½æ¨¡å—
- åˆ°é˜¶æ®µ1-4çš„ 9 ä¸ªç›®æ ‡æ–‡ä»¶
- æ ‡æ³¨è¿ç§»ä¼˜å…ˆçº§

#### 2.4 æ‡’åŠ è½½è§¦å‘ç‚¹æµç¨‹å›¾ï¼ˆLazy Loading Triggersï¼‰
- `exam-data` ç»„: `ensureExamDataScripts()` è§¦å‘
- `browse-view` ç»„: ç‚¹å‡»"é¢˜åº“æµè§ˆ"è§¦å‘
- `practice-suite` ç»„: ç‚¹å‡»"ç»ƒä¹ è®°å½•"è§¦å‘
- `more-tools` ç»„: ç‚¹å‡»"æ›´å¤šå·¥å…·"è§¦å‘

#### 2.5 å…¨å±€ API å…¼å®¹å±‚æ˜ å°„å›¾ï¼ˆGlobal API Compatibilityï¼‰
- HTML æ¨¡æ¿ â†’ `window.*` API â†’ main.js è½¬å‘ â†’ å®é™…å®ç°æ¨¡å—
- æ ‡æ³¨ 12 ä¸ªå¿…é¡»ä¿ç•™çš„å…¼å®¹å±‚

#### 2.6 é˜¶æ®µåŒ–è¿ç§»è·¯çº¿å›¾ï¼ˆPhase Migration Roadmapï¼‰
- ç”˜ç‰¹å›¾å±•ç¤ºé˜¶æ®µ0-5çš„æ—¶é—´è§„åˆ’
- æ¯ä¸ªé˜¶æ®µçš„å­ä»»åŠ¡åˆ†è§£
- æµ‹è¯•èŠ‚ç‚¹æ ‡æ³¨

---

### ğŸ§ª 3. åŸºçº¿æµ‹è¯•å‡†å¤‡
**æ–‡æ¡£**: `developer/docs/phase0-baseline-test-manual.md`  
**è„šæœ¬**: `developer/tests/baseline/phase0_baseline_test.py`

#### 3.1 æ‰‹åŠ¨æµ‹è¯•æ‰‹å†Œ
æä¾›è¯¦ç»†çš„æµ‹è¯•æ­¥éª¤:
1. **æµ‹è¯•1**: é¡µé¢åŠ è½½ä¸å¯åŠ¨å±å¹•
2. **æµ‹è¯•2**: æ€»è§ˆè§†å›¾ï¼ˆOverview Viewï¼‰
3. **æµ‹è¯•3**: é¢˜åº“æµè§ˆè§†å›¾ï¼ˆBrowse Viewï¼‰
4. **æµ‹è¯•4**: ç»ƒä¹ è®°å½•è§†å›¾ï¼ˆPractice Viewï¼‰
5. **æµ‹è¯•5**: æ›´å¤šå·¥å…·è§†å›¾ï¼ˆMore Viewï¼‰
6. **æµ‹è¯•6**: æ‡’åŠ è½½çŠ¶æ€æ£€æŸ¥
7. **æµ‹è¯•7**: æ§åˆ¶å°æ—¥å¿—å®Œæ•´æ€§æ£€æŸ¥

æ¯ä¸ªæµ‹è¯•åŒ…å«:
- âœ… é¢„æœŸæ­£å¸¸è¡Œä¸º
- âŒ å¼‚å¸¸è¡Œä¸ºè¯†åˆ«
- ğŸ“ è®°å½•è¡¨æ ¼
- ğŸ” å…³é”®æ—¥å¿—å…³é”®è¯

#### 3.2 è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆå¯é€‰ï¼‰
ä½¿ç”¨ Selenium è‡ªåŠ¨åŒ–æµ‹è¯•:
```bash
# å®‰è£…ä¾èµ–
pip install selenium

# è¿è¡Œæµ‹è¯•
python developer/tests/baseline/phase0_baseline_test.py
```

åŠŸèƒ½:
- è‡ªåŠ¨æ‰“å¼€ file:// åè®®é¡µé¢
- æ•è·æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
- æµ‹è¯•è§†å›¾åˆ‡æ¢å’Œæ‡’åŠ è½½
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼ˆä¿å­˜åˆ° `developer/logs/`ï¼‰

---

## å¾…ç”¨æˆ·æ‰§è¡Œçš„ä»»åŠ¡

### â³ é˜¶æ®µ0ç¬¬3é¡¹: åŸºçº¿æµ‹è¯•

**ä»»åŠ¡**: æ‰‹åŠ¨ file:// æ‰“å¼€é¦–å±ï¼Œè®°å½•æ§åˆ¶å°åŸºçº¿æ—¥å¿—/å‘Šè­¦ï¼Œç¡®è®¤ `examIndexLoaded` â†’ `loadExamList` æ­£å¸¸ã€‚

#### æ¨èæ–¹æ³•1: æ‰‹åŠ¨æµ‹è¯•ï¼ˆç®€å•å¿«é€Ÿï¼‰
1. æ‰“å¼€ `developer/docs/phase0-baseline-test-manual.md`
2. æŒ‰ç…§æ‰‹å†Œæ­¥éª¤é€é¡¹æµ‹è¯•
3. å¡«å†™æµ‹è¯•è®°å½•è¡¨æ ¼
4. ä¿å­˜æ§åˆ¶å°æ—¥å¿—åˆ° `developer/logs/phase0-baseline-manual-YYYYMMDD.log`

#### æ¨èæ–¹æ³•2: è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆéœ€è¦å®‰è£… Seleniumï¼‰
```bash
# 1. å®‰è£… ChromeDriverï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
brew install chromedriver

# 2. å®‰è£… Python ä¾èµ–
pip install selenium

# 3. è¿è¡Œæµ‹è¯•è„šæœ¬
python developer/tests/baseline/phase0_baseline_test.py

# 4. æŸ¥çœ‹æµ‹è¯•ç»“æœ
cat developer/logs/phase0-baseline-*.log
```

#### æµ‹è¯•é€šè¿‡æ ‡å‡†
âœ… **å¿…é¡»æ»¡è¶³**:
- é¡µé¢æ­£å¸¸åŠ è½½ï¼Œæ—  404 é”™è¯¯
- å¯åŠ¨å±å¹•æ­£å¸¸æ˜¾ç¤ºå¹¶æ¶ˆå¤±
- æ€»è§ˆè§†å›¾æ­£å¸¸æ¸²æŸ“ï¼ˆåˆ†ç±»å¡ç‰‡æ˜¾ç¤ºï¼‰
- `examIndexLoaded` äº‹ä»¶è§¦å‘
- `loadExamList()` æ­£å¸¸è°ƒç”¨
- é¢˜åº“åˆ—è¡¨æ­£å¸¸æ¸²æŸ“ï¼ˆ147 ä¸ªé¢˜ç›®ï¼‰
- æ‡’åŠ è½½åˆ†ç»„æ­£å¸¸åŠ è½½ï¼ˆæ—  `[LazyLoader] ç»„åŠ è½½å¤±è´¥` é”™è¯¯ï¼‰

âŒ **ä¸å¯æ¥å—**:
- `Uncaught ReferenceError`
- `Uncaught TypeError`
- `Failed to load script`
- `[LazyLoader] ç»„åŠ è½½å¤±è´¥`
- é¡µé¢ç©ºç™½æˆ–å¡æ­»

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

### å¦‚æœåŸºçº¿æµ‹è¯•é€šè¿‡ âœ…

#### ç«‹å³æ‰§è¡Œ:
1. **æ›´æ–°é‡æ„è®¡åˆ’**:
   ```bash
   # å‹¾é€‰é˜¶æ®µ0ç¬¬3é¡¹
   # åœ¨ developer/docs/mainjs-refactor-plan.md ä¸­æ ‡è®°ä¸ºå®Œæˆ
   ```

2. **åˆ›å»ºé‡æ„åˆ†æ”¯**:
   ```bash
   git checkout -b refactor/main-js-phase1
   ```

3. **å¤‡ä»½ main.js**:
   ```bash
   cp js/main.js js/main.js.backup
   ```

4. **å¼€å§‹é˜¶æ®µ1è¿ç§»**:
   - è¿ç§» `reportBootStage` â†’ `main-entry.js`
   - è¿ç§» `ensureExamDataScripts` â†’ `main-entry.js`
   - è¿ç§» `ensurePracticeSuiteReady` â†’ `main-entry.js`
   - è¿ç§» `ensureBrowseGroup` â†’ `main-entry.js`
   - è¿ç§» `ensureLibraryManagerReady` â†’ `main-entry.js`
   - è¿ç§» `showView` â†’ `navigation-controller.js`ï¼ˆä¿ç•™ `window.showView` è½¬å‘ï¼‰
   - è¿ç§»å…¨å±€çŠ¶æ€å˜é‡ â†’ `state-service.js`

#### é˜¶æ®µ1éªŒæ”¶æ ‡å‡†:
- file:// æ‰‹æµ‹æ— å›å½’
- æ‰€æœ‰ `window.*` å…¼å®¹ API æ­£å¸¸å·¥ä½œ
- æ§åˆ¶å°æ— æ–°å¢é”™è¯¯

---

### å¦‚æœåŸºçº¿æµ‹è¯•å¤±è´¥ âŒ

#### å¿…é¡»å…ˆä¿®å¤:
1. **è®°å½•æ‰€æœ‰é”™è¯¯**:
   - æˆªå›¾ä¿å­˜åˆ° `developer/logs/phase0-errors/`
   - å¤åˆ¶å®Œæ•´æ§åˆ¶å°æ—¥å¿—

2. **åˆ†æé”™è¯¯åŸå› **:
   - æ˜¯å¦æ˜¯å·²çŸ¥å…¼å®¹æ€§é—®é¢˜ï¼Ÿ
   - æ˜¯å¦æ˜¯ç¯å¢ƒé…ç½®é—®é¢˜ï¼Ÿ
   - æ˜¯å¦æ˜¯ä»£ç  bugï¼Ÿ

3. **ä¿®å¤é”™è¯¯åé‡æ–°æµ‹è¯•**:
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   - é‡æ–°è¿è¡ŒåŸºçº¿æµ‹è¯•
   - ç¡®è®¤æ‰€æœ‰é”™è¯¯å·²è§£å†³

4. **ä¸è¦å¼€å§‹é‡æ„**:
   - âš ï¸ åœ¨åŸºçº¿æµ‹è¯•é€šè¿‡å‰ï¼Œä¸è¦å¼€å§‹é˜¶æ®µ1é‡æ„
   - âš ï¸ é¿å…åœ¨ä¸ç¨³å®šçš„åŸºç¡€ä¸Šè¿›è¡Œå¤§è§„æ¨¡é‡æ„

---

## æ–‡æ¡£ç´¢å¼•

### æ ¸å¿ƒæ–‡æ¡£
1. **é‡æ„è®¡åˆ’**: `developer/docs/mainjs-refactor-plan.md`
2. **é˜¶æ®µ0ç›˜ç‚¹**: `developer/docs/phase0-inventory.md`
3. **ä¾èµ–å…³ç³»å›¾**: `developer/docs/phase0-dependency-diagram.md`
4. **æµ‹è¯•æ‰‹å†Œ**: `developer/docs/phase0-baseline-test-manual.md`
5. **æœ¬æ€»ç»“**: `developer/docs/phase0-summary.md`

### æµ‹è¯•è„šæœ¬
1. **è‡ªåŠ¨åŒ–æµ‹è¯•**: `developer/tests/baseline/phase0_baseline_test.py`

### æ—¥å¿—ç›®å½•
1. **åŸºçº¿æ—¥å¿—**: `developer/logs/phase0-baseline-*.log`ï¼ˆå¾…ç”Ÿæˆï¼‰
2. **é”™è¯¯æˆªå›¾**: `developer/logs/phase0-errors/`ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰

---

## å…³é”®æ•°æ®ç»Ÿè®¡

### ä»£ç è§„æ¨¡
- **main.js æ€»è¡Œæ•°**: 3370 è¡Œ
- **main.js æ€»å­—èŠ‚æ•°**: 125,294 å­—èŠ‚
- **å‡½æ•°æ€»æ•°**: 161 ä¸ªï¼ˆåŒ…æ‹¬åµŒå¥—å‡½æ•°ï¼‰
- **å¾…è¿ç§»å‡½æ•°**: 140+ ä¸ª
- **å…¨å±€å˜é‡**: 10 ä¸ª

### ä¾èµ–å…³ç³»
- **åŒæ­¥åŠ è½½è„šæœ¬**: 34 ä¸ªï¼ˆindex.htmlï¼‰
- **æ‡’åŠ è½½åˆ†ç»„**: 4 ä¸ªï¼ˆexam-data, browse-view, practice-suite, more-toolsï¼‰
- **æ‡’åŠ è½½è„šæœ¬**: 33 ä¸ª
- **å¿…é¡»ä¿ç•™çš„å…¨å±€ API**: 12 ä¸ª

### é¢„ä¼°å·¥ä½œé‡
- **é˜¶æ®µ1**: 2-3 å¤©ï¼ˆå…¥å£/å£³å±‚è¿ç§»ï¼‰
- **é˜¶æ®µ2**: 4-5 å¤©ï¼ˆæµè§ˆ/é¢˜åº“æ¨¡å—åŒ–ï¼‰
- **é˜¶æ®µ3**: 3-4 å¤©ï¼ˆç»ƒä¹ è®°å½•æ¨¡å—åŒ–ï¼‰
- **é˜¶æ®µ4**: 2-3 å¤©ï¼ˆæ›´å¤šå·¥å…·/æ¸…ç†ï¼‰
- **é˜¶æ®µ5**: 2-3 å¤©ï¼ˆå›å½’æµ‹è¯•ï¼‰
- **æ€»è®¡**: 13-18 å¤©

---

## é£é™©æç¤º

### é«˜é£é™©åŒºåŸŸ ğŸ”´
1. **æ‡’åŠ è½½é¡ºåº**: å¿…é¡»ä¸¥æ ¼ä¿æŒ `state-service.js` â†’ æ§åˆ¶å™¨ â†’ `main.js`
2. **å…¨å±€ API å…¼å®¹**: 12 ä¸ª `window.*` API å¿…é¡»ä¿ç•™è½¬å‘
3. **HTML onclick è°ƒç”¨**: 10+ å¤„ä¸å¯ç ´å

### ä¸­é£é™©åŒºåŸŸ ğŸŸ¡
1. **ç»ƒä¹ è®°å½•åŒæ­¥**: `syncPracticeRecords` é€»è¾‘å¤æ‚ï¼Œéœ€è°¨æ…è¿ç§»
2. **é¢˜åº“é…ç½®åˆ‡æ¢**: `switchLibraryConfig` æ¶‰åŠå¤šä¸ªçŠ¶æ€æ›´æ–°
3. **è·¯å¾„è§£æ**: `resolveExamBasePath` ç­‰å‡½æ•°è¢«å¤šå¤„è°ƒç”¨

### ä½é£é™©åŒºåŸŸ ğŸŸ¢
1. **å·¥å…·å‡½æ•°**: `normalizeRecordId` ç­‰çº¯å‡½æ•°
2. **UI è¾…åŠ©å‡½æ•°**: `showMessage`ã€`showDeveloperTeam` ç­‰
3. **å°æ¸¸æˆå…¥å£**: `launchMiniGame` ç‹¬ç«‹æ€§å¼º

---

## è”ç³»ä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·:
1. æŸ¥çœ‹ `developer/docs/` ä¸­çš„è¯¦ç»†æ–‡æ¡£
2. åœ¨ GitHub Issues ä¸­æé—®
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**: Phase 0 Summary - v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-11-28  
**ç»´æŠ¤è€…**: Antigravity AI  
**çŠ¶æ€**: âœ… é˜¶æ®µ0å·²å®Œæˆï¼ˆå¾…ç”¨æˆ·ç¡®è®¤åŸºçº¿æµ‹è¯•ï¼‰
