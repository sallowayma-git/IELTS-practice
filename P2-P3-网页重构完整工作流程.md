

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é‡æ„ç›®æ ‡
å°†åŸå§‹çš„ç½‘é¡µé‡æ„ä¸ºç°ä»£åŒ–ã€åŠŸèƒ½å®Œæ•´çš„ç»ƒä¹ é¡µé¢ï¼Œç»Ÿä¸€å¤–è§‚å’ŒåŠŸèƒ½ã€‚

### é‡æ„ååº”å…·å¤‡çš„åŠŸèƒ½
1. **è®¡æ—¶å™¨ç‚¹å‡»æš‚åœ/æ¢å¤åŠŸèƒ½** - ä½äºåº•éƒ¨å¯¼èˆªæ å³ä¾§
2. **æ—¥é—´/å¤œé—´æ¨¡å¼åˆ‡æ¢** - æ·±è‰²ä¸»é¢˜æ”¯æŒ
3. **ç°ä»£åŒ–UIè®¾è®¡** - ç»Ÿä¸€çš„è§†è§‰é£æ ¼
4. **é«˜äº®å’Œç¬”è®°åŠŸèƒ½** - æ–‡æœ¬é€‰æ‹©é«˜äº®ã€ç¬”è®°é¢æ¿
5. **practice-page-enhancerè„šæœ¬é›†æˆ** - æ•°æ®ä¼ è¾“åŠŸèƒ½
6. **å“åº”å¼åˆ†æ å¸ƒå±€** - å¯æ‹–æ‹½è°ƒæ•´å·¦å³é¢æ¿å¤§å°
7. **é¢˜ç›®å¯¼èˆª** - åº•éƒ¨å¯¼èˆªæ ï¼Œæ˜¾ç¤ºç­”é¢˜çŠ¶æ€

---

## ğŸ” æ­¥éª¤1ï¼šè¯†åˆ«åŸå§‹æ–‡ä»¶çŠ¶æ€

### 1.1 æ£€æŸ¥æ–‡ä»¶æ˜¯å¦éœ€è¦é‡æ„
ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ£€æŸ¥æ–‡ä»¶çŠ¶æ€ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰ç°ä»£åŒ–UIç»“æ„
grep -i "practice-nav\|timer.*click\|toggleTheme" æ–‡ä»¶å.html

# å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™äº›å…³é”®è¯ï¼Œè¯´æ˜éœ€è¦é‡æ„
```

### 1.2 è¯†åˆ«é¢˜ç›®èŒƒå›´
- æŸ¥çœ‹æ–‡ä»¶ä¸­çš„é¢˜ç›®ç¼–å·èŒƒå›´ï¼ˆé€šå¸¸æ˜¯27-40æˆ–ç±»ä¼¼ï¼‰
- ç¡®è®¤é¢˜ç›®ç±»å‹ï¼ˆé€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€åŒ¹é…é¢˜ç­‰ï¼‰
- è®°å½•æ–‡ç« æ ‡é¢˜å’Œæ®µè½ç»“æ„

---

## ğŸ› ï¸ æ­¥éª¤2ï¼šHTMLç»“æ„é‡æ„

### 2.1 æ›´æ–°DOCTYPEå’ŒåŸºç¡€ç»“æ„
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>P3 â€“ [é¢˜ç›®æ ‡é¢˜]</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* CSSæ ·å¼å°†åœ¨æ­¥éª¤3ä¸­æ·»åŠ  */
  </style>
</head>
<body>
```

### 2.2 æ·»åŠ åº•éƒ¨å¯¼èˆªæ 
```html
<div class="practice-nav">
  <div class="title">Questions</div>
  <div class="questions">
    <!-- æ ¹æ®å®é™…é¢˜ç›®èŒƒå›´è°ƒæ•´ -->
    <div class="q-item" onclick="scrollToElement('q27-anchor')">27</div>
    <div class="q-item" onclick="scrollToElement('q28-anchor')">28</div>
    <!-- ... ç»§ç»­åˆ°æœ€åä¸€é¢˜ -->
    <div class="q-item" onclick="scrollToElement('q40-anchor')">40</div>
  </div>
  <div class="controls">
    <span id="timer">00:00</span>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">ğŸŒ™</button>
  </div>
</div>
```

### 2.3 ä¿®æ­£è®¡æ—¶å™¨ä½ç½®
**âŒ é”™è¯¯ä½ç½®ï¼ˆåœ¨æ ‡é¢˜ä¸­ï¼‰ï¼š**
```html
<h2>READING PASSAGE 3 <span id="timer">00:00</span></h2>
```

**âœ… æ­£ç¡®ä½ç½®ï¼ˆåœ¨å¯¼èˆªæ controlsä¸­ï¼‰ï¼š**
```html
<h2>READING PASSAGE 3</h2>
<!-- è®¡æ—¶å™¨åº”è¯¥åœ¨åº•éƒ¨å¯¼èˆªæ çš„controlsåŒºåŸŸ -->
```

### 2.4 ç¡®ä¿ä¸»ä½“ç»“æ„æ­£ç¡®
```html
<div class="shell">
  <section class="pane" id="left">
    <h2>READING PASSAGE 3</h2>
    <p>You should spend about 20 minutes on Questions 27â€“40, which are based on Reading Passage 3 below.</p>
    <h3>[æ–‡ç« æ ‡é¢˜]</h3>
    
    <!-- æ–‡ç« æ®µè½ -->
    <h4>A</h4>
    <p>[æ®µè½å†…å®¹]</p>
    
    <h4>B</h4>
    <p>[æ®µè½å†…å®¹]</p>
    <!-- ç»§ç»­å…¶ä»–æ®µè½ -->
  </section>

  <div id="divider"></div>

  <section class="pane" id="right">
    <!-- é¢˜ç›®ç»„ -->
    <div class="group">
      <h3>Questions 27â€“31</h3>
      <p>[é¢˜ç›®è¯´æ˜]</p>
      
      <div id="q27-anchor">
        <p><strong>27</strong> [é¢˜ç›®å†…å®¹]</p>
        <!-- æ ¹æ®é¢˜ç›®ç±»å‹æ·»åŠ ç›¸åº”çš„è¾“å…¥å…ƒç´  -->
      </div>
      <!-- ç»§ç»­å…¶ä»–é¢˜ç›® -->
    </div>

    <div class="group">
      <button class="primary" onclick="grade()">Submit Answers</button>
      <button onclick="toggleNotes()">ğŸ“ Notes</button>
    </div>

    <div id="results"></div>

    <details class="answerbox">
      <summary>Answer Key</summary>
      <ol>
        <li>27 â†’ [ç­”æ¡ˆ]</li>
        <li>28 â†’ [ç­”æ¡ˆ]</li>
        <!-- ç»§ç»­å…¶ä»–ç­”æ¡ˆ -->
      </ol>
    </details>
  </section>
</div>
```

### 2.5 æ·»åŠ å¿…è¦çš„UIå…ƒç´ 
```html
<!-- é«˜äº®å·¥å…·æ  -->
<div id="selbar">
  <button id="btnHL">ğŸ–ï¸ Highlight</button>
  <button id="btnUH">âŒ Remove</button>
  <button id="btnNote">ğŸ“ Note</button>
</div>

<!-- ç¬”è®°é¢æ¿ -->
<div id="notes">
  <header>
    <span>ğŸ“ Notes</span>
    <div>
      <button id="btnCopy">ğŸ“‹</button>
      <button id="btnClose">âœ•</button>
    </div>
  </header>
  <textarea id="noteArea" placeholder="Write your notes here..."></textarea>
</div>

<!-- æç¤ºæ¶ˆæ¯ -->
<div id="toast"></div>
```

---

## ğŸ¨ æ­¥éª¤3ï¼šCSSæ ·å¼é‡æ„

### 3.1 CSSå˜é‡å’ŒåŸºç¡€æ ·å¼
```css
<style>
  :root {
    --line: #e5e7eb;
    --bg: #f6f7fb;
    --panel: #fff;
    --accent: #3b82f6;
    --muted: #6b7280;
    --shadow: 0 6px 20px rgba(0, 0, 0, .12);
  }

  * {
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: var(--bg);
    padding-bottom: 82px;
  }
```

### 3.2 å¸ƒå±€æ ·å¼
```css
  .shell {
    display: flex;
    height: 100vh;
    width: 100%;
  }

  .pane {
    background: var(--panel);
    overflow: auto;
    padding: 20px;
  }

  #left {
    flex: 0 0 50%;
    min-width: 280px;
  }

  #right {
    flex: 1 1 auto;
    min-width: 320px;
    background: #fbfbff;
    border-left: 1px solid var(--line);
  }

  #divider {
    flex: 0 0 8px;
    background: linear-gradient(90deg, #e5e7eb, #d1d5db);
    cursor: ew-resize;
    position: relative;
    z-index: 5;
    user-select: none;
  }

  h2, h3, h4 {
    margin: 0 0 10px;
  }

  #left p {
    margin: 0 0 12px;
    line-height: 1.6;
    word-break: normal;
    overflow-wrap: normal;
    hyphens: none;
  }
```

### 3.3 å¯¼èˆªæ æ ·å¼
```css
  .practice-nav {
    background: #fff;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, .05);
    flex-wrap: wrap;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    border-top: 2px solid var(--line);
    z-index: 4000;
  }

  .practice-nav .title {
    font-weight: 600;
    color: var(--muted);
  }

  .practice-nav .questions {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
  }

  .practice-nav .q-item {
    padding: 6px 10px;
    border: 1px solid var(--line);
    border-radius: 6px;
    background: #fff;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
    min-width: 36px;
    text-align: center;
  }

  .practice-nav .q-item:hover {
    background: #f1f5f9;
    border-color: var(--accent);
  }

  .practice-nav .q-item.answered {
    background: #e0e7ff;
    border-color: var(--accent);
    color: var(--accent);
    font-weight: 500;
  }

  .practice-nav .q-item.active {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }

  .practice-nav .controls {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 12px;
  }
```

### 3.4 è®¡æ—¶å™¨å’Œä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ ·å¼
```css
  #timer {
    display: inline-block;
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 10px;
    padding: 4px 10px;
    font-size: 14px;
    font-family: 'SF Mono', Consolas, monospace;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
  }

  #timer:hover {
    background: #f8fafc;
    border-color: var(--accent);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
  }

  #timer.paused {
    background: #fef3c7;
    border-color: #f59e0b;
    color: #92400e;
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  .theme-toggle {
    background: transparent;
    border: 1px solid var(--line);
    border-radius: 8px;
    padding: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    font-size: 16px;
    transition: all 0.2s ease;
  }

  .theme-toggle:hover {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
    transform: scale(1.05);
  }

  .theme-toggle:active {
    transform: scale(0.95);
  }
```

### 3.5 UIç»„ä»¶æ ·å¼
```css
  .group {
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 14px;
  }

  input.blank {
    border: none;
    border-bottom: 1px solid #9ca3af;
    padding: 2px 4px;
    font-size: 1em;
    background: transparent;
    min-width: 80px;
  }

  input.blank:focus {
    outline: none;
    border-bottom: 2px solid var(--accent);
  }

  button {
    padding: 8px 12px;
    border: 1px solid var(--line);
    border-radius: 10px;
    background: #fff;
    cursor: pointer;
    transition: all 0.2s;
  }

  button:hover {
    background: #f1f5f9;
    border-color: var(--accent);
  }

  button.primary {
    background: var(--accent);
    color: #fff;
    border-color: #3b82f6;
  }

  button.primary:hover {
    background: #2563eb;
  }

  #results {
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 10px;
    padding: 10px;
    margin-top: 14px;
  }
```

### 3.6 é«˜äº®å’Œç¬”è®°åŠŸèƒ½æ ·å¼
```css
  .hl {
    background: #fff3a3;
    box-shadow: inset 0 -2px 0 rgba(0, 0, 0, .05);
    cursor: pointer;
  }

  .hl:hover {
    filter: brightness(0.98);
  }

  #selbar {
    position: absolute;
    display: none;
    z-index: 2000;
    background: #111;
    color: #fff;
    border-radius: 8px;
    padding: 6px;
    box-shadow: var(--shadow);
    font-size: 13px;
    gap: 6px;
    align-items: center;
  }

  #selbar button {
    background: transparent;
    color: #fff;
    border: 1px solid rgba(255, 255, 255, .25);
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
  }

  #selbar button:hover {
    border-color: #fff;
  }

  #notes {
    position: fixed;
    right: 12px;
    bottom: 12px;
    width: 320px;
    height: 42vh;
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 12px;
    display: none;
    flex-direction: column;
    z-index: 1500;
    box-shadow: var(--shadow);
  }

  #notes header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 10px;
    border-bottom: 1px solid var(--line);
  }

  #notes textarea {
    flex: 1;
    border: 0;
    padding: 10px;
    resize: none;
    font-size: 14px;
    line-height: 1.5;
  }

  #toast {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 24px;
    background: #111;
    color: #fff;
    padding: 8px 12px;
    border-radius: 8px;
    display: none;
    z-index: 2500;
  }

  details.answerbox summary {
    cursor: pointer;
    user-select: none;
    list-style: none;
  }

  details.answerbox {
    border: 1px dashed var(--line);
    border-radius: 10px;
    padding: 8px 10px;
    background: #fff;
    margin-top: 14px;
  }

  .badge {
    display: inline-block;
    background: #eef2ff;
    color: #4338ca;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 12px;
    margin-left: 6px;
  }
```

### 3.7 æ·±è‰²æ¨¡å¼æ ·å¼
```css
  /* Dark mode styles */
  body.dark {
    --bg: #0f172a;
    --panel: #1e293b;
    --line: #334155;
    --muted: #94a3b8;
    color: #e2e8f0;
  }

  body.dark #right {
    background: #0f172a;
  }

  body.dark .group {
    background: #1e293b;
    border-color: #334155;
  }

  body.dark button {
    background: #1e293b;
    color: #e2e8f0;
    border-color: #334155;
  }

  body.dark button:hover {
    background: #334155;
  }

  body.dark button.primary {
    background: var(--accent);
    color: #fff;
  }

  body.dark #results {
    background: #1e293b;
    border-color: #334155;
  }

  body.dark #notes {
    background: #1e293b;
    border-color: #334155;
    color: #e2e8f0;
  }

  body.dark .practice-nav {
    background: #1e293b;
    border-color: #334155;
  }

  body.dark .q-item {
    background: #0f172a;
    color: #e2e8f0;
    border-color: #334155;
  }

  body.dark .q-item:hover {
    background: #334155;
  }

  body.dark .q-item.answered {
    background: #1e40af;
    border-color: var(--accent);
    color: #93c5fd;
  }

  body.dark #timer {
    background: #1e293b;
    color: #e2e8f0;
    border-color: #334155;
  }

  body.dark #timer:hover {
    background: #334155;
    border-color: var(--accent);
  }

  body.dark details.answerbox {
    background: #1e293b;
    border-color: #334155;
  }

  body.dark input.blank {
    color: #e2e8f0;
    border-bottom-color: #64748b;
  }

  body.dark input.blank:focus {
    border-bottom-color: var(--accent);
  }
```

### 3.8 å“åº”å¼è®¾è®¡
```css
  @media (max-width: 768px) {
    .shell {
      flex-direction: column;
    }

    #left, #right {
      flex: none;
      min-width: auto;
    }

    #divider {
      display: none;
    }

    .practice-nav .controls {
      gap: 8px;
    }
    
    #timer {
      font-size: 12px;
      padding: 3px 8px;
    }
    
    .theme-toggle {
      width: 32px;
      height: 32px;
      font-size: 14px;
    }

    #notes {
      width: calc(100vw - 24px);
      right: 12px;
      left: 12px;
    }
  }
</style>
```

---

## ğŸ’» æ­¥éª¤4ï¼šJavaScriptåŠŸèƒ½å®ç°

### 4.1 è®¡æ—¶å™¨åŠŸèƒ½
```javascript
<script>
  // Timer with click to pause/resume functionality
  let _t = 0;
  let timerRunning = true;
  let timerInterval;
  const _timerEl = document.getElementById('timer');

  function updateTimer() {
    const m = Math.floor(_t / 60);
    const s = _t % 60;
    _timerEl.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
  }

  function startTimer() {
    timerInterval = setInterval(() => {
      if (timerRunning) {
        _t++;
        updateTimer();
      }
    }, 1000);
  }

  // Add click functionality to timer
  _timerEl.addEventListener('click', function () {
    if (timerRunning) {
      clearInterval(timerInterval);
      timerRunning = false;
      _timerEl.classList.add('paused');
      showToast('Timer paused');
    } else {
      startTimer();
      timerRunning = true;
      _timerEl.classList.remove('paused');
      showToast('Timer resumed');
    }
  });

  // Start timer on page load
  startTimer();
```

### 4.2 ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
```javascript
  // Dark mode functionality
  function toggleTheme() {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    localStorage.setItem('darkMode', isDark);
    const themeButton = document.querySelector('.theme-toggle');
    themeButton.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  }

  // Load saved theme
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark');
    document.querySelector('.theme-toggle').textContent = 'â˜€ï¸';
  }
```

### 4.3 å¯¼èˆªåŠŸèƒ½
```javascript
  // Navigation functionality
  function scrollToElement(id) {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
      // Update navigation state
      document.querySelectorAll('.q-item').forEach(item => item.classList.remove('active'));
      const questionNum = id.replace('-anchor', '').replace('q', '');
      const navItem = document.querySelector(`[onclick="scrollToElement('${id}')"]`);
      if (navItem) navItem.classList.add('active');
    }
  }

  // Answer tracking
  function updateAnswerStatus() {
    for (let i = 27; i <= 40; i++) {
      const input = document.querySelector(`input[name="q${i}"]:checked`) || 
                   document.querySelector(`input[name="q${i}"][type="text"]`);
      const navItem = document.querySelector(`[onclick="scrollToElement('q${i}-anchor')"]`);
      if (navItem) {
        if (input && ((input.type === 'radio' && input.checked) || 
                     (input.type === 'text' && input.value.trim()))) {
          navItem.classList.add('answered');
        } else {
          navItem.classList.remove('answered');
        }
      }
    }
  }

  // Listen for answer changes
  document.addEventListener('change', updateAnswerStatus);
  document.addEventListener('input', updateAnswerStatus);
```

### 4.4 é«˜äº®åŠŸèƒ½
```javascript
  // Highlighting functionality
  let lastRange = null;
  let currentHlNode = null;
  const selbar = document.getElementById('selbar');
  const btnHL = document.getElementById('btnHL');
  const btnUH = document.getElementById('btnUH');
  const btnNote = document.getElementById('btnNote');

  document.addEventListener('mouseup', function (e) {
    const sel = window.getSelection();
    if (sel.rangeCount && !sel.isCollapsed) {
      lastRange = sel.getRangeAt(0);
      const rect = lastRange.getBoundingClientRect();
      selbar.style.left = rect.left + 'px';
      selbar.style.top = (rect.top - 40) + 'px';
      selbar.style.display = 'flex';
    }
  });

  document.addEventListener('click', function (e) {
    if (e.target.classList && e.target.classList.contains('hl')) {
      currentHlNode = e.target;
      const rect = e.target.getBoundingClientRect();
      selbar.style.left = rect.left + 'px';
      selbar.style.top = (rect.top - 40) + 'px';
      selbar.style.display = 'flex';
    } else if (!selbar.contains(e.target)) {
      selbar.style.display = 'none';
      currentHlNode = null;
    }
  });

  function doHighlight() {
    if (currentHlNode) return;
    if (!lastRange) return;
    try {
      const wrap = document.createElement('span');
      wrap.className = 'hl';
      wrap.appendChild(lastRange.cloneContents());
      lastRange.deleteContents();
      lastRange.insertNode(wrap);
    } catch (e) {
      console.error('Highlight failed:', e);
    }
    selbar.style.display = 'none';
    showToast('Highlighted');
  }

  function removeHighlight() {
    if (currentHlNode) {
      const p = currentHlNode.parentNode;
      while (currentHlNode.firstChild) p.insertBefore(currentHlNode.firstChild, currentHlNode);
      p.removeChild(currentHlNode);
      p.normalize();
      currentHlNode = null;
      selbar.style.display = 'none';
      showToast('Highlight removed');
      return;
    }
    
    if (!lastRange) return;
    const selRect = lastRange.getBoundingClientRect();
    const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT);
    const toRemove = [];
    
    while (walker.nextNode()) {
      const n = walker.currentNode;
      if (n.classList && n.classList.contains('hl')) {
        const r = n.getBoundingClientRect();
        if (!(r.right < selRect.left || r.left > selRect.right || r.bottom < selRect.top || r.top > selRect.bottom)) {
          toRemove.push(n);
        }
      }
    }
    
    toRemove.forEach(function (el) {
      const p = el.parentNode;
      while (el.firstChild) p.insertBefore(el.firstChild, el);
      p.removeChild(el);
      p.normalize();
    });
    
    selbar.style.display = 'none';
    showToast('Highlight removed');
  }

  btnHL.addEventListener('click', doHighlight);
  btnUH.addEventListener('click', removeHighlight);
```

### 4.5 ç¬”è®°åŠŸèƒ½
```javascript
  // Notes functionality
  const notes = document.getElementById('notes');
  const noteArea = document.getElementById('noteArea');
  const btnCopy = document.getElementById('btnCopy');
  const btnClose = document.getElementById('btnClose');

  function toggleNotes() {
    notes.style.display = (notes.style.display === 'flex' ? 'none' : 'flex');
  }

  btnClose.addEventListener('click', toggleNotes);
  btnCopy.addEventListener('click', async function () {
    await navigator.clipboard.writeText(noteArea.value || '');
    showToast('Copied');
  });

  btnNote.addEventListener('click', function () {
    let text = '';
    if (currentHlNode) {
      text = (currentHlNode.textContent || '').trim();
    } else if (lastRange) {
      const frag = lastRange.cloneContents();
      text = (frag.textContent || '').trim();
    }
    toggleNotes();
    if (text) {
      noteArea.value = (noteArea.value ? noteArea.value + '\n' : '') + '> ' + text + '\n';
    }
    selbar.style.display = 'none';
  });
```

### 4.6 å·¥å…·å‡½æ•°
```javascript
  // Toast functionality
  const toastEl = document.getElementById('toast');
  function showToast(msg) {
    toastEl.textContent = msg;
    toastEl.style.display = 'block';
    setTimeout(function () { toastEl.style.display = 'none'; }, 1200);
  }

  // Grading functionality (éœ€è¦æ ¹æ®å…·ä½“é¢˜ç›®è°ƒæ•´)
  const answers = {
    "q27": "A", "q28": "B", "q29": "C", // æ ¹æ®å®é™…ç­”æ¡ˆè°ƒæ•´
    // æ·»åŠ æ‰€æœ‰é¢˜ç›®çš„æ­£ç¡®ç­”æ¡ˆ
  };

  function grade() {
    let correct = 0;
    let total = 0;
    let results = [];

    for (const [qId, correctAnswer] of Object.entries(answers)) {
      total++;
      const input = document.querySelector(`input[name="${qId}"]:checked`) || 
                   document.querySelector(`input[name="${qId}"][type="text"]`);
      
      let userAnswer = '';
      if (input) {
        userAnswer = input.type === 'radio' ? input.value : input.value.trim();
      }

      const isCorrect = userAnswer.toLowerCase() === correctAnswer.toLowerCase();
      if (isCorrect) correct++;

      results.push(`${qId.replace('q', '')}: ${userAnswer || '(blank)'} ${isCorrect ? 'âœ“' : 'âœ— (' + correctAnswer + ')'}`);
    }

    document.getElementById('results').innerHTML = `
      <h4>Results: ${correct}/${total} (${Math.round(correct/total*100)}%)</h4>
      <pre>${results.join('\n')}</pre>
    `;
  }

  // Practice page enhancer integration
  function loadPracticePageEnhancer() {
    const script = document.createElement('script');
    script.src = '../../../practice-page-enhancer.js';
    script.onerror = function() {
      // Fallback inline enhancer
      console.log('Practice page enhancer loaded inline');
    };
    document.head.appendChild(script);
  }

  // Load enhancer on page load
  loadPracticePageEnhancer();
</script>
```

---

## ğŸ“‹ é‡æ„æ£€æŸ¥æ¸…å•

### ğŸ¨ è§†è§‰è®¾è®¡æ£€æŸ¥
- [ ] è®¡æ—¶å™¨ä½äºåº•éƒ¨å¯¼èˆªæ å³ä¾§controlsåŒºåŸŸ
- [ ] è®¡æ—¶å™¨ä½¿ç”¨ç™½è‰²èƒŒæ™¯ã€åœ†è§’è®¾è®¡ã€ç­‰å®½å­—ä½“
- [ ] ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ä¸º36x36pxæ­£æ–¹å½¢ï¼Œé€æ˜èƒŒæ™¯
- [ ] è®¡æ—¶å™¨å’Œä¸»é¢˜æŒ‰é’®é—´è·ä¸º12px
- [ ] æ‚¬åœæ•ˆæœï¼šè®¡æ—¶å™¨è½»å¾®ä¸Šç§»+è“è‰²é˜´å½±ï¼Œä¸»é¢˜æŒ‰é’®è½»å¾®æ”¾å¤§
- [ ] æš‚åœçŠ¶æ€ï¼šé»„è‰²èƒŒæ™¯+è„‰å†²åŠ¨ç”»
- [ ] æ·±è‰²æ¨¡å¼ä¸‹æ‰€æœ‰å…ƒç´ æ­£ç¡®æ˜¾ç¤º

### ğŸ”§ åŠŸèƒ½å®ç°æ£€æŸ¥
- [ ] è®¡æ—¶å™¨è‡ªåŠ¨å¼€å§‹è®¡æ—¶
- [ ] ç‚¹å‡»è®¡æ—¶å™¨å¯æš‚åœ/æ¢å¤
- [ ] ä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ­£å¸¸å·¥ä½œï¼Œå›¾æ ‡åŠ¨æ€åˆ‡æ¢ğŸŒ™/â˜€ï¸
- [ ] ä¸»é¢˜åå¥½ä¿å­˜åˆ°localStorage
- [ ] é«˜äº®åŠŸèƒ½ï¼šé€‰æ‹©æ–‡æœ¬åæ˜¾ç¤ºå·¥å…·æ 
- [ ] ç¬”è®°åŠŸèƒ½ï¼šæµ®åŠ¨é¢æ¿ï¼Œå¤åˆ¶åŠŸèƒ½
- [ ] é¢˜ç›®å¯¼èˆªï¼šç‚¹å‡»è·³è½¬ï¼ŒçŠ¶æ€æ˜¾ç¤º
- [ ] ç­”é¢˜çŠ¶æ€å®æ—¶æ›´æ–°
- [ ] practice-page-enhancerè„šæœ¬æ­£ç¡®åŠ è½½

### ğŸ“± å“åº”å¼æ£€æŸ¥
- [ ] ç§»åŠ¨ç«¯ï¼šåˆ†æ å˜ä¸ºä¸Šä¸‹å¸ƒå±€
- [ ] ç§»åŠ¨ç«¯ï¼šæ§ä»¶å°ºå¯¸é€‚å½“ç¼©å°
- [ ] ç§»åŠ¨ç«¯ï¼šç¬”è®°é¢æ¿å…¨å®½æ˜¾ç¤º
- [ ] æ‰€æœ‰äº¤äº’åœ¨è§¦å±è®¾å¤‡ä¸Šæ­£å¸¸å·¥ä½œ

### ğŸ¯ ä¸€è‡´æ€§æ£€æŸ¥
- [ ] ä¸Charles Darwinæ¨¡æ¿å¤–è§‚å®Œå…¨ä¸€è‡´
- [ ] CSSå˜é‡ç³»ç»Ÿæ­£ç¡®ä½¿ç”¨
- [ ] æ·±è‰²æ¨¡å¼æ ·å¼å®Œæ•´æ— é—æ¼
- [ ] åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœç»Ÿä¸€
- [ ] å­—ä½“ã€é—´è·ã€åœ†è§’ç­‰è®¾è®¡è§„èŒƒä¸€è‡´

---


## ğŸ¯ é¢„æœŸæˆæœ

å®Œæˆé‡æ„åï¼Œæ‰€æœ‰P2å’ŒP3ç½‘é¡µå°†å…·æœ‰ï¼š

1. **ç»Ÿä¸€çš„ç°ä»£åŒ–å¤–è§‚**
   - ä¸Charles Darwinæ¨¡æ¿å®Œå…¨ä¸€è‡´çš„è§†è§‰è®¾è®¡
   - ç»Ÿä¸€çš„é¢œè‰²ç³»ç»Ÿã€å­—ä½“ã€é—´è·ã€åœ†è§’ç­‰è®¾è®¡è§„èŒƒ
   - æµç•…çš„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

2. **å®Œæ•´çš„äº¤äº’åŠŸèƒ½**
   - å¯ç‚¹å‡»æš‚åœ/æ¢å¤çš„è®¡æ—¶å™¨
   - æ—¥é—´/å¤œé—´æ¨¡å¼åˆ‡æ¢
   - æ–‡æœ¬é«˜äº®å’Œç¬”è®°åŠŸèƒ½
   - é¢˜ç›®å¯¼èˆªå’Œç­”é¢˜çŠ¶æ€æ˜¾ç¤º

3. **æ•°æ®ä¼ è¾“èƒ½åŠ›**
   - practice-page-enhancerè„šæœ¬é›†æˆ
   - ç­”æ¡ˆå˜åŒ–ç›‘å¬å’Œæ•°æ®æ”¶é›†
   - ç»ƒä¹ å®Œæˆåæ•°æ®ä¼ è¾“

4. **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ**
   - å“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§è®¾å¤‡
   - ç›´è§‚çš„æ“ä½œç•Œé¢
   - å®æ—¶åé¦ˆå’ŒçŠ¶æ€æç¤º
   - æµç•…çš„äº¤äº’åŠ¨ç”»

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

1. **æŒ‰ç…§æ­¤å·¥ä½œæµç¨‹é€æ­¥æ‰§è¡Œ**ï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤
2. **ä¸¥æ ¼éµå¾ªè®¾è®¡è§„èŒƒ**ï¼Œç¡®ä¿ä¸Charles Darwinæ¨¡æ¿ä¸€è‡´
3. **å®Œæ•´å¤åˆ¶æ‰€æœ‰CSSå’ŒJavaScriptä»£ç **ï¼Œä¸è¦çœç•¥ä»»ä½•éƒ¨åˆ†
4. **æ ¹æ®å…·ä½“ç½‘é¡µè°ƒæ•´**é¢˜ç›®èŒƒå›´ã€ç­”æ¡ˆç­‰å†…å®¹
5. **å®Œæˆåè¿›è¡Œå…¨é¢æµ‹è¯•**ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ


è¿™ä¸ªå®Œæ•´çš„å·¥ä½œæµç¨‹ç¡®ä¿æ¯ä¸ªç½‘é¡µéƒ½èƒ½ä»åŸå§‹çŠ¶æ€é‡æ„ä¸ºç°ä»£åŒ–çš„ç»ƒä¹ é¡µé¢ï¼Œå…·æœ‰ç»Ÿä¸€çš„å¤–è§‚å’Œå®Œæ•´çš„åŠŸèƒ½ã€‚