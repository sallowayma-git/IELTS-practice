<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>IELTS Reading Practice - A survivor's story</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --line: #e5e7eb;
      --bg: #f6f7fb;
      --panel: #fff;
      --accent: #3b82f6;
      --muted: #6b7280;
      --shadow: 0 6px 20px rgba(0, 0, 0, .12);
      --text-color: #333;
      --highlight: #fff3a3;
      --selbar-bg: #111;
      --selbar-text: #fff;
    }

    body.dark-mode {
      --line: #4a4a4a;
      --bg: #1a1a1a;
      --panel: #2a2a2a;
      --muted: #bbb;
      --text-color: #f0f0f0;
      --highlight: #5b21b6;
      --selbar-bg: #1f2937;
      --selbar-text: #e5e7eb;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
    }

    html.font-regular {
      font-size: 16px;
    }

    html.font-large {
      font-size: 18px;
    }

    html.font-xlarge {
      font-size: 20px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      background: var(--bg);
      color: var(--text-color);
      height: 100vh;
      overflow: hidden;
      transition: background-color 0.3s ease;
      padding-bottom: 64px;
    }

    .header {
      background-color: var(--panel);
      padding: 12px 20px;
      border-bottom: 1px solid var(--line);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      z-index: 100;
      box-shadow: 0 1px 3px rgba(0, 0, 0, .05);
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .header h1 {
      font-size: 1.2rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: var(--text-color);
    }

    #timer {
      font-size: 1rem;
      font-weight: 500;
      background: var(--bg);
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid var(--line);
      min-width: 90px;
      text-align: center;
      color: var(--text-color);
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-btn {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 6px;
      padding: 6px 12px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s ease;
      color: var(--text-color);
    }

    .header-btn:hover {
      background: var(--bg);
      border-color: var(--accent);
    }

    #settings-panel {
      position: absolute;
      top: 60px;
      right: 20px;
      width: 200px;
      background: var(--panel);
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: 1px solid var(--line);
      z-index: 1000;
      padding: 8px;
      display: none;
    }

    .settings-group {
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--line);
    }

    .settings-group:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .settings-title {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 8px;
      padding-left: 12px;
    }

    .settings-option {
      display: block;
      width: 100%;
      text-align: left;
      padding: 8px 12px;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 0.9rem;
      border-radius: 6px;
      color: var(--text-color);
    }

    .settings-option.active {
      background: #e9effd;
      color: var(--accent);
      font-weight: 500;
    }

    .dark-mode .settings-option.active {
      background: #1e3a8a;
    }

    #notes-panel {
      position: fixed;
      right: 12px;
      bottom: 76px;
      width: 320px;
      height: 45vh;
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 12px;
      display: none;
      flex-direction: column;
      z-index: 900;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    #notes-panel header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-bottom: 1px solid var(--line);
      background-color: var(--bg);
    }

    #notes-panel h3 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-color);
      margin: 0;
    }

    #notes-panel textarea {
      flex: 1;
      border: 0;
      padding: 16px;
      resize: none;
      font-size: 0.95rem;
      background: transparent;
      color: var(--text-color);
      line-height: 1.6;
    }

    #notes-panel textarea:focus {
      outline: none;
    }

    #close-note {
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid var(--line);
      background: transparent;
      cursor: pointer;
      color: var(--text-color);
      transition: background-color 0.2s;
    }

    #close-note:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .dark-mode #close-note:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.08);
      z-index: 800;
      display: none;
      backdrop-filter: blur(2px);
    }

    .dark-mode .overlay {
      background: rgba(0, 0, 0, 0.3);
    }

    .shell {
      display: flex;
      height: calc(100vh - 58px - 64px);
      width: 100%;
      overflow: hidden;
    }

    .pane {
      background: var(--panel);
      overflow: auto;
      padding: 24px;
    }

    #left {
      min-width: 280px;
      max-width: calc(100% - 280px);
      width: 50%;
    }

    #right {
      min-width: 280px;
      flex: 1;
      background: var(--bg);
      border-left: 1px solid var(--line);
    }

    .dark-mode #right {
      background: #1a1a1a;
    }

    #divider {
      flex: 0 0 8px;
      background: var(--bg);
      cursor: ew-resize;
      user-select: none;
      position: relative;
      border-left: 1px solid var(--line);
      border-right: 1px solid var(--line);
    }

    #divider::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 4px;
      height: 30px;
      border-radius: 2px;
      background: rgba(100, 100, 100, 0.2);
    }

    #divider:hover {
      background: #dbeafe;
    }

    .dark-mode #divider {
      border-color: #4a4a4a;
    }

    .dark-mode #divider:hover {
      background: #1e40af;
    }

    h2,
    h3,
    h4 {
      margin: 0 0 16px;
      color: var(--text-color);
    }

    #left p,
    #right p {
      margin: 0 0 16px;
      line-height: 1.7;
    }

    #left strong,
    #right strong {
      font-weight: 600;
    }

    .empty-space {
      height: 40px;
    }

    .group {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .question-item {
      padding: 12px 0;
      border-bottom: 1px dashed var(--line);
    }

    .question-item:last-child {
      border-bottom: none;
    }

    .radio-options {
      display: flex;
      gap: 16px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .radio-options label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .notes-completion {
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 20px;
    }

    .notes-completion h4 {
      margin-top: 0;
      font-size: 1.5em;
      text-align: center;
      margin-bottom: 24px;
    }

    .notes-completion p,
    .notes-completion li {
      line-height: 2.2;
    }

    .notes-completion input {
      border: none;
      border-bottom: 1px solid #9ca3af;
      padding: 2px 8px;
      font-size: 1em;
      background: transparent;
      color: var(--text-color);
      min-width: 120px;
      text-align: center;
    }

    .dark-mode .notes-completion input {
      border-bottom-color: #666;
    }

    .notes-completion input:focus {
      outline: none;
      border-bottom: 2px solid var(--accent);
    }

    .notes-completion ul {
      list-style-position: inside;
      padding-left: 0;
      list-style-type: none;
    }

    .notes-completion ul li {
      margin-bottom: 12px;
    }

    #results {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
      display: none;
      line-height: 1.8;
    }

    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 0.9rem;
    }

    .results-table th,
    .results-table td {
      border: 1px solid var(--line);
      padding: 8px;
      text-align: center;
    }

    .results-table th {
      background: var(--bg);
    }

    .result-correct {
      color: #10b981;
      font-weight: bold;
    }

    .result-incorrect {
      color: #ef4444;
      font-weight: bold;
    }

    .hl {
      background: var(--highlight);
      box-shadow: inset 0 -2px 0 rgba(0, 0, 0, .05);
      cursor: pointer;
    }

    .dark-mode .hl {
      color: #f5f3ff;
    }

    #selbar {
      position: absolute;
      display: none;
      z-index: 6000;
      background: var(--selbar-bg);
      color: var(--selbar-text);
      border-radius: 8px;
      padding: 6px;
      box-shadow: var(--shadow);
      font-size: 13px;
      gap: 6px;
      align-items: center;
    }

    #selbar button {
      background: transparent;
      color: var(--selbar-text);
      border: 1px solid rgba(255, 255, 255, .25);
      padding: 4px 8px;
      border-radius: 6px;
      cursor: pointer;
    }

    #selbar button:hover {
      border-color: var(--selbar-text);
    }

    .practice-nav {
      background: var(--panel);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 -2px 4px rgba(0, 0, 0, .05);
      flex-wrap: wrap;
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      border-top: 1px solid var(--line);
      z-index: 4000;
    }

    .practice-nav .title {
      font-weight: 600;
      color: var(--muted);
    }

    .practice-nav .questions {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .practice-nav .q-item {
      padding: 6px 10px;
      border: 1px solid var(--line);
      border-radius: 6px;
      background: var(--panel);
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
      min-width: 36px;
      text-align: center;
      color: var(--text-color);
    }

    .practice-nav .q-item:hover {
      background: var(--bg);
      border-color: var(--accent);
    }

    .practice-nav .q-item.answered {
      background: #e0e7ff;
      border-color: var(--accent);
      color: var(--accent);
      font-weight: 500;
    }

    .dark-mode .practice-nav .q-item.answered {
      background: #3949ab;
      border-color: var(--accent);
      color: #e8eaf6;
    }

    .practice-nav .q-item.correct {
      background: #dcfce7;
      border-color: #4ade80;
      color: #15803d;
    }

    .dark-mode .practice-nav .q-item.correct {
      background: #166534;
      border-color: #4ade80;
      color: #dcfce7;
    }

    .practice-nav .q-item.incorrect {
      background: #fee2e2;
      border-color: #f87171;
      color: #b91c1c;
    }

    .dark-mode .practice-nav .q-item.incorrect {
      background: #991b1b;
      border-color: #f87171;
      color: #fee2e2;
    }

    .practice-nav .controls {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .practice-nav .controls button {
      padding: 8px 12px;
      border: 1px solid var(--line);
      border-radius: 6px;
      background: var(--panel);
      cursor: pointer;
      color: var(--text-color);
    }

    .practice-nav .controls button.primary {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }
  </style>
</head>

<body>
  <header class="header">
    <div class="header-content">
      <h1>P1 - A survivor's story</h1>
      <div id="timer">00:00</div>
    </div>
    <div class="header-controls">
      <button class="header-btn" id="size-btn">Size</button>
      <button class="header-btn" id="color-btn">Color</button>
      <button class="header-btn" id="note-btn">Note</button>
    </div>
  </header>

  <div id="settings-panel">
    <div class="settings-group">
      <div class="settings-title">Font Size</div>
      <button class="settings-option active" data-size="regular">Regular</button>
      <button class="settings-option" data-size="large">Large</button>
      <button class="settings-option" data-size="xlarge">Extra Large</button>
    </div>
    <div class="settings-group">
      <div class="settings-title">Color Mode</div>
      <button class="settings-option active" data-mode="light">Black on White</button>
      <button class="settings-option" data-mode="dark">White on Black</button>
    </div>
  </div>

  <div id="notes-panel">
    <header>
      <h3>Notes</h3>
      <button id="close-note">Close</button>
    </header>
    <textarea placeholder="Write your notes here..."></textarea>
  </div>

  <div class="overlay"></div>

  <div class="shell">
    <section class="pane" id="left">
      <h2>READING PASSAGE 1</h2>
      <p>You should spend about 20 minutes on Questions 1–13, which are based on Reading Passage 1 below.</p>

      <h3>A survivor's story</h3>
      <h4>One native bird in New Zealand that has managed to survive the introduction of non-native species</h4>

      <p>As an island country with a fauna dominated by birds, New Zealand was once home to an owl species which is now
        extinct, the laughing owl, named for its distinctive cry. This bird was widespread throughout the islands when
        European settlers arrived in the middle of the 19th century and it remained in good numbers for some years
        thereafter. Where other native birds suffered from predation by the Polynesian rat, the laughing owl turned the
        tables and adapted its diet to include the rodent. It was also capable of catching and killing the other New
        Zealand owl, the morepork, and even larger birds, such as the weka. However, the laughing owl was wiped out
        around the beginning of the 20th century, its demise caused by specimen collectors, habitat changes, and
        non-native predators including cats and stoats. Surprisingly, it is the smaller owl, the morepork, that has
        managed to survive until this day.</p>
      <p>Speckled dark brown, with yellow eyes and long tails, they are around 29 centimetres long from head to tail and
        175 grams in weight. Moreporks have fringes on the edge of their feathers, so they can fly almost silently and
        not alert potential prey. They have acute hearing and their large eyes are very sensitive to light.</p>
      <p>Moreporks nest in tree hollows, in clumps of plants, or in cavities among rocks and roots. In the wild,
        moreporks usually start nesting in October, although two specimens have been recorded nesting in mid-winter,
        possibly stimulated by an ample food supply. The female lays up to three white eggs, which she incubates for 20
        to 30 days. During this time, she rarely hunts, and the male brings food to her.</p>
      <p>Once the chicks hatch, she stays mainly on the nest until the young owls are fully feathered. When hatched,
        chicks are covered in light grey down and have their eyes closed. The eyes do not open until the eighth day
        after hatching. They can fly at around 35 days.</p>
      <p>By day, moreporks sleep in roosts. By night, they hunt a variety of animals – mainly large invertebrates
        including scarab and huhu beetles, moths, caterpillars and spiders. They also take small birds and mice. They
        can find suitable food in pine forest as well as native forest. A morepork uses its sharp talons to catch or
        stun its prey, which it then carries away in its bill. Moreporks are clever hunters, and birds such as robins,
        grey warblers and fantails can end up as their prey. In the day, these small birds sometimes mob drowsy
        moreporks and chase them away from their roosts; they force the sleepy predators to search for a more peaceful
        spot.</p>
      <p>Moreporks have proved to be ungracious hosts. Scientists trying to establish a population of plovers on Motuora
        Island in New Zealand's Hauraki Gulf were mystified as to why only two birds survived out of the 75 placed
        there. The culprits turned out to be five pairs of moreporks that ate or chased away the new arrivals.</p>
      <p>Although moreporks are still considered to be relatively common, it is likely that numbers are in gradual
        decline due to predation and loss of habitat. As the female is a hole-nester, she is vulnerable to predators
        such as stoats and possums during the breeding season, and eggs and chicks will also be at risk from rats. The
        use of pesticides is another possible threat to the owls, though not a direct one. As moreporks are at the top
        of the food chain, they could be affected by an accumulative poison by consuming prey that has ingested poison.
      </p>
      <p>The New Zealand Department of Conservation is taking steps to ensure the preservation of New Zealand's only
        native owl. The department is involved in measuring the population of moreporks and has put transmitters on a
        number of birds to determine survival and mortality. As well as being New Zealand's only native owl, the
        morepork has symbolic and spiritual importance, so in monitoring the birds it is hoped that the morepork will
        continue to survive and thrive.</p>
      <p>At dusk, the melancholy sound of the morepork can be heard in forests and parks as it calls to other moreporks
        and claims territory. Its Māori name (ruru) echoes its two-part cry. In the tradition of the Māori people of New
        Zealand, the morepork, or ruru, was often seen as a careful guardian. A number of sayings referred to the bird's
        alertness. As a bird of the night, it was associated with the spirit world. Moreporks were believed to act as
        messengers to the gods in the heavens, flying along spiritual paths in the sky. They were the mediums used to
        communicate with the gods. The occasional high, piercing call of the morepork signified bad news, but the
        lower-pitched and more common “ruru” call heralded good news.</p>

      <div class="empty-space"></div>
    </section>

    <div id="divider"></div>

    <section class="pane" id="right">
      <h3>Questions</h3>

      <div class="group" id="q1-7-anchor">
        <h4>Questions 1–7</h4>
        <p>Do the following statements agree with the information in Reading Passage 1?</p>
        <p>In boxes 1–7 on your answer sheet, write:</p>
        <ul>
          <li><strong>TRUE</strong> if the statement agrees with the information</li>
          <li><strong>FALSE</strong> if the statement contradicts the information</li>
          <li><strong>NOT GIVEN</strong> if there is no information about this</li>
        </ul>

        <div class="question-item">
          <p><strong>1</strong> Early European settlers made detailed studies of the morepork.</p>
          <div class="radio-options">
            <label><input name="q1" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q1" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q1" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>2</strong> The Polynesian rat had a negative effect on the number of laughing owls.</p>
          <div class="radio-options">
            <label><input name="q2" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q2" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q2" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>3</strong> The laughing owl was larger than the morepork.</p>
          <div class="radio-options">
            <label><input name="q3" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q3" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q3" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>4</strong> Rats pose a risk to young moreporks.</p>
          <div class="radio-options">
            <label><input name="q4" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q4" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q4" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>5</strong> The New Zealand Department of Conservation is hoping to limit the population of
            moreporks.</p>
          <div class="radio-options">
            <label><input name="q5" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q5" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q5" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>6</strong> Other bird species are frightened away when they hear the morepork's cry.</p>
          <div class="radio-options">
            <label><input name="q6" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q6" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q6" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
        <div class="question-item">
          <p><strong>7</strong> In Māori tradition, the low call of the morepork had negative associations.</p>
          <div class="radio-options">
            <label><input name="q7" type="radio" value="TRUE"> TRUE</label>
            <label><input name="q7" type="radio" value="FALSE"> FALSE</label>
            <label><input name="q7" type="radio" value="NOT GIVEN"> NOT GIVEN</label>
          </div>
        </div>
      </div>

      <div class="group" id="q8-13-anchor">
        <h4>Questions 8–13</h4>
        <p>Complete the notes below.</p>
        <p>Choose <strong>ONE WORD AND/OR A NUMBER</strong> from the passage for each answer.</p>

        <div class="notes-completion">
          <h4>The Morepork</h4>
          <ul>
            <li>
              <strong>Appearance</strong>
              <ul>
                <li>approximately <strong>8</strong> <input type="text" id="q8_input"> in length</li>
                <li>feathers with fringes to enable quiet flight</li>
              </ul>
            </li>
            <li>
              <strong>Nesting</strong>
              <ul>
                <li>nests in trees, plants or spaces in roots and <strong>9</strong> <input type="text" id="q9_input">
                </li>
                <li>after about 35 days, baby moreporks are capable of leaving the nest</li>
              </ul>
            </li>
            <li>
              <strong>Hunting</strong>
              <ul>
                <li>transports its prey using its <strong>10</strong> <input type="text" id="q10_input"></li>
                <li>can be chased away by other birds during the <strong>11</strong> <input type="text" id="q11_input">
                </li>
                <li>attacked <strong>12</strong> <input type="text" id="q12_input"> that had been introduced to Motuora
                  Island</li>
              </ul>
            </li>
            <li>
              <strong>Threats</strong>
              <ul>
                <li>may be exposed to <strong>13</strong> <input type="text" id="q13_input"> in their prey</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div id="results"></div>
    </section>
  </div>

  <div class="practice-nav">
    <div class="title">Questions</div>
    <div class="questions">
      <div class="q-item" id="q1-nav" onclick="scrollToElement('q1-7-anchor')">1</div>
      <div class="q-item" id="q2-nav" onclick="scrollToElement('q1-7-anchor')">2</div>
      <div class="q-item" id="q3-nav" onclick="scrollToElement('q1-7-anchor')">3</div>
      <div class="q-item" id="q4-nav" onclick="scrollToElement('q1-7-anchor')">4</div>
      <div class="q-item" id="q5-nav" onclick="scrollToElement('q1-7-anchor')">5</div>
      <div class="q-item" id="q6-nav" onclick="scrollToElement('q1-7-anchor')">6</div>
      <div class="q-item" id="q7-nav" onclick="scrollToElement('q1-7-anchor')">7</div>
      <div class="q-item" id="q8-nav" onclick="scrollToElement('q8-13-anchor')">8</div>
      <div class="q-item" id="q9-nav" onclick="scrollToElement('q8-13-anchor')">9</div>
      <div class="q-item" id="q10-nav" onclick="scrollToElement('q8-13-anchor')">10</div>
      <div class="q-item" id="q11-nav" onclick="scrollToElement('q8-13-anchor')">11</div>
      <div class="q-item" id="q12-nav" onclick="scrollToElement('q8-13-anchor')">12</div>
      <div class="q-item" id="q13-nav" onclick="scrollToElement('q8-13-anchor')">13</div>
    </div>
    <div class="controls">
      <button id="submit-btn" class="primary">Submit</button>
      <button id="reset-btn">Reset</button>
      <button id="pause-btn">Pause</button>
    </div>
  </div>

  <div aria-label="Selection tools" id="selbar" role="toolbar">
    <button id="btnHL">Highlight</button>
    <button id="btnUH">Remove</button>
    <button id="btnNote">Note</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // --- Global State ---
      let settingsOpen = false, notesOpen = false;
      let timerRunning = true, seconds = 0, timer;
      let isResizing = false;
      let selbar = document.getElementById('selbar');
      let lastRange = null, currentHlNode = null, keepToolbar = false;

      const correctAnswers = {
        q1: 'NOT GIVEN', q2: 'FALSE', q3: 'TRUE', q4: 'TRUE', q5: 'FALSE', q6: 'NOT GIVEN', q7: 'FALSE',
        q8: '29 centimetres', q9: 'rocks', q10: 'bill', q11: 'day', q12: 'plovers', q13: 'poison'
      };

      // --- Core Functions ---
      function startTimer() {
        timer = setInterval(() => {
          if (timerRunning) {
            seconds++;
            const minutes = String(Math.floor(seconds / 60)).padStart(2, '0');
            const secs = String(seconds % 60).padStart(2, '0');
            document.getElementById('timer').textContent = `${minutes}:${secs}`;
          }
        }, 1000);
      }

      function closeAllPanels() {
        notesOpen = false; settingsOpen = false;
        document.getElementById('notes-panel').style.display = 'none';
        document.getElementById('settings-panel').style.display = 'none';
        document.querySelector('.overlay').style.display = 'none';
      }

      window.scrollToElement = function (id) {
        const element = document.getElementById(id);
        const pane = element.closest('.pane');
        if (element && pane) {
          const top = element.offsetTop - 20;
          pane.scrollTo({ top, behavior: 'smooth' });
        }
      }

      // --- Grading and State Update ---
      function updateAnsweredState() {
        for (let i = 1; i <= 13; i++) {
          const navItem = document.getElementById(`q${i}-nav`);
          if (navItem.classList.contains('correct') || navItem.classList.contains('incorrect')) continue;

          let answered = false;
          if (i <= 7) {
            answered = !!document.querySelector(`input[name="q${i}"]:checked`);
          } else {
            answered = document.getElementById(`q${i}_input`).value.trim() !== "";
          }
          navItem.classList.toggle('answered', answered);
        }
      }

      function gradeAnswers() {
        timerRunning = false;
        document.getElementById('pause-btn').textContent = 'Continue';
        let correctCount = 0;
        const totalQuestions = 13;
        let resultsHTML = '<h4>Results</h4><table class="results-table"><thead><tr><th>Question</th><th>Your Answer</th><th>Correct Answer</th><th>Result</th></tr></thead><tbody>';

        for (let i = 1; i <= 13; i++) {
          let userAnswer, isCorrect;
          const correctAnswer = correctAnswers[`q${i}`];
          const navItem = document.getElementById(`q${i}-nav`);

          if (i <= 7) {
            const userAnswerEl = document.querySelector(`input[name="q${i}"]:checked`);
            userAnswer = userAnswerEl ? userAnswerEl.value : 'No Answer';
          } else {
            const input = document.getElementById(`q${i}_input`);
            userAnswer = input.value.trim() || 'No Answer';
          }

          isCorrect = userAnswer.toLowerCase() === correctAnswer.toLowerCase();
          if (isCorrect) correctCount++;

          navItem.classList.remove('answered');
          navItem.classList.add(isCorrect ? 'correct' : 'incorrect');
          resultsHTML += `<tr><td>${i}</td><td>${userAnswer}</td><td>${correctAnswer}</td><td class="${isCorrect ? 'result-correct' : 'result-incorrect'}">${isCorrect ? '✓' : '✗'}</td></tr>`;
        }

        const score = Math.round((correctCount / totalQuestions) * 100);
        const summary = `<div style="font-weight:bold; margin-top:16px; font-size:1.1em;">Final Score: ${score}% (${correctCount}/${totalQuestions})</div>`;
        resultsHTML += `</tbody></table>`;

        document.getElementById('results').innerHTML = summary + resultsHTML;
        document.getElementById('results').style.display = 'block';
        scrollToElement('results');
      }

      function resetQuiz() {
        document.querySelectorAll('input[type="radio"]').forEach(el => el.checked = false);
        document.querySelectorAll('input[type="text"]').forEach(el => el.value = '');
        document.querySelectorAll('.q-item').forEach(item => item.className = 'q-item');
        const resultsDiv = document.getElementById('results');
        resultsDiv.style.display = 'none';
        resultsDiv.innerHTML = '';

        seconds = 0;
        document.getElementById('timer').textContent = '00:00';
        if (timer) clearInterval(timer);
        timerRunning = true;
        startTimer();
        document.getElementById('pause-btn').textContent = 'Pause';
        updateAnsweredState();
      }

      // --- Highlighter & Selection Toolbar ---
      function positionSelbarForRect(rect) {
        selbar.style.display = 'flex';
        requestAnimationFrame(() => {
          const top = window.scrollY + rect.top - selbar.offsetHeight - 8;
          const left = window.scrollX + rect.left + rect.width / 2 - selbar.offsetWidth / 2;
          selbar.style.top = `${(top > 0) ? top : (window.scrollY + rect.bottom + 8)}px`;
          selbar.style.left = `${Math.max(8, left)}px`;
        });
      }

      function updateSelbar() {
        const sel = window.getSelection();
        if (!sel || sel.rangeCount === 0 || sel.isCollapsed) {
          if (!keepToolbar && !currentHlNode) { selbar.style.display = 'none'; currentHlNode = null; }
          return;
        }
        const range = sel.getRangeAt(0);
        let container = range.commonAncestorContainer;
        if (container.nodeType === Node.TEXT_NODE) container = container.parentElement;

        // --- OPTIMIZATION START ---
        // Allow highlighting in both left and right panes
        const isInAllowedPane = document.getElementById('left').contains(container) || document.getElementById('right').contains(container);
        // --- OPTIMIZATION END ---

        const isHighlighted = container.classList?.contains('hl') || container.closest('.hl');
        if (!isInAllowedPane && !isHighlighted) { selbar.style.display = 'none'; return; }

        lastRange = range.cloneRange();
        currentHlNode = isHighlighted ? container.closest('.hl') : null;
        positionSelbarForRect(range.getBoundingClientRect());
      }

      function doHighlight() {
        if (currentHlNode || !lastRange || lastRange.collapsed) return;
        const sel = window.getSelection();
        try {
          const span = document.createElement('span');
          span.className = 'hl';
          lastRange.surroundContents(span);
        } catch (e) { console.error("Highlighting failed:", e); return; }
        sel?.removeAllRanges();
        selbar.style.display = 'none';
      }

      function removeHighlight() {
        const sel = window.getSelection();
        let targetNode = currentHlNode;
        if (!targetNode && lastRange) {
          const ancestor = lastRange.commonAncestorContainer;
          targetNode = ancestor.nodeType === Node.TEXT_NODE ? ancestor.parentElement.closest('.hl') : ancestor.closest('.hl');
        }
        if (targetNode) {
          const p = targetNode.parentNode;
          while (targetNode.firstChild) p.insertBefore(targetNode.firstChild, targetNode);
          if (p) p.removeChild(targetNode);
          p?.normalize();
        }
        currentHlNode = null; sel?.removeAllRanges(); selbar.style.display = 'none';
      }

      // --- Event Listeners Setup ---
      startTimer();

      // Header controls
      document.getElementById('size-btn').addEventListener('click', (e) => { e.stopPropagation(); settingsOpen = !settingsOpen; document.getElementById('settings-panel').style.display = settingsOpen ? 'block' : 'none'; });
      document.getElementById('color-btn').addEventListener('click', (e) => { e.stopPropagation(); settingsOpen = !settingsOpen; document.getElementById('settings-panel').style.display = settingsOpen ? 'block' : 'none'; });
      document.getElementById('note-btn').addEventListener('click', () => { closeAllPanels(); notesOpen = true; document.getElementById('notes-panel').style.display = 'flex'; document.querySelector('.overlay').style.display = 'block'; });
      document.querySelectorAll('.settings-option[data-size]').forEach(btn => btn.addEventListener('click', function () { document.documentElement.className = `font-${this.dataset.size}`; document.querySelectorAll('.settings-option[data-size]').forEach(b => b.classList.remove('active')); this.classList.add('active'); }));
      document.querySelectorAll('.settings-option[data-mode]').forEach(btn => btn.addEventListener('click', function () { document.body.classList.toggle('dark-mode', this.dataset.mode === 'dark'); document.querySelectorAll('.settings-option[data-mode]').forEach(b => b.classList.remove('active')); this.classList.add('active'); }));
      document.getElementById('close-note').addEventListener('click', closeAllPanels);
      document.querySelector('.overlay').addEventListener('click', closeAllPanels);
      document.addEventListener('click', (e) => {
        const settingsPanel = document.getElementById('settings-panel');
        const headerControls = document.querySelector('.header-controls');
        if (!settingsPanel.contains(e.target) && !headerControls.contains(e.target)) { settingsPanel.style.display = 'none'; settingsOpen = false; }
      });

      // Bottom nav controls
      document.getElementById('submit-btn').addEventListener('click', gradeAnswers);
      document.getElementById('reset-btn').addEventListener('click', resetQuiz);
      document.getElementById('pause-btn').addEventListener('click', function () { timerRunning = !timerRunning; this.textContent = timerRunning ? 'Pause' : 'Continue'; });

      // Pane resizing
      const divider = document.getElementById('divider');
      const leftPane = document.getElementById('left');
      divider.addEventListener('mousedown', (e) => { isResizing = true; document.body.style.cursor = 'ew-resize'; e.preventDefault(); });
      document.addEventListener('mousemove', (e) => { if (!isResizing) return; const shellRect = document.querySelector('.shell').getBoundingClientRect(); let leftWidth = (e.clientX - shellRect.left) / shellRect.width * 100; leftPane.style.width = `${Math.max(20, Math.min(80, leftWidth))}%`; });
      document.addEventListener('mouseup', () => { if (isResizing) { isResizing = false; document.body.style.cursor = ''; } });

      // Update answered state on input
      document.getElementById('right').addEventListener('change', updateAnsweredState);
      document.getElementById('right').addEventListener('input', updateAnsweredState);

      // Selection toolbar events
      document.addEventListener('mouseup', () => setTimeout(updateSelbar, 10));
      document.addEventListener('selectionchange', () => setTimeout(updateSelbar, 10));
      document.addEventListener('mousedown', (e) => { keepToolbar = !!e.target.closest('#selbar, .hl'); }, true);
      document.addEventListener('click', (e) => {
        const target = e.target;
        if (target.classList.contains('hl')) {
          currentHlNode = target; lastRange = null; positionSelbarForRect(target.getBoundingClientRect());
          window.getSelection()?.removeAllRanges(); setTimeout(() => { keepToolbar = false; }, 0);
        } else if (!selbar.contains(e.target)) { selbar.style.display = 'none'; currentHlNode = null; }
      }, true);
      document.getElementById('btnHL').addEventListener('click', doHighlight);
      document.getElementById('btnUH').addEventListener('click', removeHighlight);
      document.getElementById('btnNote').addEventListener('click', function () {
        let text = (currentHlNode ? currentHlNode.textContent : (lastRange ? lastRange.cloneContents().textContent : '')).trim();
        if (text) {
          const noteArea = document.querySelector('#notes-panel textarea');
          noteArea.value += (noteArea.value ? '\n\n' : '') + '> ' + text;
          closeAllPanels(); notesOpen = true; document.getElementById('notes-panel').style.display = 'flex';
          document.querySelector('.overlay').style.display = 'block'; noteArea.scrollTop = noteArea.scrollHeight;
        }
        selbar.style.display = 'none';
      });
    });
  </script>


  <!-- Practice page enhancer integration -->
  <script>
    /**
     * 练习页面增强器 - 修复版本
     * 解决无法正确收集题目正确率的问题
     */

    if (!window.practicePageEnhancer) {
      console.log('[PracticeEnhancer] 初始化增强器');

      window.practicePageEnhancer = {
        sessionId: null,
        parentWindow: null,
        answers: {},
        interactions: [],
        startTime: Date.now(),
        isInitialized: false,

        initialize: function () {
          if (this.isInitialized) return;
          console.log('[PracticeEnhancer] 开始初始化');
          this.setupCommunication();
          this.setupAnswerListeners();
          this.interceptSubmit();
          this.setupInteractionTracking();
          this.isInitialized = true;
          console.log('[PracticeEnhancer] 初始化完成');
        },

        setupCommunication: function () {
          this.parentWindow = window.opener || window.parent;
          if (!this.parentWindow || this.parentWindow === window) {
            console.warn('[PracticeEnhancer] 未检测到父窗口');
            return;
          }
          window.addEventListener('message', (event) => {
            if (event.data && event.data.type === 'INIT_SESSION') {
              this.sessionId = event.data.data.sessionId;
              console.log('[PracticeEnhancer] 收到会话初始化:', this.sessionId);
              this.sendMessage('SESSION_READY', {
                pageType: this.detectPageType(),
                url: window.location.href,
                title: document.title
              });
            }
          });
          console.log('[PracticeEnhancer] 通信设置完成');
        },

        detectPageType: function () {
          const title = document.title || '';
          const url = window.location.href || '';
          if (title.includes('P1') || url.includes('P1')) return 'P1';
          if (title.includes('P2') || url.includes('P2')) return 'P2';
          if (title.includes('P3') || url.includes('P3')) return 'P3';
          const pathParts = url.split('/');
          for (let part of pathParts) {
            if (part.match(/^P[123]$/i)) {
              return part.toUpperCase();
            }
          }
          return 'unknown';
        },

        setupAnswerListeners: function () {
          document.addEventListener('change', (e) => {
            if (e.target.name) {
              this.answers[e.target.name] = e.target.value;
              console.log('[PracticeEnhancer] 记录答案:', e.target.name, '=', e.target.value);
            }

            // 收集所有输入框答案
            if (e.target.type === 'text' && e.target.id) {
              this.answers[e.target.id] = e.target.value;
              console.log('[PracticeEnhancer] 记录文本答案:', e.target.id, '=', e.target.value);
            }
          });

          document.addEventListener('input', (e) => {
            // 实时收集文本输入
            if (e.target.type === 'text' && e.target.id) {
              this.answers[e.target.id] = e.target.value;
            }
          });

          document.addEventListener('drop', (e) => {
            setTimeout(() => {
              this.collectDropzoneAnswers();
            }, 100);
          });

          console.log('[PracticeEnhancer] 答案监听器设置完成');
        },

        collectDropzoneAnswers: function () {
          // 收集拖拽填空题答案
          document.querySelectorAll('.dropzone').forEach(zone => {
            const qName = zone.dataset.target;
            const card = zone.querySelector('.card');
            if (qName && card) {
              this.answers[qName] = card.dataset.value || card.textContent.trim();
            }
          });

          // 收集段落匹配题答案
          document.querySelectorAll('.paragraph-dropzone').forEach(zone => {
            const paragraph = zone.dataset.paragraph;
            const items = zone.querySelectorAll('.drag-item');
            if (paragraph && items.length > 0) {
              this.answers['q' + paragraph.toLowerCase()] = Array.from(items).map(item =>
                item.dataset.heading || item.textContent.trim()
              ).join(',');
            }
          });

          // 收集匹配题答案
          document.querySelectorAll('.match-dropzone').forEach(zone => {
            const qName = zone.dataset.question;
            const item = zone.querySelector('.drag-item-clone');
            if (qName && item) {
              this.answers[qName] = item.dataset.country || item.textContent.trim();
            }
          });
        },

        interceptSubmit: function () {
          // 延迟拦截，确保页面完全加载
          setTimeout(() => {
            // 拦截gradeAnswers函数
            if (typeof window.gradeAnswers === 'function') {
              const originalGradeAnswers = window.gradeAnswers;
              window.gradeAnswers = () => {
                console.log('[PracticeEnhancer] 拦截到gradeAnswers调用');
                this.collectAllAnswers();
                const result = originalGradeAnswers();
                setTimeout(() => this.handleSubmit(), 1000);
                return result;
              };
              console.log('[PracticeEnhancer] gradeAnswers函数拦截成功');
            } else {
              console.warn('[PracticeEnhancer] 未找到gradeAnswers函数');
            }

            // 拦截grade函数
            if (typeof window.grade === 'function') {
              const originalGrade = window.grade;
              window.grade = () => {
                console.log('[PracticeEnhancer] 拦截到grade调用');
                this.collectAllAnswers();
                const result = originalGrade();
                setTimeout(() => this.handleSubmit(), 1000);
                return result;
              };
              console.log('[PracticeEnhancer] grade函数拦截成功');
            }
          }.bind(this), 1000);

          // 监听表单提交
          document.addEventListener('submit', (e) => {
            console.log('[PracticeEnhancer] 拦截到表单提交');
            this.collectAllAnswers();
            setTimeout(() => this.handleSubmit(), 1000);
          });

          // 监听提交按钮点击 - 增强版
          document.addEventListener('click', (e) => {
            console.log('[PracticeEnhancer] 点击事件:', e.target.tagName, e.target.id, e.target.className);

            if (e.target.tagName === 'BUTTON' &&
              (e.target.textContent.includes('Submit') ||
                e.target.textContent.includes('提交') ||
                e.target.textContent.includes('完成') ||
                e.target.textContent.includes('Check') ||
                e.target.classList.contains('primary') ||
                e.target.id === 'submit-btn' ||
                (e.target.onclick && e.target.onclick.toString().includes('grade')))) {
              console.log('[PracticeEnhancer] 检测到提交按钮点击:', e.target);
              this.collectAllAnswers();
              setTimeout(() => this.handleSubmit(), 1500);
            }
          }.bind(this));

          // 定期检查结果是否出现
          this.startResultsMonitoring();

          console.log('[PracticeEnhancer] 提交拦截设置完成');
        },

        startResultsMonitoring: function () {
          let checkCount = 0;
          const maxChecks = 60; // 最多检查60次（30秒）

          const checkResults = () => {
            checkCount++;
            const resultsEl = document.getElementById('results');

            if (resultsEl && resultsEl.style.display !== 'none' && resultsEl.textContent.includes('Final Score')) {
              console.log('[PracticeEnhancer] 检测到结果显示，自动提取分数');
              this.collectAllAnswers();
              setTimeout(() => this.handleSubmit(), 500);
              return;
            }

            if (checkCount < maxChecks) {
              setTimeout(checkResults, 500);
            }
          }.bind(this);

        setTimeout(checkResults, 2000); // 2秒后开始检查
      },

        collectAllAnswers: function () {
          // 收集所有文本输入框答案
          document.querySelectorAll('input[type="text"]').forEach(input => {
            if (input.id && input.value.trim()) {
              this.answers[input.id] = input.value.trim();
            }
          });

          // 收集所有单选按钮答案
          document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
            if (radio.name) {
              this.answers[radio.name] = radio.value;
            }
          });

          // 收集拖拽答案
          this.collectDropzoneAnswers();

          console.log('[PracticeEnhancer] 收集到的所有答案:', this.answers);
        },

      setupInteractionTracking: function () {
        document.addEventListener('click', (e) => {
          this.interactions.push({
            type: 'click',
            target: e.target.tagName + (e.target.className ? '.' + e.target.className : ''),
            timestamp: Date.now()
          });
        });

        let scrollTimeout;
        document.addEventListener('scroll', () => {
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(() => {
            this.interactions.push({
              type: 'scroll',
              scrollY: window.scrollY,
              timestamp: Date.now()
            });
          }, 500);
        });
      },

      handleSubmit: function () {
        if (!this.sessionId) {
          console.warn('[PracticeEnhancer] 无会话ID，无法发送数据');
          return;
        }

        const endTime = Date.now();
        const duration = Math.round((endTime - this.startTime) / 1000);

        const results = {
          sessionId: this.sessionId,
          examId: this.sessionId.split('_')[0] || 'unknown',
          startTime: this.startTime,
          endTime: endTime,
          duration: duration,
          answers: this.answers,
          interactions: this.interactions,
          scoreInfo: this.extractScore(),
          pageType: this.detectPageType(),
          url: window.location.href,
          title: document.title
        };

        console.log('[PracticeEnhancer] 发送练习完成数据:', results);
        this.sendMessage('PRACTICE_COMPLETE', results);
      },

      extractScore: function () {
        const resultsEl = document.getElementById('results');
        if (!resultsEl) {
          console.warn('[PracticeEnhancer] 未找到结果元素');
          return null;
        }

        const text = resultsEl.textContent || '';
        console.log('[PracticeEnhancer] 结果文本:', text);

        // 匹配 "Final Score: 85% (11/13)" 格式 - 66号文件格式
        const finalScoreMatch = text.match(/Final\s+Score:\s*(\d+)%\s*\((\d+)\/(\d+)\)/i);
        if (finalScoreMatch) {
          const percentage = parseInt(finalScoreMatch[1]);
          const correct = parseInt(finalScoreMatch[2]);
          const total = parseInt(finalScoreMatch[3]);
          const accuracy = total > 0 ? correct / total : 0;

          console.log('[PracticeEnhancer] 提取Final Score成绩:', { correct, total, accuracy, percentage });

          return {
            correct: correct,
            total: total,
            accuracy: accuracy,
            percentage: percentage,
            source: 'final_score_extraction'
          };
        }

        // 匹配 "Score: 11/13" 格式
        const scoreMatch = text.match(/Score:\s*(\d+)\/(\d+)/i);
        if (scoreMatch) {
          const correct = parseInt(scoreMatch[1]);
          const total = parseInt(scoreMatch[2]);
          const accuracy = total > 0 ? correct / total : 0;
          const percentage = Math.round(accuracy * 100);

          console.log('[PracticeEnhancer] 提取Score成绩:', { correct, total, accuracy, percentage });

          return {
            correct: correct,
            total: total,
            accuracy: accuracy,
            percentage: percentage,
            source: 'score_extraction'
          };
        }

        // 匹配 "Accuracy: 85%" 格式
        const accuracyPercentMatch = text.match(/Accuracy:\s*(\d+)%/i);
        if (accuracyPercentMatch) {
          const percentage = parseInt(accuracyPercentMatch[1]);
          return {
            correct: 0,
            total: 0,
            accuracy: percentage / 100,
            percentage: percentage,
            source: 'accuracy_percentage_extraction'
          };
        }

        // 匹配单独的百分比 "85%" 格式
        const percentageMatch = text.match(/(\d+)%/);
        if (percentageMatch) {
          const percentage = parseInt(percentageMatch[1]);

          console.log('[PracticeEnhancer] 提取百分比成绩:', { percentage });

          return {
            correct: 0,
            total: 0,
            accuracy: percentage / 100,
            percentage: percentage,
            source: 'percentage_extraction'
          };
        }

        // 匹配 "Accuracy 85%" 格式（无冒号）
        const accuracyMatch = text.match(/Accuracy\s+(\d+)%/i);
        if (accuracyMatch) {
          const percentage = parseInt(accuracyMatch[1]);
          return {
            correct: 0,
            total: 0,
            accuracy: percentage / 100,
            percentage: percentage,
            source: 'accuracy_extraction'
          };
        }

        // 尝试从表格中提取成绩信息
        const correctCells = resultsEl.querySelectorAll('.result-correct');
        const incorrectCells = resultsEl.querySelectorAll('.result-incorrect');
        if (correctCells.length > 0 || incorrectCells.length > 0) {
          const correct = correctCells.length;
          const total = correctCells.length + incorrectCells.length;
          const accuracy = total > 0 ? correct / total : 0;
          const percentage = Math.round(accuracy * 100);

          console.log('[PracticeEnhancer] 从表格提取成绩:', { correct, total, accuracy, percentage });

          return {
            correct: correct,
            total: total,
            accuracy: accuracy,
            percentage: percentage,
            source: 'table_extraction'
          };
        }

        console.warn('[PracticeEnhancer] 无法提取成绩信息，结果文本:', text);
        return null;
      },

      sendMessage: function (type, data) {
        if (!this.parentWindow) {
          console.warn('[PracticeEnhancer] 无父窗口，无法发送消息');
          return;
        }

        const message = {
          type: type,
          data: data,
          source: 'practice_page',
          timestamp: Date.now()
        };

        try {
          this.parentWindow.postMessage(message, '*');
          console.log('[PracticeEnhancer] 消息已发送:', type);
        } catch (error) {
          console.error('[PracticeEnhancer] 发送消息失败:', error);
        }
      },

      getStatus: function () {
        return {
          isInitialized: this.isInitialized,
          sessionId: this.sessionId,
          hasParentWindow: !!this.parentWindow,
          answersCount: Object.keys(this.answers).length,
          interactionsCount: this.interactions.length,
          pageType: this.detectPageType()
        };
      }
    };

    // 自动初始化
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        window.practicePageEnhancer.initialize();
      });
    } else {
      window.practicePageEnhancer.initialize();
    }

    // 调试函数
    window.debugPracticeEnhancer = () => {
      console.log('=== 练习页面增强器调试信息 ===');
      console.log('状态:', window.practicePageEnhancer.getStatus());
      console.log('答案数据:', window.practicePageEnhancer.answers);
      console.log('交互记录:', window.practicePageEnhancer.interactions);

      // 测试成绩提取
      const scoreInfo = window.practicePageEnhancer.extractScore();
      console.log('成绩提取测试:', scoreInfo);
    };
}
  </script>\n
</body>

</html>