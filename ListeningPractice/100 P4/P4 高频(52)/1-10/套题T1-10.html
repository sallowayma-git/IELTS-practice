<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>T1-10 - Optimized</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  /* --- V2.0 Core Styles & Base --- */
  :root { --splitter-width: 5px; --splitter-color: #eaecef; }
  html, body { height: 100%; margin: 0; overflow: hidden; scroll-behavior: smooth; }
  body {
    background-color: #f1f3f4;
    font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
    font-size: 13pt; /* Default is now LARGE */
    font-weight: 400;
    color: #000;
    transition: background-color 0.3s, color 0.3s, font-size 0.2s;
    display: flex;
    flex-direction: column;
  }
  body.font-regular { font-size: 10pt; }
  body.font-xlarge { font-size: 16pt; }

  .app-wrapper { 
    display: flex; 
    flex-grow: 1;
    overflow: hidden;
  }

  .shell { background: #f6f7fb; display: flex; flex-direction: column; flex-grow: 1; min-width: 0; }
  h1, h2, h3, h4 { font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif; font-weight: 600; color: #2E74B5; }
  strong, b { font-weight: 600; }
  
  /* --- Layout & Panes --- */
  #main-shell { display: flex; flex-grow: 1; overflow: hidden; }
  #left-pane { flex: 1 1 100%; overflow-y: auto; background: #fff; transition: flex-basis 0.4s ease-in-out, background-color 0.3s; padding: 0 16px; box-sizing: border-box; }
  #splitter { width: var(--splitter-width); background: var(--splitter-color); cursor: col-resize; display: none; }
  #right-pane { flex: 0 0 0; overflow-y: auto; background: #fcfdff; display: none; padding: 0 24px; box-sizing: border-box; transition: background-color 0.3s; }
  
  #main-shell.split-view #left-pane { flex-basis: 60%; padding: 0 24px; }
  #main-shell.split-view #splitter { display: block; }
  #main-shell.split-view #right-pane { display: block; flex-basis: calc(40% - var(--splitter-width)); }

  .test-page, .transcript-page { display: none; }
  .test-page.active, .transcript-page.active { display: block; }

  #sticky-header { 
    position: relative;
    z-index: 10; 
    background: #fff; 
    padding: 16px;
    border-bottom: 1px solid #eaecef; 
    box-sizing: border-box;
    flex-shrink: 0;
  }
  .audio-player-wrapper { display: none; }
  .audio-player-wrapper.active { display: block; }
  .audio-player { display: flex; align-items: center; gap: 12px; width: 100%; }
  .play-pause-btn { background: #3b82f6; color: white; border: none; border-radius: 50%; width: 36px; height: 36px; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .progress-container { flex-grow: 1; }
  .progress-bar-wrapper { width: 100%; height: 8px; background-color: #e0e0e0; border-radius: 4px; cursor: pointer; }
  .progress-bar { width: 0; height: 100%; background-color: #3b82f6; border-radius: 4px; }
  .time-display { font-size: 0.9em; min-width: 90px; text-align: center; flex-shrink: 0; }
  .top-bar-button { height: 36px; padding: 0 12px; border: 1px solid #d1d5db; border-radius: 8px; background-color: #fff; color: #374151; cursor: pointer; font-size: 10pt; font-family: inherit; flex-shrink: 0; }

  /* --- Custom Select for Speed Control --- */
  .speed-control { position: relative; flex-shrink: 0; }
  .custom-select { appearance: none; -webkit-appearance: none; background-color: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; padding: 6px 30px 6px 12px; font-size: 1em; font-weight: 500; cursor: pointer; min-width: 90px; }
  .speed-control::after { content: '‚ñæ'; position: absolute; right: 12px; top: 50%; transform: translateY(-50%); pointer-events: none; font-size: 1.2em; color: #6b7280; }

  /* --- Bottom Bar & Buttons --- */
  .bottom-bar { position: fixed; left: 0; right: 0; bottom: 0; height: 64px; background: #fff; border-top: 1px solid #eaecef; box-shadow: 0 -6px 18px rgba(0,0,0,.06); display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 0 16px; z-index: 100; transition: background-color 0.3s; box-sizing: border-box; }
  .bb-left, .bb-center { display: flex; align-items: center; gap: 8px; }
  .pills { display: flex; gap: 10px; align-items: center; }
  .pill { padding: 6px 16px; border-radius: 18px; border: 1px solid #d1d5db; background: #f9fafb; color: #374151; font-size: 11pt; cursor: pointer; transition: all 0.2s ease; }
  .pill.active { background: #2E74B5; border-color: #2E74B5; color: #fff; font-weight: 600; }
  .bb-center button { height: 38px; padding: 0 16px; border: 1px solid #d1d5db; border-radius: 8px; background-color: #fff; color: #374151; cursor: pointer; font-size: 11pt; font-family: inherit; }
  .btn-primary { background-color: #2563eb !important; color: white !important; border-color: #2563eb !important; font-weight: 600; }
  button#clean-btn.has-save { background-color: #fee2e2 !important; color: #991b1b !important; border-color: #fecaca !important; font-weight: 600;}

  /* MODIFIED: Timer display styles */
  .timer-display-box { height: 36px; padding: 0 12px; border: 1px solid #d1d5db; border-radius: 8px; cursor: pointer; font-size: 13pt; font-family: inherit; display: flex; align-items: center; justify-content: center; min-width: 50px; transition: background-color 0.3s, border-color 0.3s; user-select: none; flex-shrink: 0; font-weight: 600; }
  .timer-paused { background-color: #fef2f2; border-color: #fecaca; }

  /* --- Question Styles --- */
  .test-page { text-align: left; padding-top: 20px; padding-bottom: 80px; }
  .group { border: 1px solid #eef0f6; border-radius: 12px; padding: 24px; margin: 0; }
  .test-title-container { border-bottom: 1px solid #BFBFBF; padding-bottom: 6px; margin-bottom: 16px; }
  .test-title { font-size: 1.2em; margin: 0; }
  .date-info { font-size: 0.85em; color: #6b7280; font-style: italic; margin-top: 4px; }
  .fill-in-question { margin-bottom: 12pt; line-height: 1.75; text-align: left; }
  .fill-in-question input[type="text"] { width: 200px; font-size: 1.1em; padding: 4px 6px; border: 1px solid #9ca3af; border-radius: 4px; margin: 0 8px; vertical-align: baseline; }
  input.error { border-color: #fca5a5 !important; background-color: #fef2f2 !important; }
  input.correct { border-color: #86efac !important; background-color: #f0fdf4 !important; }

  /* --- Transcript Styles --- */
  .transcript-page h4 { font-size: 1.2em; border-bottom: 1px solid #BFBFBF; padding-bottom: 6px; margin-top: 24pt; margin-bottom: 12pt; }
  .transcript-page ol { padding-left: 0; list-style: none; }
  .transcript-page li { display: grid; grid-template-columns: 30px auto; gap: 8px; align-items: start; }
  .transcript-page li:not(.translation) { margin-bottom: 0pt; }
  .transcript-page li.translation { margin-bottom: 8pt; }
  .transcript-page li .num { font-weight: bold; }
  .transcript-page li.translation .num { visibility: hidden; }

  /* --- Notes Panel & Highlighter --- */
  #notes-splitter { width: var(--splitter-width); background: var(--splitter-color); cursor: col-resize; display: none; }
  #notes { flex-basis: 0; display: none; flex-shrink: 0; width: auto; background: #fafbff; border-left: 1px solid #eaecef; flex-direction: column; overflow: hidden; }
  body.notes-open #notes { display: flex; flex-basis: 420px; }
  body.notes-open #notes-splitter { display: block; }
  .side-panel-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 16px; border-bottom: 1px solid #eaecef; background: #f8f9fa; flex-shrink: 0; }
  .side-panel-close { background: transparent; border: none; font-size: 24px; cursor: pointer; }
  #notes-list { overflow-y: auto; padding: 12px; flex-grow: 1; }
  .note-card { background: #fff; border-radius: 10px; padding: 12px; margin: 0 0 10px; border: 1px solid #e6e9f3; }
  .note-quote { background:#f6f8ff; border:1px solid #e5eafe; border-radius:8px; padding:8px 10px; margin: 6px 0 10px; font-size: 1rem; cursor: pointer; }
  .note-card textarea { width: 100%; min-height: 64px; border: 1px solid #e1e4ef; border-radius: 8px; padding: 8px; box-sizing: border-box; font-size: 16px; }
  .hl { background: #fff59d; }
  .hl-blue { background: #bae6fd; cursor: pointer; }
  
  #selbar { position: absolute; background: #fff; border: 1px solid #eaecef; border-radius: 8px; box-shadow: 0 8px 24px rgba(0,0,0,.12); padding: 6px; gap: 6px; display: inline-flex; z-index: 101; }
  #selbar[hidden] { display: none; }
  #selbar button { border: 1px solid #e1e4ef; border-radius: 6px; padding: 5px 10px; background: #fff; cursor: pointer; font-size: 0.9em; }

  #settings-panel { position: absolute; background: white; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 1px solid #e5e7eb; width: 200px; z-index: 101; padding: 6px; display: none; }
  #settings-panel.active { display: block; }
  .settings-section { padding: 6px; }
  .settings-section h5 { margin: 0 0 8px; font-size: 0.8em; color: #6b7280; font-weight: 600; text-transform: uppercase; }
  .settings-group button { width: 100%; background: #f3f4f6; border: 1px solid transparent; text-align: left; padding: 8px 12px; border-radius: 6px; cursor: pointer; margin-bottom: 4px; font-size: 1em; }
  .settings-group button.selected { background: #e0e7ff; color: #4338ca; font-weight: 600; border-color: #c7d2fe; }
  .settings-divider { border-top: 1px solid #e5e7eb; margin: 6px 0; }

  /* --- Enhanced Results & History --- */
  .results-in-page { margin-top: 30px; border-top: 2px solid #eef0f6; padding-top: 20px; }
  .results-container { max-width: 650px; margin: 0 auto; }
  .results-summary { font-size: 1.1em; font-weight: 600; margin-bottom: 16px; display: flex; justify-content: flex-start; gap: 3em; }
  .results-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.95em; }
  .results-table th, .results-table td { border: 1px solid #e1e4ef; padding: 8px 12px; text-align: left; }
  .results-table th { background: #f8f9fa; font-weight: 600; }
  .result-correct { color: #16a34a; font-weight: bold; }
  .result-incorrect { color: #dc2626; font-weight: bold; }
  .your-answer { font-style: italic; color: #4b5563; }
  .no-answer { color: #9ca3af; font-style: italic; }

  /* --- Dialogs & History Panel --- */
  .dialog-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); z-index: 200; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; }
  #confirm-dialog-overlay, #clean-history-dialog-overlay { z-index: 300; }
  .dialog-overlay.visible { opacity: 1; visibility: visible; }
  .dialog-box { background: white; padding: 24px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 400px; text-align: center; transform: scale(0.95); transition: transform 0.2s; }
  .dialog-overlay.visible .dialog-box { transform: scale(1); }
  .dialog-box p { margin: 0 0 20px; font-size: 1.1em; }
  .dialog-buttons { display: flex; gap: 12px; justify-content: center; }
  .dialog-buttons.vertical { flex-direction: column; }
  .dialog-buttons button { padding: 10px 20px; border-radius: 8px; font-size: 1em; cursor: pointer; border: 1px solid #d1d5db; }
  #confirm-dialog-yes { background-color: #2563eb; color: white; border-color: #2563eb; }
  #confirm-dialog-no { background-color: #fff; color: #374151; }
  #history-panel { max-width: 700px; width: 90%; max-height: 80vh; display: flex; flex-direction: column; text-align: left; }
  .history-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #eaecef; margin-bottom: 12px; }
  .history-header h3 { margin: 0; }
  .history-header .btn-clean { font-size: 10pt; height: 32px; padding: 0 12px; background-color: #fff; color: #2E74B5; border: 1px solid #d1d5db; font-weight: 600; }
  #history-list { overflow-y: auto; padding-right: 10px; }
  .history-item { border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 12px; }
  .history-summary { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #f9fafb; }
  .history-summary:hover { background: #f3f4f6; }
  .history-details { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background: #fff; }
  .history-details.visible { max-height: 500px; padding: 12px; border-top: 1px solid #e5e7eb;}
  .history-item-delete-btn { background: transparent; border: none; font-size: 24px; cursor: pointer; color: #ef4444; padding: 4px 8px; line-height: 1; }
  .mistake-table { width: 100%; margin-top: 10px; border-collapse: collapse; }
  .mistake-table th, .mistake-table td { border: 1px solid #e1e4ef; padding: 8px; text-align: left; }
  #clean-current-btn, #clean-all-btn { background-color: #fee2e2; color: #b91c1c; border-color: #fecaca; }
  #clean-cancel-btn { background-color: #f3f4f6; color: #6b7280; border-color: #e5e7eb; }
  
  /* --- Auto-hiding scrollbar styles --- */
  #left-pane::-webkit-scrollbar, #right-pane::-webkit-scrollbar, #notes-list::-webkit-scrollbar { width: 8px; }
  #left-pane::-webkit-scrollbar-track, #right-pane::-webkit-scrollbar-track, #notes-list::-webkit-scrollbar-track { background: transparent; }
  #left-pane::-webkit-scrollbar-thumb, #right-pane::-webkit-scrollbar-thumb, #notes-list::-webkit-scrollbar-thumb { background-color: transparent; border-radius: 4px; }
  #left-pane:hover::-webkit-scrollbar-thumb, #right-pane:hover::-webkit-scrollbar-thumb, #notes-list:hover::-webkit-scrollbar-thumb { background-color: #ccc; }
  .dark-mode #left-pane:hover::-webkit-scrollbar-thumb, .dark-mode #right-pane:hover::-webkit-scrollbar-thumb, .dark-mode #notes-list:hover::-webkit-scrollbar-thumb { background-color: #4b5563; }

  /* --- Dark Mode --- */
  body.dark-mode { background-color: #111827; color: #d1d5db; }
  .dark-mode .shell, .dark-mode #left-pane, .dark-mode #sticky-header, .dark-mode .bottom-bar, .dark-mode #right-pane, .dark-mode #notes, .dark-mode .note-card, .dark-mode #settings-panel, .dark-mode .results-table th, .dark-mode .dialog-box { background-color: #1f2937; color: #d1d5db; border-color: #374151; }
  .dark-mode h1, .dark-mode h2, .dark-mode h3, .dark-mode h4 { color: #93c5fd; }
  .dark-mode .pill { background: #374151; color: #d1d5db; border-color: #4b5563; }
  .dark-mode .pill.active { background: #60a5fa; border-color: #60a5fa; color: #111827; }
  .dark-mode input[type="text"] { background: #374151; border-color: #4b5563; color: #d1d5db; }
  .dark-mode input.error { background-color: #4b1924 !important; border-color: #991b1b !important; }
  .dark-mode input.correct { background-color: #163b2d !important; border-color: #14532d !important; }
  .dark-mode .note-quote { background: #374151; border-color: #4b5563; }
  .dark-mode button, .dark-mode .dialog-buttons button, .dark-mode .top-bar-button { background-color: #374151; border-color: #4b5563; color: #d1d5db;}
  .dark-mode .btn-primary { background-color: #3b82f6 !important; border-color: #3b82f6 !important; color: white !important;}
  .dark-mode button#clean-btn.has-save { background-color: #450a0a !important; color: #fee2e2 !important; border-color: #991b1b !important;}
  .dark-mode #confirm-dialog-yes { background-color: #3b82f6; border-color: #3b82f6;}
  .dark-mode #confirm-dialog-no { background-color: #4b5563; border-color: #5a6676;}
  .dark-mode .settings-group button { background: #374151; }
  .dark-mode .settings-group button.selected { background: #312e81; color: #e0e7ff; border-color: #4f46e5;}
  .dark-mode .custom-select { background-color: #374151; color: #d1d5db; border-color: #4b5563; }
  .dark-mode .speed-control::after { color: #9ca3af; }
  .dark-mode .your-answer { color: #9ca3af; }
  .dark-mode .timer-paused { background-color: #450a0a; border-color: #991b1b;}
  .dark-mode .history-summary { background: #1f2937; }
  .dark-mode .history-summary:hover { background: #374151; }
  .dark-mode .history-details { background: #111827; }
  .dark-mode .history-header .btn-clean { background-color: #374151; color: #93c5fd; border-color: #4b5563; }
  .dark-mode #clean-current-btn, .dark-mode #clean-all-btn { background-color: #450a0a; color: #fecaca; border-color: #991b1b; }
  .dark-mode #clean-cancel-btn { background-color: #374151; color: #9ca3af; border-color: #4b5563; }
</style>
</head>
<body class="font-large">
    <h1>T1-10 - Optimized</h1>

<div id="sticky-header">
  <div id="audio-player-container"></div>
</div>

<div class="app-wrapper">
  <div class="shell">
    <div id="main-shell">
      <div id="left-pane">
        <div id="test-pages-container"></div>
      </div>
      <div id="splitter"></div>
      <div id="right-pane">
        <div id="transcript-content"></div>
      </div>
    </div>
  </div>

  <div id="notes-splitter"></div>
  <div id="notes">
    <div class="side-panel-header"><span>My Notes</span><button id="notes-close" type="button" class="side-panel-close">&times;</button></div>
    <div id="notes-list"></div>
  </div>
</div>

<div class="bottom-bar">
  <div class="bb-left"><div id="part-pills" class="pills"></div></div>
  <div class="bb-center">
    <button id="submit-btn" class="btn-primary" type="button">Submit</button>
    <button id="reset-btn" type="button">Reset</button>
    <button id="submit-all-btn" class="btn-primary" type="button">Submit All</button>
    <button id="clean-btn" type="button">Clean</button>
    <button id="history-btn" type="button">History</button>
  </div>
</div>

<div id="selbar" hidden>
    <button data-act="hl">Highlight</button>
    <button data-act="note">Note</button>
    <button data-act="del">Clear</button>
</div>

<div id="settings-panel">
  <div class="settings-section">
    <h5>Font Size</h5>
    <div class="settings-group" id="font-size-group">
      <button data-size="regular">Regular</button>
      <button data-size="large" class="selected">Large</button>
      <button data-size="xlarge">Extra Large</button>
    </div>
  </div>
  <div class="settings-divider"></div>
  <div class="settings-section">
    <h5>Color Mode</h5>
    <div class="settings-group" id="color-mode-group">
      <button data-mode="light" class="selected">Black on White</button>
      <button data-mode="dark">White on Black</button>
    </div>
  </div>
</div>

<div id="confirm-dialog-overlay" class="dialog-overlay">
  <div id="confirm-dialog-box" class="dialog-box">
    <p id="confirm-dialog-msg"></p>
    <div class="dialog-buttons">
      <button id="confirm-dialog-no">Cancel</button>
      <button id="confirm-dialog-yes">Confirm</button>
    </div>
  </div>
</div>

<div id="history-panel-overlay" class="dialog-overlay">
  <div id="history-panel" class="dialog-box">
    <div class="history-header">
      <h3 id="history-title">History</h3>
      <button id="history-clean-btn" class="btn-clean">Clean</button>
    </div>
    <div id="history-list"></div>
  </div>
</div>

<div id="clean-history-dialog-overlay" class="dialog-overlay">
  <div id="clean-history-dialog-box" class="dialog-box">
    <p>Choose a cleanup option:</p>
    <div class="dialog-buttons vertical">
      <button id="clean-current-btn">Clear History for This Test</button>
      <button id="clean-all-btn">Clear All History</button>
      <button id="clean-cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<script>
(function() {
'use strict';

const __safeStorage = (() => {
    try {
        return window.localStorage;
    } catch (_) {
        return null;
    }
})();

const localStorage = {
    getItem(key) {
        if (!__safeStorage) return null;
        try { return __safeStorage.getItem(key); } catch (_) { return null; }
    },
    setItem(key, value) {
        if (!__safeStorage) return;
        try { __safeStorage.setItem(key, String(value)); } catch (_) {}
    },
    removeItem(key) {
        if (!__safeStorage) return;
        try { __safeStorage.removeItem(key); } catch (_) {}
    }
};

window.inputCache = {}; // ÂÖ®Â±ÄËæìÂÖ•ÁºìÂ≠ò
window.App = {  // Êö¥Èú≤Âà∞ÂÖ®Â±Ä‰ª•‰æøË∞ÉËØï
    state: { timerSecs: 0, timerInterval: null, paused: false, finishedSections: new Set(), confirmCallback: null, pageInitialized: new Set() },
    templates: { content: {} },
    answerKey: {},

    init() {
        this.populateContent(); 
        this.buildLayout(); 
        this.cacheElements(); 
        this.bindEvents(); 
        this.ensureSuiteButtonsForAll();
        this.loadGlobalState();
        this.startTimer(); 
        this.showPage(this.resolveInitialPageId(localStorage.getItem('lastActivePage'))); 
        this.AudioPlayer.init(); 
        this.Splitter.init(); 
        this.Splitter.initNotes();
        this.applySafeArea();
        // ÂÖ®Â±ÄÊèê‰∫§ÊåâÈíÆÁªëÂÆöÂà∞ÂΩìÂâçÊøÄÊ¥ªÂ•óÈ¢ò
        if (this.el.submitBtn) {
            this.el.submitBtn.addEventListener('click', () => this.submitCurrentSuite());
        }
    },
    resolveInitialPageId(preferredId) {
        const hasPreferred = preferredId && this.templates.content && this.templates.content[preferredId];
        return hasPreferred ? preferredId : this.getDefaultPageId();
    },
    getDefaultPageId() {
        const keys = Object.keys(this.templates.content || {});
        return keys.length ? keys[0] : 'page-test1';
    },
    ensureSuiteSubmitButton(pageId) {
        const suitePage = document.getElementById(pageId);
        if (!suitePage) return;
        // ÁßªÈô§È°µÈù¢ÂÜÖÁöÑÂàÜÈ¢òÊèê‰∫§ÊåâÈíÆÔºàÈò≤Ê≠¢ËØØÂØºÁî®Êà∑Ôºâ
        const existingContainer = suitePage.querySelector('.suite-submit-container');
        if (existingContainer) existingContainer.remove();
        // ‰∏çÂÜçÂàõÂª∫È°µÈù¢ÂÜÖÊåâÈíÆÔºåÂè™‰ΩøÁî®Â∫ïÈÉ®Ê†èÁöÑÂÖ®Â±Ä Submit ÊåâÈíÆ
    },
    ensureSuiteButtonsForAll() {
        (Object.keys(this.templates.content || {})).forEach(id => this.ensureSuiteSubmitButton(id));
    },
    cacheElements() {
        const $ = s => document.querySelector(s);
        this.el = { 
            body: $('body'), mainShell: $('#main-shell'), leftPane: $('#left-pane'), 
            allPanes: [$('#left-pane'), $('#right-pane'), $('#notes')], 
            submitBtn: $('#submit-btn'), resetBtn: $('#reset-btn'), 
            audioContainer: $('#audio-player-container'), pagesContainer: $('#test-pages-container'), 
            transcriptContainer: $('#transcript-content'), pillsContainer: $('#part-pills'), 
            bottomBar: $('.bottom-bar'),
            notes: $('#notes'), notesCloseBtn: $('#notes-close'), notesList: $('#notes-list'), 
            selbar: $('#selbar'), settingsPanel: $('#settings-panel'),
            submitAllBtn: $('#submit-all-btn'),
            cleanBtn: $('#clean-btn'),
            historyBtn: $('#history-btn'),
            confirmDialog: {
                overlay: $('#confirm-dialog-overlay'),
                msg: $('#confirm-dialog-msg'),
                yes: $('#confirm-dialog-yes'),
                no: $('#confirm-dialog-no')
            },
            historyPanel: {
                overlay: $('#history-panel-overlay'),
                title: $('#history-title'),
                list: $('#history-list'),
                cleanBtn: $('#history-clean-btn')
            },
            cleanHistoryDialog: {
                overlay: $('#clean-history-dialog-overlay'),
                cleanCurrentBtn: $('#clean-current-btn'),
                cleanAllBtn: $('#clean-all-btn'),
                cancelBtn: $('#clean-cancel-btn')
            }
        };
    },
    buildLayout() {
        const audioContainer = document.getElementById('audio-player-container'), pagesContainer = document.getElementById('test-pages-container'), transcriptContainer = document.getElementById('transcript-content'), pillsContainer = document.getElementById('part-pills');
        let audioHTML = '', pagesHTML = '', transcriptHTML = '', pillsHTML = '';
        for (const [id, data] of Object.entries(this.templates.content)) {
            const pageNum = id.replace('page-test', '');
            const suiteId = `set${pageNum}`;
            audioHTML += `<div class="audio-player-wrapper" id="audio-${id}"><div class="audio-player">
                <span class="timer-display-box" role="button">00:00</span>
                <button class="play-pause-btn">&#9658;</button>
                <div class="progress-container"><div class="progress-bar-wrapper"><div class="progress-bar"></div></div></div>
                <div class="time-display">00:00 / 00:00</div>
                <div class="speed-control"><select class="custom-select"><option value="0.5">0.5x</option><option value="0.75">0.75x</option><option value="0.9">0.9x</option><option value="1.0" selected>1.0x</option><option value="1.25">1.25x</option><option value="1.5">1.5x</option><option value="1.7">1.7x</option><option value="2.0">2.0x</option></select></div>
                <button data-action="toggle-settings" class="top-bar-button">Settings</button>
                <button data-action="toggle-notes" class="top-bar-button">Notes</button>
                <audio class="listening-audio" src="${data.audioSrc}" preload="metadata"></audio>
            </div></div>`;
            pagesHTML += `<div class="test-page" id="${id}" data-suite-id="${suiteId}">${data.questions}</div>`;
            transcriptHTML += `<div class="transcript-page" id="transcript-${id}"><h4>Transcript: T${pageNum} ${data.title}</h4><ol style="counter-reset: item-counter ${data.startNum - 1};">${data.transcript}</ol><p>&nbsp;</p><p>&nbsp;</p></div>`;
            pillsHTML += `<div class="pill" data-target="${id}">T${pageNum}</div>`;
        }
        audioContainer.innerHTML = audioHTML; pagesContainer.innerHTML = pagesHTML; transcriptContainer.innerHTML = transcriptHTML; pillsContainer.innerHTML = pillsHTML;
    },
    bindEvents() {
        // üîß ‰øÆÂ§çÈ°µÈù¢ÂàáÊç¢ËæìÂÖ•‰∏¢Â§±ÔºöÂÆåÂÖ®ÁªïËøáshowPageÔºåÁõ¥Êé•Â§ÑÁêÜpillÂàáÊç¢
        this.el.pillsContainer.addEventListener('click', e => { 
            if (!e.target.classList.contains('pill')) return;
            e.preventDefault();
            e.stopImmediatePropagation();
            
            // ‰øùÂ≠òÂΩìÂâçÈ°µËæìÂÖ•Âà∞ÁºìÂ≠ò
            const current = document.querySelector('.test-page.active');
            if (current) {
                window.inputCache[current.id] = [];
                current.querySelectorAll('input[type="text"]').forEach((input, i) => {
                    window.inputCache[current.id][i] = input.value;
                });
            }
            
            // Áõ¥Êé•ÂàáÊç¢È°µÈù¢ÊòæÁ§∫Áä∂ÊÄÅ
            const targetId = e.target.dataset.target;
            document.querySelectorAll('.test-page, .audio-player-wrapper, .transcript-page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
            
            document.getElementById(targetId).classList.add('active');
            document.getElementById(`audio-${targetId}`).classList.add('active');
            e.target.classList.add('active');
            
            // Êõ¥Êñ∞localStorageËÆ∞ÂΩï
            localStorage.setItem('lastActivePage', targetId);

            const testPrefix = `t${targetId.replace('page-test', '')}`;

            const isFinished = this.state.finishedSections.has(testPrefix);

            this.el.mainShell.classList.toggle('split-view', isFinished);

            if (isFinished) {

                document.getElementById(`transcript-${targetId}`)?.classList.add('active');

            }

            const activeAudioWrapper = document.getElementById(`audio-${targetId}`);

            this.el.activeTimer = activeAudioWrapper ? activeAudioWrapper.querySelector('.timer-display-box') : null;

            if (this.el.submitBtn) this.el.submitBtn.disabled = isFinished;
            
            // ÊÅ¢Â§çÁõÆÊ†áÈ°µËæìÂÖ•
            setTimeout(() => {
                if (window.inputCache[targetId]) {
                    document.getElementById(targetId).querySelectorAll('input[type="text"]').forEach((input, i) => {
                        if (window.inputCache[targetId][i]) {
                            input.value = window.inputCache[targetId][i];
                        }
                    });
                }
            }, 10);
        });
        // ‰ΩøÁî®‰∫ã‰ª∂ÂßîÊâòÁõëÂê¨Â•óÈ¢òÊèê‰∫§ÊåâÈíÆ
        this.el.pagesContainer.addEventListener('click', e => {
            const submitBtn = e.target.closest('[data-submit-suite]');
            if (submitBtn) {
                const suiteId = submitBtn.dataset.submitSuite;
                this.finishSuite(suiteId);
            }
        });
        this.el.resetBtn.addEventListener('click', () => { this.showConfirm('Á°ÆËÆ§ÈáçÁΩÆÂΩìÂâçÁªÉ‰π†ÂêóÔºüÊâÄÊúâËøõÂ∫¶Â∞Ü‰∏¢Â§±„ÄÇ', () => this.clearCurrentSectionState(true)); });
        
        this.el.audioContainer.addEventListener('click', e => {
            const target = e.target;
            if (target.classList.contains('timer-display-box')) this.togglePause();
            if (target.dataset.action === 'toggle-settings') {
                this.el.settingsPanel.classList.toggle('active');
                if(this.el.settingsPanel.classList.contains('active')) {
                    const rect = target.getBoundingClientRect();
                    this.el.settingsPanel.style.top = `${rect.bottom + 8}px`;
                    this.el.settingsPanel.style.right = `${window.innerWidth - rect.right}px`;
                    this.el.settingsPanel.style.left = 'auto';
                }
            }
            if (target.dataset.action === 'toggle-notes') this.notes.toggle();
        });

        document.addEventListener('click', e => {
            const settingsBtn = e.target.closest('[data-action="toggle-settings"]');
            if (!this.el.settingsPanel.contains(e.target) && !settingsBtn) {
                this.el.settingsPanel.classList.remove('active');
            }
        });

        this.el.settingsPanel.addEventListener('click', e => {
            const button = e.target.closest('button');
            if (!button) return;
            const size = button.dataset.size;
            const mode = button.dataset.mode;
            if (size) {
                this.el.body.classList.remove('font-regular', 'font-large', 'font-xlarge');
                this.el.body.classList.add(`font-${size}`);
                document.querySelectorAll('#font-size-group button').forEach(b => b.classList.remove('selected'));
                button.classList.add('selected');
            }
            if (mode) {
                this.el.body.classList.toggle('dark-mode', mode === 'dark');
                document.querySelectorAll('#color-mode-group button').forEach(b => b.classList.remove('selected'));
                button.classList.add('selected');
            }
        });

        this.el.notesCloseBtn.addEventListener('click', () => this.notes.toggle(false));
        document.addEventListener('mouseup', e => this.highlighter.handleMouseUp(e));
        this.el.selbar.addEventListener('click', e => this.highlighter.handleAction(e));
        
        this.el.notesList.addEventListener('click', e => {
            const delBtn = e.target.closest('button[data-act="del-note"]');
            if (delBtn) {
                const card = delBtn.closest('.note-card');
                if (card) {
                    const hid = card.dataset.hid;
                    if (hid) {
                        const elToUnwrap = document.querySelector(`span[data-hid="${hid}"]`);
                        if (elToUnwrap) App.highlighter.unWrap(elToUnwrap);
                    }
                    card.remove();
                }
                return; 
            }

            const card = e.target.closest('.note-card');
            if (card && e.target.closest('.note-quote')) {
                const hid = card.dataset.hid;
                if (hid) {
                    const targetHighlight = document.querySelector(`span[data-hid="${hid}"]`);
                    if (targetHighlight) {
                        targetHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        targetHighlight.style.transition = 'background-color 0.2s';
                        targetHighlight.style.backgroundColor = '#fecaca';
                        setTimeout(() => { targetHighlight.style.backgroundColor = ''; }, 1200);
                    }
                }
            }
        });
        
        window.addEventListener('resize', () => this.applySafeArea());
    
        const dialog = this.el.confirmDialog;
        dialog.yes.addEventListener('click', () => { if (this.state.confirmCallback) this.state.confirmCallback(); this.hideConfirm(); });
        dialog.no.addEventListener('click', () => this.hideConfirm());
        dialog.overlay.addEventListener('click', (e) => { if (e.target === dialog.overlay) this.hideConfirm(); });
        this.el.submitAllBtn.addEventListener('click', () => this.showConfirm('Á°ÆËÆ§Êèê‰∫§ÂÖ®ÈÉ®Â•óÈ¢òÂêó?', () => this.submitAllSuites()));
        this.el.cleanBtn.addEventListener('click', () => this.showConfirm('Á°ÆËÆ§Ê∏ÖÈô§ÂΩìÂâçÁªÉ‰π†ÁöÑÂ≠òÊ°£Âêó?', () => this.clearCurrentSectionState(false)));

        this.el.historyBtn.addEventListener('click', () => this.history.open());
        this.el.historyPanel.overlay.addEventListener('click', (e) => { if(e.target.id === 'history-panel-overlay') this.history.close(); });
        this.el.historyPanel.list.addEventListener('click', e => {
            const summary = e.target.closest('.history-summary');
            if (summary && !e.target.closest('.history-item-delete-btn')) {
                const details = summary.nextElementSibling;
                details.classList.toggle('visible');
            }
            const deleteBtn = e.target.closest('.history-item-delete-btn');
            if (deleteBtn) {
                const timestamp = deleteBtn.dataset.timestamp;
                this.showConfirm('Á°ÆËÆ§Âà†Èô§Ê≠§Êù°ÂéÜÂè≤ËÆ∞ÂΩïÂêó?', () => this.history.delete(timestamp));
            }
        });

        const cleanDialog = this.el.cleanHistoryDialog;
        this.el.historyPanel.cleanBtn.addEventListener('click', () => cleanDialog.overlay.classList.add('visible'));
        cleanDialog.cancelBtn.addEventListener('click', () => cleanDialog.overlay.classList.remove('visible'));
        cleanDialog.overlay.addEventListener('click', (e) => { if(e.target === cleanDialog.overlay) cleanDialog.overlay.classList.remove('visible'); });
        cleanDialog.cleanCurrentBtn.addEventListener('click', () => this.history.cleanCurrent());
        cleanDialog.cleanAllBtn.addEventListener('click', () => this.history.cleanAll());
    },
    showConfirm(message, onConfirm) {
        this.el.confirmDialog.msg.textContent = message;
        this.state.confirmCallback = onConfirm;
        this.el.confirmDialog.overlay.classList.add('visible');
    },
    hideConfirm() {
        this.el.confirmDialog.overlay.classList.remove('visible');
        this.state.confirmCallback = null;
    },
    loadGlobalState() {},



    clearCurrentSectionState(isResetButton) {
        const activePage = this.el.pagesContainer.querySelector('.test-page.active');
        if (!activePage) return;
        const pageId = activePage.id;
        const testPrefix = `t${pageId.replace('page-test', '')}`;
        
        // Ê∏ÖÁêÜÊâÄÊúâÁä∂ÊÄÅ
        this.state.finishedSections.delete(testPrefix);
        this.state.pageInitialized.delete(testPrefix);
        window.inputCache[pageId] = []; // Ê∏ÖÁêÜËæìÂÖ•ÁºìÂ≠ò

        const template = this.templates.content[pageId];
        if (template) {
            activePage.innerHTML = template.questions;
            const transcript = document.getElementById(`transcript-${pageId}`);
            if (transcript) {
                transcript.innerHTML = `<h4>Transcript: T${pageId.replace('page-test','')} ${template.title}</h4><ol style="counter-reset: item-counter ${template.startNum - 1};">${template.transcript}</ol><p>&nbsp;</p><p>&nbsp;</p>`;
            }
            this.el.notesList.innerHTML = '';
        }

        if (isResetButton) location.reload();
        else this.showPage(pageId);
    },

    showPage(pageId) {
        // ÁÆÄÂåñÁâàshowPageÔºö‰ªÖÁî®‰∫éÂàùÂßãÂåñÔºå‰∏çÂ§ÑÁêÜpillÂàáÊç¢
        const resolvedPageId = (this.templates.content && this.templates.content[pageId]) ? pageId : this.getDefaultPageId();
        if (!resolvedPageId) return;

        const testPrefix = `t${resolvedPageId.replace('page-test', '')}`;
        const testPage = document.getElementById(resolvedPageId);
        const transcriptPage = document.getElementById(`transcript-${resolvedPageId}`);
        if (!testPage || !transcriptPage) return;

        // Âè™Âú®È¶ñÊ¨°ÂàùÂßãÂåñÊó∂‰ªélocalStorageÊÅ¢Â§ç
        const savedStateJSON = null;
        if (!this.state.pageInitialized.has(testPrefix) && savedStateJSON) {
            try {
                const state = JSON.parse(savedStateJSON);
                testPage.innerHTML = state.pageHTML;
                transcriptPage.innerHTML = state.transcriptHTML;
                this.el.notesList.innerHTML = state.notesHTML;
                if (state.isFinished) this.state.finishedSections.add(testPrefix);
                else this.state.finishedSections.delete(testPrefix);
            } catch (error) {
                console.warn('ÊÅ¢Â§çÂ≠òÊ°£Â§±Ë¥•', error);
            }
        }
        this.state.pageInitialized.add(testPrefix);

        // ËÆæÁΩÆÂàùÂßãÊòæÁ§∫Áä∂ÊÄÅ
        document.querySelectorAll('.test-page, .audio-player-wrapper, .transcript-page').forEach(p => p.classList.remove('active'));
        testPage.classList.add('active');
        document.getElementById(`audio-${resolvedPageId}`)?.classList.add('active');
        document.querySelectorAll('.pill').forEach(p => p.classList.toggle('active', p.dataset.target === resolvedPageId));
        
        // ËÆæÁΩÆÂÆöÊó∂Âô®ÂºïÁî®
        const activeAudioWrapper = document.getElementById(`audio-${resolvedPageId}`);
        this.el.activeTimer = activeAudioWrapper?.querySelector('.timer-display-box') || null;
        
        localStorage.setItem('lastActivePage', resolvedPageId);
    },
    startTimer() {
        if (this.state.timerInterval) clearInterval(this.state.timerInterval);
        this.state.timerSecs = 0;
        const updateTimerDisplay = () => {
            if (!this.el.activeTimer) return;
            const m = String(Math.floor(this.state.timerSecs / 60)).padStart(2, '0');
            const s = String(this.state.timerSecs % 60).padStart(2, '0');
            this.el.activeTimer.textContent = `${m}:${s}`;
        };
        updateTimerDisplay();
        this.state.timerInterval = setInterval(() => { if (!this.state.paused) { this.state.timerSecs++; updateTimerDisplay(); } }, 1000);
    },
    togglePause() {
        if (!this.el.activeTimer) return;
        this.state.paused = !this.state.paused;
        this.el.activeTimer.classList.toggle('timer-paused', this.state.paused);
    },

    submitCurrentSuite() {
        const activePage = document.querySelector('.test-page.active');
        if (!activePage) return;
        const suiteId = activePage.dataset.suiteId;
        if (suiteId) this.finishSuite(suiteId);
    },

    submitAllSuites() {
        if (this.state && this.state.submittingAll) return;
        const suiteIds = Array.from(document.querySelectorAll('.test-page[data-suite-id]'))
            .map(page => page.dataset.suiteId)
            .filter(Boolean);

        if (!suiteIds.length) return;

        if (this.state) this.state.submittingAll = true;
        if (this.el && this.el.submitAllBtn) {
            this.el.submitAllBtn.disabled = true;
        }

        suiteIds.forEach(id => this.finishSuite(id));

        if (this.el && this.el.submitAllBtn) {
            this.el.submitAllBtn.disabled = false;
        }
        if (this.state) this.state.submittingAll = false;
    },

    finishSuite(suiteId) {
        // ÈÄöËøá suiteId ÊâæÂà∞ÂØπÂ∫îÁöÑ test-page
        const suitePage = document.querySelector(`[data-suite-id="${suiteId}"]`);
        if (!suitePage) return;
        
        const pageId = suitePage.id;
        const testPrefix = `t${pageId.replace('page-test', '')}`
        if (this.state.finishedSections.has(testPrefix)) return;
        
        let tableHTML = `<table class="results-table"><thead><tr><th>Q</th><th>Your Answer</th><th>Correct Answer</th><th>Result</th></tr></thead><tbody>`;
        const questionLabels = Array.from(suitePage.querySelectorAll('.fill-in-question b'));
        let processedInputs = new Set();
        const allAnswers = [];

        questionLabels.forEach(label => {
            const questionText = label.textContent.replace('.', '');
            const parentP = label.closest('.fill-in-question');
            const inputsForLabel = Array.from(parentP.querySelectorAll('input[type="text"]'));
            if (inputsForLabel.length === 0 || processedInputs.has(inputsForLabel[0])) return;
            
            let userAnswers = [], correctAnswers = [], isCorrectArray = [];
            
            inputsForLabel.forEach(input => {
                processedInputs.add(input);
                const userAnswer = input.value.trim();
                const correctAnswer = this.answerKey[input.name] || '';
                userAnswers.push(userAnswer);
                correctAnswers.push(correctAnswer);
                const isCorrect = userAnswer !== '' && (userAnswer.toLowerCase().replace(/[\s\$\-‚Ç¨¬£,\.]/g, '') === correctAnswer.toLowerCase().replace(/[\s\$\-‚Ç¨¬£,\.]/g, ''));
                
                input.classList.add(isCorrect ? 'correct' : 'error');
                isCorrectArray.push(isCorrect);
                input.disabled = true;
            });
            
            const isAllCorrectForLabel = isCorrectArray.every(Boolean);
            allAnswers.push({ q: questionText, user: userAnswers.join(' / '), correct: correctAnswers.join(' / '), isCorrect: isAllCorrectForLabel });

            const resultClass = isAllCorrectForLabel ? 'result-correct' : 'result-incorrect';
            const resultIcon = isAllCorrectForLabel ? '‚úì' : '‚úó';
            tableHTML += `<tr><td><b>${questionText}</b></td><td class="your-answer">${userAnswers.map(ua => ua || '<i class="no-answer">No Answer</i>').join(' / ')}</td><td>${correctAnswers.join(' / ')}</td><td class="${resultClass}">${resultIcon}</td></tr>`;
        });
        tableHTML += `</tbody></table>`;
        
        const totalQuestions = allAnswers.length;
        const correctQuestions = allAnswers.filter(a => a.isCorrect).length;
        const percentage = totalQuestions > 0 ? ((correctQuestions / totalQuestions) * 100).toFixed(0) : 0;
        
        const summaryHTML = `<div class="results-summary"><span>Score: ${correctQuestions} / ${totalQuestions}</span><span>Accuracy: ${percentage}%</span></div>`;
        const resultsContainer = suitePage.querySelector('.results-in-page');
        if(resultsContainer) {
            resultsContainer.innerHTML = `<div class="results-container">${summaryHTML}${tableHTML}</div>`;
            if (suitePage.classList.contains('active')) {
                setTimeout(() => {
                    resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        this.state.finishedSections.add(testPrefix);
        
        // Á¶ÅÁî®ËØ•Â•óÈ¢òÁöÑÊèê‰∫§ÊåâÈíÆ
        const submitBtn = suitePage.querySelector('[data-submit-suite]');
        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitted';
            submitBtn.style.opacity = '0.6';
            submitBtn.style.cursor = 'not-allowed';
        }

        const isActiveSuite = suitePage.classList.contains('active');
        if (isActiveSuite) {
            this.el.mainShell.classList.add('split-view');
            document.querySelectorAll('.transcript-page').forEach(p => p.classList.remove('active'));
            document.getElementById(`transcript-${pageId}`)?.classList.add('active');
            if (this.el.submitBtn) this.el.submitBtn.disabled = true;
        }
        
        this.history.add(testPrefix, { score: correctQuestions, total: totalQuestions, accuracy: percentage, answers: allAnswers });
        
        // Ê£ÄÊü•ÊòØÂê¶ÊâÄÊúâÂ•óÈ¢òÈÉΩÂ∑≤ÂÆåÊàê
        this.checkAllSuitesCompleted();
    },
    checkAllSuitesCompleted() {
        const total = Object.keys(this.templates.content || {}).length;
        if (total && this.state.finishedSections.size >= total) {
            console.log('[PracticePage] ÊâÄÊúâÂ•óÈ¢òÂ∑≤Êèê‰∫§');
        }
    },
    applySafeArea() {
        // The spacer div in the HTML is a more robust solution for the bottom bar issue.
        // This function can be kept for future safe-area implementations (e.g., iPhone notches).
    },
    notes: {
        toggle(forceOpen) {
            const shouldOpen = forceOpen === undefined ? !document.body.classList.contains('notes-open') : forceOpen;
            document.body.classList.toggle('notes-open', shouldOpen);
        },
        create(targetSpan) { if (!targetSpan) return; const hid = targetSpan.dataset.hid || `h_${Date.now()}`; targetSpan.dataset.hid = hid; const existed = App.el.notesList.querySelector(`.note-card[data-hid="${hid}"]`); if (existed) { this.toggle(true); existed.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); return; } const text = (targetSpan.textContent || '').trim(); const card = document.createElement('div'); card.className = 'note-card'; card.dataset.hid = hid; card.innerHTML = `<div class="note-quote">${text || '(empty)'}</div><textarea placeholder="..."></textarea><div class="note-actions"><button type="button" data-act="del-note">Delete</button></div>`; App.el.notesList.prepend(card); this.toggle(true); }
    },
    highlighter: {
        unWrap(el) { if (el && el.parentNode) { const p = el.parentNode; while (el.firstChild) p.insertBefore(el.firstChild, el); p.removeChild(el); p.normalize(); } }, hideSelbar() { if (App.el && App.el.selbar) App.el.selbar.hidden = true; }, positionToolbar(rect, w) { let left = rect.left + rect.width / 2 - w / 2; App.el.selbar.style.left = `${window.scrollX + left}px`; App.el.selbar.style.top = `${window.scrollY + rect.top}px`; App.el.selbar.style.transform = 'translateY(-100%) translateY(-8px)'; },
        handleMouseUp(e) { if (e.target.closest('#selbar, #notes, .bottom-bar, #settings-panel, .dialog-overlay, #history-panel-overlay')) return; const clickedHl = e.target.closest('.hl,.hl-blue'); const s = window.getSelection(); App.el.selbar.targetElement = null; if (clickedHl && s.isCollapsed) { s.removeAllRanges(); App.el.selbar.querySelector('[data-act="hl"]').hidden = true; App.el.selbar.querySelector('[data-act="note"]').hidden = false; App.el.selbar.querySelector('[data-act="del"]').hidden = false; App.el.selbar.hidden = false; this.positionToolbar(clickedHl.getBoundingClientRect(), App.el.selbar.offsetWidth); App.el.selbar.targetElement = clickedHl; } else if (s && !s.isCollapsed) { const r = s.getRangeAt(0); if (!r.toString().trim()) return; const rect = r.getBoundingClientRect(); if (!rect || (!rect.width && !rect.height)) return this.hideSelbar(); App.el.selbar.querySelector('[data-act="hl"]').hidden = false; App.el.selbar.querySelector('[data-act="note"]').hidden = false; App.el.selbar.querySelector('[data-act="del"]').hidden = true; App.el.selbar.hidden = false; this.positionToolbar(rect, App.el.selbar.offsetWidth); } else { this.hideSelbar(); } },
        handleAction(e) {
            const act = e.target.closest('button')?.dataset.act;
            if (!act) return;
            if (act === 'hl' || act === 'note') {
                const s = window.getSelection();
                if (!s || s.isCollapsed) return;
                const r = s.getRangeAt(0);
                const span = document.createElement('span');
                span.className = act === 'hl' ? 'hl' : 'hl-blue';
                try { r.surroundContents(span); } catch { span.appendChild(r.extractContents()); r.insertNode(span); }
                if (act === 'note') { span.dataset.hid = `h_${Date.now()}`; App.notes.create(span); }
                if (window.getSelection) { window.getSelection().removeAllRanges(); } else if (document.selection) { document.selection.empty(); }
            } else if (act === 'del' && App.el.selbar.targetElement) { this.unWrap(App.el.selbar.targetElement); }
            this.hideSelbar();
        }
    },
    AudioPlayer: {
        init() {
            document.getElementById('audio-player-container').addEventListener('click', e => {
                const playerWrapper = e.target.closest('.audio-player-wrapper');
                if (!playerWrapper) return;
                const audio = playerWrapper.querySelector('.listening-audio');
                if (e.target.classList.contains('play-pause-btn')) {
                    document.querySelectorAll('.listening-audio').forEach(a => { if(a !== audio) a.pause(); });
                    audio.paused ? audio.play() : audio.pause();
                } else if (e.target.closest('.progress-bar-wrapper')) {
                     if(audio.duration) {
                        const pCont = playerWrapper.querySelector('.progress-bar-wrapper');
                        const rect = pCont.getBoundingClientRect();
                        audio.currentTime = ((e.clientX - rect.left) / rect.width) * audio.duration;
                    }
                }
            });
            document.getElementById('audio-player-container').addEventListener('change', e => {
                const playerWrapper = e.target.closest('.audio-player-wrapper');
                if (!playerWrapper || !e.target.classList.contains('custom-select')) return;
                const audio = playerWrapper.querySelector('.listening-audio');
                audio.playbackRate = parseFloat(e.target.value);
            });
            const format = t => { if(isNaN(t)) return "00:00"; const m=Math.floor(t/60),s=Math.floor(t%60); return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; };
            const updateAudioUI = (audio) => {
                const playerWrapper = audio.closest('.audio-player-wrapper');
                if (!playerWrapper) return;
                const progress = playerWrapper.querySelector('.progress-bar');
                const time = playerWrapper.querySelector('.time-display');
                const btn = playerWrapper.querySelector('.play-pause-btn');
                if(audio.duration) {
                    progress.style.width = `${(audio.currentTime/audio.duration)*100}%`;
                    time.textContent = `${format(audio.currentTime)} / ${format(audio.duration)}`;
                }
                btn.innerHTML = audio.paused ? '&#9658;' : '&#10074;&#10074;';
            };
            
            setInterval(() => {
                const activeAudio = document.querySelector('.audio-player-wrapper.active .listening-audio');
                if (activeAudio) updateAudioUI(activeAudio);
            }, 500);
        }
    },
    Splitter: {
        init() { const splitter = document.getElementById('splitter'), left = document.getElementById('left-pane'), right = document.getElementById('right-pane'); let drag = false; splitter.addEventListener('mousedown', () => { drag = true; document.body.style.cursor = 'col-resize'; document.body.style.userSelect = 'none'; }); window.addEventListener('mouseup', () => { drag = false; document.body.style.cursor = 'default'; document.body.style.userSelect = 'auto'; }); window.addEventListener('mousemove', e => { if (!drag) return; const total = left.parentElement.offsetWidth, newLeft = e.clientX, newRight = total - newLeft - splitter.offsetWidth; if (newLeft > 200 && newRight > 200) { left.style.flexBasis = `${newLeft}px`; right.style.flexBasis = `${newRight}px`; } }); },
        initNotes() { const splitter = document.getElementById('notes-splitter'), shell = document.querySelector('.shell'), notes = document.getElementById('notes'); let drag = false; splitter.addEventListener('mousedown', () => { drag = true; document.body.style.cursor = 'col-resize'; document.body.style.userSelect = 'none'; }); window.addEventListener('mouseup', () => { drag = false; document.body.style.cursor = 'default'; document.body.style.userSelect = 'auto'; }); window.addEventListener('mousemove', e => { if (!drag) return; const total = document.querySelector('.app-wrapper').offsetWidth; const newNotesWidth = total - e.clientX; if (newNotesWidth > 200 && newNotesWidth < total - 300) { notes.style.flexBasis = `${newNotesWidth}px`; } }); }
    },
    history: {
        getTestPrefix() {
            const activePage = document.querySelector('.test-page.active');
            if (!activePage) return null;
            return `t${activePage.id.replace('page-test', '')}`;
        },
        load(testPrefix) { const data = localStorage.getItem(`ieltsHistory-${testPrefix}`); return data ? JSON.parse(data) : []; },
        save(testPrefix, historyData) { localStorage.setItem(`ieltsHistory-${testPrefix}`, JSON.stringify(historyData)); },
        add(testPrefix, result) { const historyData = this.load(testPrefix); const entry = { timestamp: Date.now(), ...result }; historyData.unshift(entry); this.save(testPrefix, historyData); },
        delete(timestamp) {
            const testPrefix = this.getTestPrefix();
            if (!testPrefix || !timestamp) return;
            let historyData = this.load(testPrefix);
            historyData = historyData.filter(item => item.timestamp !== parseInt(timestamp));
            this.save(testPrefix, historyData);
            this.open();
        },
        open() {
            const testPrefix = this.getTestPrefix();
            if (!testPrefix) return;
            const historyData = this.load(testPrefix);
            const listEl = App.el.historyPanel.list;
            App.el.historyPanel.title.textContent = `History for T${testPrefix.replace('t','')}`;
            listEl.innerHTML = '';
            if (historyData.length === 0) {
                listEl.innerHTML = '<p style="text-align: center; color: #6b7280;">No history for this test yet.</p>';
            } else {
                historyData.forEach(item => {
                    const date = new Date(item.timestamp).toLocaleString();
                    const answersHTML = `<table class="mistake-table">
                        <thead><tr><th>Q</th><th>Your Answer</th><th>Correct Answer</th></tr></thead>
                        <tbody>
                            ${(item.answers || []).map(ans => `
                                <tr>
                                    <td><b>${ans.q}</b></td>
                                    <td class="${ans.isCorrect ? 'result-correct' : 'result-incorrect'}">${ans.user || '<i>empty</i>'}</td>
                                    <td>${ans.correct}</td>
                                </tr>`).join('')}
                        </tbody>
                    </table>`;
                    listEl.innerHTML += `<div class="history-item"><div class="history-summary"><div><strong>${date}</strong><br><span>Score: ${item.score}/${item.total} (${item.accuracy}%)</span></div><button class="history-item-delete-btn" data-timestamp="${item.timestamp}">&times;</button></div><div class="history-details">${answersHTML}</div></div>`;
                });
            }
            App.el.historyPanel.overlay.classList.add('visible');
        },
        close() { App.el.historyPanel.overlay.classList.remove('visible'); },
        cleanCurrent() {
            const testPrefix = this.getTestPrefix();
            if (!testPrefix) return;
            this.save(testPrefix, []);
            this.open();
            App.el.cleanHistoryDialog.overlay.classList.remove('visible');
        },
        cleanAll() {
            for (let i = 1; i <= 10; i++) {
                localStorage.removeItem(`ieltsHistory-t${i}`);
            }
            this.open(); // Refresh current view
            App.el.cleanHistoryDialog.overlay.classList.remove('visible');
        }
    },
    
    populateContent() {
        this.templates.content = {
          'page-test1':{title:'Football in the UK', startNum:33, dates:'(2017.4.10/2012.1.12/2010.4.10)', audioSrc:'./part4.1.Football in the UK.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T1: Football in the UK</h4><p class="date-info">(2017.4.10/2012.1.12/2010.4.10)</p></div><p class="fill-in-question"><b>33.</b> At present the main reason why UK schools push football education is the pressure from <input type="text" name="t1_q1"></p><p class="fill-in-question"><b>34.</b> Prior to the 19th century, football players used different <input type="text" name="t1_q2"> of rules.</p><p class="fill-in-question"><b>35.</b> People attempted to standardise the rules from the whole <input type="text" name="t1_q3">, known as the 'Cambridge Rules' in 1848.</p><p class="fill-in-question"><b>36.</b> Attendances were increasing due to the improvement of infrastructure and the <input type="text" name="t1_q4"> system.</p><p class="fill-in-question"><b>37.</b> Football become popular and it is regarded as a <input type="text" name="t1_q5"> event.</p><p class="fill-in-question"><b>38.</b> The football clubs were responsible for most of the <input type="text" name="t1_q6"> and development for the football association.</p><p class="fill-in-question"><b>39.</b> <input type="text" name="t1_q7"> against other teams were also organised by the football clubs.</p><p class="fill-in-question"><b>40.</b> In 1910s, <input type="text" name="t1_q8"> football players were approved of in the game.</p></div><div class="results-in-page" id="results-page-test1"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">33.</span><span>At present the main reason why UK schools push football education is the pressure from <strong>parents</strong>.</span></li><li class="translation"><span></span><span>ÁõÆÂâçËã±ÂõΩÂ≠¶Ê†°Êé®ÂπøË∂≥ÁêÉÊïôËÇ≤ÁöÑ‰∏ªË¶ÅÂéüÂõ†ÊòØÊù•Ëá™ÂÆ∂ÈïøÁöÑÂéãÂäõ„ÄÇ</span></li><li><span class="num">34.</span><span>Prior to the 19th century, football players used different <strong>versions</strong> of rules.</span></li><li class="translation"><span></span><span>Âú®19‰∏ñÁ∫™‰πãÂâçÔºåË∂≥ÁêÉËøêÂä®Âëò‰ΩøÁî®‰∏çÂêåÁâàÊú¨ÁöÑËßÑÂàô„ÄÇ</span></li><li><span class="num">35.</span><span>People attempted to standardise the rules from the whole <strong>country</strong>, known as the 'Cambridge Rules' in 1848.</span></li><li class="translation"><span></span><span>‰∫∫‰ª¨ËØïÂõæÂ∞ÜÊù•Ëá™ÂÖ®ÂõΩÁöÑËßÑÂàôÊ†áÂáÜÂåñÔºåÂç≥1848Âπ¥ÁöÑ‚ÄúÂâëÊ°•ËßÑÂàô‚Äù„ÄÇ</span></li><li><span class="num">36.</span><span>Attendances were increasing due to the improvement of infrastructure and the <strong>transport</strong> system.</span></li><li class="translation"><span></span><span>Áî±‰∫éÂü∫Á°ÄËÆæÊñΩÂíå‰∫§ÈÄöÁ≥ªÁªüÁöÑÊîπÂñÑÔºåËßÇ‰ºó‰∫∫Êï∞‰∏çÊñ≠Â¢ûÂä†„ÄÇ</span></li><li><span class="num">37.</span><span>Football become popular and it is regarded as a <strong>social</strong> event.</span></li><li class="translation"><span></span><span>Ë∂≥ÁêÉÂèòÂæóÊµÅË°åÔºåÂπ∂Ë¢´ËßÜ‰∏∫‰∏ÄÁßçÁ§æ‰∫§Ê¥ªÂä®„ÄÇ</span></li><li><span class="num">38.</span><span>The football clubs were responsible for most of the <strong>funding</strong> and development for the football association.</span></li><li class="translation"><span></span><span>Ë∂≥ÁêÉ‰ø±‰πêÈÉ®Ë¥üË¥£Ë∂≥ÁêÉÂçè‰ºöÂ§ßÈÉ®ÂàÜÁöÑËµÑÈáëÂíåÂèëÂ±ï„ÄÇ</span></li><li><span class="num">39.</span><span><strong>competitions</strong> against other teams were also organised by the football clubs.</span></li><li class="translation"><span></span><span>‰∏éÂÖ∂‰ªñÁêÉÈòüÁöÑÊØîËµõ‰πüÊòØÁî±Ë∂≥ÁêÉ‰ø±‰πêÈÉ®ÁªÑÁªáÁöÑ„ÄÇ</span></li><li><span class="num">40.</span><span>In 1910s, <strong>professional</strong> football players were approved of in the game.</span></li><li class="translation"><span></span><span>Âú®1910Âπ¥‰ª£ÔºåËÅå‰∏öË∂≥ÁêÉËøêÂä®ÂëòÂú®ÊØîËµõ‰∏≠ÂæóÂà∞‰∫ÜËÆ§ÂèØ„ÄÇ</span></li>`},
          'page-test2':{title:'Solar Power Purifier', startNum:31, dates:'(2017.9.21/2016.1.9/2011.2.19)', audioSrc:'./part4.2.Solar Power Purifier.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T2: Solar Power Purifier</h4><p class="date-info">(2017.9.21/2016.1.9/2011.2.19)</p></div><p class="fill-in-question"><b>31.</b> Sea water has high level in <input type="text" name="t2_q1"> so that we cannot drink such water.</p><p class="fill-in-question"><b>32.</b> Water that is purified through solar can be used in <input type="text" name="t2_q2"></p><p class="fill-in-question"><b>33.</b> Although SW40 can purify sea water, it is too <input type="text" name="t2_q3"></p><p class="fill-in-question"><b>34.</b> The promotion of such equipment got financial support from the organization: Health <input type="text" name="t2_q4"></p><p class="fill-in-question"><b>35.</b> The maximum water can be flick in a day: 9 <input type="text" name="t2_q5"></p><p class="fill-in-question"><b>36.</b> Water that is purified by the machine is enough for a <input type="text" name="t2_q6"></p><p class="fill-in-question"><b>37.</b> The cover is made of <input type="text" name="t2_q7"></p><p class="fill-in-question"><b>38.</b> The UV destroys <input type="text" name="t2_q8"></p><p class="fill-in-question"><b>39.</b> The intersection angle is <input type="text" name="t2_q9"> between SW40 and horizontal plane</p><p class="fill-in-question"><b>40.</b> <input type="text" name="t2_q10"> for containing water</p></div><div class="results-in-page" id="results-page-test2"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>Sea water has high level in <strong>salts</strong> so that we cannot drink such water.</span></li><li class="translation"><span></span><span>Êµ∑Ê∞¥‰∏≠ÁöÑÁõêÂàÜÂê´ÈáèÂæàÈ´òÔºåÊâÄ‰ª•Êàë‰ª¨‰∏çËÉΩÂñù„ÄÇ</span></li><li><span class="num">32.</span><span>Water that is purified through solar can be used in <strong>hospitals</strong>.</span></li><li class="translation"><span></span><span>ÈÄöËøáÂ§™Èò≥ËÉΩÂáÄÂåñÁöÑÊ∞¥ÂèØ‰ª•Áî®Âú®ÂåªÈô¢„ÄÇ</span></li><li><span class="num">33.</span><span>Although SW40 can purify sea water, it is too <strong>slow</strong>.</span></li><li class="translation"><span></span><span>ËôΩÁÑ∂SW40ÂèØ‰ª•ÂáÄÂåñÊµ∑Ê∞¥Ôºå‰ΩÜÈÄüÂ∫¶Â§™ÊÖ¢‰∫Ü„ÄÇ</span></li><li><span class="num">34.</span><span>The promotion of such equipment got financial support from the organization: Health <strong>International</strong>.</span></li><li class="translation"><span></span><span>ËøôÁßçËÆæÂ§áÁöÑÊé®ÂπøÂæóÂà∞‰∫Ü‚ÄúÂõΩÈôÖÂÅ•Â∫∑‚ÄùÁªÑÁªáÁöÑËµÑÈáëÊîØÊåÅ„ÄÇ</span></li><li><span class="num">35.</span><span>The maximum water can be flick in a day: 9 <strong>liters</strong>.</span></li><li class="translation"><span></span><span>‰∏ÄÂ§©ÊúÄÂ§öÂèØ‰ª•Â§ÑÁêÜ9ÂçáÊ∞¥„ÄÇ</span></li><li><span class="num">36.</span><span>Water that is purified by the machine is enough for a <strong>family</strong>.</span></li><li class="translation"><span></span><span>ËøôÂè∞Êú∫Âô®ÂáÄÂåñÁöÑÊ∞¥Ë∂≥Â§ü‰∏Ä‰∏™ÂÆ∂Â∫≠‰ΩøÁî®„ÄÇ</span></li><li><span class="num">37.</span><span>The cover is made of <strong>glass</strong>.</span></li><li class="translation"><span></span><span>ÁõñÂ≠êÊòØÁéªÁíÉÂÅöÁöÑ„ÄÇ</span></li><li><span class="num">38.</span><span>The UV destroys <strong>germs</strong>.</span></li><li class="translation"><span></span><span>Á¥´Â§ñÁ∫øÂèØ‰ª•Ê∂àÁÅ≠ÁªÜËèå„ÄÇ</span></li><li><span class="num">39.</span><span>The intersection angle is <strong>12.5</strong> between SW40 and horizontal plane.</span></li><li class="translation"><span></span><span>SW40‰∏éÊ∞¥Âπ≥Èù¢‰πãÈó¥ÁöÑÂ§πËßíÊòØ12.5Â∫¶„ÄÇ</span></li><li><span class="num">40.</span><span><strong>water tank</strong> for containing water.</span></li><li class="translation"><span></span><span>Áî®‰∫éË£ÖÊ∞¥ÁöÑÊ∞¥ÁÆ±„ÄÇ</span></li>`},
          'page-test3':{title:'Education Program', startNum:21, dates:'(2014.9.20/2011.8.25/2009.9.17)', audioSrc:'./part4.3.Education Program.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T3: Education Program</h4><p class="date-info">(2014.9.20/2011.8.25/2009.9.17)</p></div><p class="fill-in-question"><b>21.</b> The new teacher who is very popular among students wrote a book titled "professional <input type="text" name="t3_q1">".</p><p class="fill-in-question"><b>22.</b> It covers techniques including doing research as part of a <input type="text" name="t3_q2"></p><p class="fill-in-question"><b>23.</b> The objective is for the students to present <input type="text" name="t3_q3"> in a collaborative manner.</p><p class="fill-in-question"><b>24.</b> examine the <input type="text" name="t3_q4"> of peer pupils</p><p class="fill-in-question"><b>25.</b> keep a <input type="text" name="t3_q5"></p><p class="fill-in-question"><b>26.</b> carry out <input type="text" name="t3_q6"></p><p class="fill-in-question"><b>27.</b> in-class <input type="text" name="t3_q7"></p><p class="fill-in-question"><b>28.</b> The evaluation of <input type="text" name="t3_q8"></p><p class="fill-in-question"><b>29.</b> with the help of <input type="text" name="t3_q9"> to identify respondents</p><p class="fill-in-question"><b>30.</b> choose own respondents to do <input type="text" name="t3_q10"></p></div><div class="results-in-page" id="results-page-test3"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">21.</span><span>The new teacher who is very popular among students wrote a book titled "professional <strong>learning</strong>".</span></li><li class="translation"><span></span><span>ÈÇ£‰ΩçÂú®Â≠¶Áîü‰∏≠ÈùûÂ∏∏ÂèóÊ¨¢ËøéÁöÑÊñ∞ËÄÅÂ∏àÂÜô‰∫Ü‰∏ÄÊú¨Âêç‰∏∫„Ää‰∏ì‰∏öÂ≠¶‰π†„ÄãÁöÑ‰π¶„ÄÇ</span></li><li><span class="num">22.</span><span>It covers techniques including doing research as part of a <strong>team</strong>.</span></li><li class="translation"><span></span><span>ÂÆÉÊ∂µÁõñ‰∫ÜÂåÖÊã¨‰Ωú‰∏∫Âõ¢Èòü‰∏ÄÈÉ®ÂàÜËøõË°åÁ†îÁ©∂Âú®ÂÜÖÁöÑÊäÄÂ∑ß„ÄÇ</span></li><li><span class="num">23.</span><span>The objective is for the students to present <strong>results</strong> in a collaborative manner.</span></li><li class="translation"><span></span><span>ÁõÆÊ†áÊòØËÆ©Â≠¶Áîü‰ª•Âçè‰ΩúÁöÑÊñπÂºèÂ±ïÁ§∫ÊàêÊûú„ÄÇ</span></li><li><span class="num">24.</span><span>examine the <strong>behaviours</strong> of peer pupils.</span></li><li class="translation"><span></span><span>Ê£ÄÊü•Âêå‰º¥‰ª¨ÁöÑË°å‰∏∫„ÄÇ</span></li><li><span class="num">25.</span><span>keep a <strong>diary</strong>.</span></li><li class="translation"><span></span><span>ÂÜôÊó•ËÆ∞„ÄÇ</span></li><li><span class="num">26.</span><span>carry out <strong>video recording</strong>.</span></li><li class="translation"><span></span><span>ËøõË°åËßÜÈ¢ëÂΩïÂà∂„ÄÇ</span></li><li><span class="num">27.</span><span>in-class <strong>simulation</strong>.</span></li><li class="translation"><span></span><span>ËØæÂ†ÇÊ®°Êãü„ÄÇ</span></li><li><span class="num">28.</span><span>The evaluation of <strong>test results</strong>.</span></li><li class="translation"><span></span><span>ËØÑ‰º∞ÊµãËØïÁªìÊûú„ÄÇ</span></li><li><span class="num">29.</span><span>with the help of <strong>Internet</strong> to identify respondents.</span></li><li class="translation"><span></span><span>Âú®‰∫íËÅîÁΩëÁöÑÂ∏ÆÂä©‰∏ãÁ°ÆÂÆöÂèóËÆøËÄÖ„ÄÇ</span></li><li><span class="num">30.</span><span>choose own respondents to do <strong>interviews</strong>.</span></li><li class="translation"><span></span><span>ÈÄâÊã©Ëá™Â∑±ÁöÑÂèóËÆøËÄÖËøõË°åËÆøË∞à„ÄÇ</span></li>`},
          'page-test4':{title:'Difference Between Settled Nations and Nomadic Nations', startNum:31, dates:'(2019.4.13 ‰∫öÂ§™/2015.7.25/2012.5.10)', audioSrc:'./part4.4.Difference Between Settled Nations and Nomadic Nations.MP3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T4: Difference Between Settled Nations and Nomadic Nations</h4><p class="date-info">(2019.4.13 ‰∫öÂ§™/2015.7.25/2012.5.10)</p></div><p class="fill-in-question"><b>31.</b> for fixed transhumance, the pattern of movement is described as <input type="text" name="t4_q1"></p><p class="fill-in-question"><b>32.</b> fixed transhumance live in a semi-permanent shelter on high ground such as <input type="text" name="t4_q2"></p><p class="fill-in-question"><b>33.</b> homes of the Gabra people carried on <input type="text" name="t4_q3"></p><p class="fill-in-question"><b>34.</b> for fixed transhumance, only <input type="text" name="t4_q4"> pastoralists make the journey</p><p class="fill-in-question"><b>35.</b> people who do not leave the valleys may become <input type="text" name="t4_q5"></p><p class="fill-in-question"><b>36.</b> exchange animals with other communities for <input type="text" name="t4_q6"></p><p class="fill-in-question"><b>37.</b> herds provide all needs-food and <input type="text" name="t4_q7"></p><p class="fill-in-question"><b>38.</b> they traditionally arrive in time to help local residents with the <input type="text" name="t4_q8"></p><p class="fill-in-question"><b>39.</b> their homes are <input type="text" name="t4_q9"> which are temporary shelters</p><p class="fill-in-question"><b>40.</b> a better term to describe this type of transhumance might be <input type="text" name="t4_q10"></p></div><div class="results-in-page" id="results-page-test4"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>for fixed transhumance, the pattern of movement is described as <strong>vertical</strong>.</span></li><li class="translation"><span></span><span>ÂØπ‰∫éÂõ∫ÂÆöÊÄßÂ≠£ËäÇÊÄßËøÅÂæôÔºåÂÖ∂ÁßªÂä®Ê®°ÂºèË¢´ÊèèËø∞‰∏∫ÂûÇÁõ¥ÁöÑ„ÄÇ</span></li><li><span class="num">32.</span><span>fixed transhumance live in a semi-permanent shelter on high ground such as <strong>cabin</strong>.</span></li><li class="translation"><span></span><span>Âõ∫ÂÆöÊÄßÂ≠£ËäÇÊÄßËøÅÂæôÁöÑÁâßÊ∞ëÂ±Ö‰ΩèÂú®È´òÂú∞ÁöÑÂçäÊ∞∏‰πÖÊÄß‰ΩèÊâÄ‰∏≠Ôºå‰æãÂ¶ÇÂ∞èÊú®Â±ã„ÄÇ</span></li><li><span class="num">33.</span><span>homes of the Gabra people carried on <strong>camel</strong>.</span></li><li class="translation"><span></span><span>Âä†Â∏ÉÊãâ‰∫∫ÁöÑÂÆ∂Âõ≠ÊòØÁî®È™ÜÈ©ºËøêËæìÁöÑ„ÄÇ</span></li><li><span class="num">34.</span><span>for fixed transhumance, only <strong>young</strong> pastoralists make the journey.</span></li><li class="translation"><span></span><span>ÂØπ‰∫éÂõ∫ÂÆöÊÄßÂ≠£ËäÇÊÄßËøÅÂæôÔºåÂè™ÊúâÂπ¥ËΩªÁöÑÁâßÊ∞ëÊâç‰ºöËøõË°åËøÅÁßª„ÄÇ</span></li><li><span class="num">35.</span><span>people who do not leave the valleys may become <strong>farmers</strong>.</span></li><li class="translation"><span></span><span>‰∏çÁ¶ªÂºÄÂ±±Ë∞∑ÁöÑ‰∫∫‰ª¨ÂèØËÉΩ‰ºöÊàê‰∏∫ÂÜúÊ∞ë„ÄÇ</span></li><li><span class="num">36.</span><span>exchange animals with other communities for <strong>grain</strong>.</span></li><li class="translation"><span></span><span>‰∏éÂÖ∂‰ªñÁ§æÂå∫‰∫§Êç¢Âä®Áâ©‰ª•Ëé∑ÂèñË∞∑Áâ©„ÄÇ</span></li><li><span class="num">37.</span><span>herds provide all needs-food and <strong>clothing</strong>.</span></li><li class="translation"><span></span><span>ÁâßÁæ§Êèê‰æõÊâÄÊúâÁîüÊ¥ªÊâÄÈúÄ‚Äî‚ÄîÈ£üÁâ©ÂíåË°£Áâ©„ÄÇ</span></li><li><span class="num">38.</span><span>they traditionally arrive in time to help local residents with the <strong>harvest</strong>.</span></li><li class="translation"><span></span><span>‰ªñ‰ª¨‰º†Áªü‰∏ä‰ºöÂèäÊó∂Ëµ∂Âà∞Ôºå‰ª•Â∏ÆÂä©ÂΩìÂú∞Â±ÖÊ∞ëÊî∂Ëé∑„ÄÇ</span></li><li><span class="num">39.</span><span>their homes are <strong>tents</strong> which are temporary shelters.</span></li><li class="translation"><span></span><span>‰ªñ‰ª¨ÁöÑÂÆ∂ÊòØ‰Ωú‰∏∫‰∏¥Êó∂‰ΩèÊâÄÁöÑÂ∏êÁØ∑„ÄÇ</span></li><li><span class="num">40.</span><span>a better term to describe this type of transhumance might be <strong>intermediate</strong>.</span></li><li class="translation"><span></span><span>‰∏Ä‰∏™Êõ¥ÈÄÇÂêàÊèèËø∞ËøôÁßçÂ≠£ËäÇÊÄßËøÅÂæôÁöÑÊúØËØ≠ÂèØËÉΩÊòØ‚Äú‰∏≠Èó¥Âûã‚Äù„ÄÇ</span></li>`},
          'page-test5':{title:'British Middens', startNum:31, dates:'(2018.1.18 ‰∫öÂ§™/2014.9.6/2012.2.9)', audioSrc:'./part4.5.British Middens.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T5: British Middens</h4><p class="date-info">(2018.1.18 ‰∫öÂ§™/2014.9.6/2012.2.9)</p></div><p class="fill-in-question"><b>31.</b> An British recycling midden shaped like a broken <input type="text" name="t5_q1">.</p><p class="fill-in-question"><b>32.</b> Fish hooks are made of fish <input type="text" name="t5_q2"></p><p class="fill-in-question"><b>33.</b> The recycling site was demolished for a <input type="text" name="t5_q3"> to be built.</p><p class="fill-in-question"><b>34.</b> People need a <input type="text" name="t5_q4"> to research on the site.</p><p class="fill-in-question"><b>35.</b> Over the years, people's <input type="text" name="t5_q5"> and immigration pattern have changed.</p><p class="fill-in-question"><b>36.</b> On the south islands, a lot of <input type="text" name="t5_q6"> buildings can be found.</p><p class="fill-in-question"><b>37.</b> Early settlers ate huge <input type="text" name="t5_q7"> which are high in fat.</p><p class="fill-in-question"><b>38.</b> Rare <input type="text" name="t5_q8"> objects can be found in European middens.</p><p class="fill-in-question"><b>39.</b> There are some <input type="text" name="t5_q9"> beside the mountains where people live.</p><p class="fill-in-question"><b>40.</b> Evidence was found where <input type="text" name="t5_q10"> used to stay in the region.</p></div><div class="results-in-page" id="results-page-test5"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>An British recycling midden shaped like a broken <strong>axe</strong>.</span></li><li class="translation"><span></span><span>‰∏Ä‰∏™ÂΩ¢Áä∂ÂÉèÁ†¥ÊçüÊñßÂ§¥ÁöÑËã±ÂõΩÂè§‰ª£ÂõûÊî∂Á´ô„ÄÇ</span></li><li><span class="num">32.</span><span>Fish hooks are made of fish <strong>bones</strong>.</span></li><li class="translation"><span></span><span>È±ºÈí©ÊòØÁî±È±ºÈ™®Âà∂ÊàêÁöÑ„ÄÇ</span></li><li><span class="num">33.</span><span>The recycling site was demolished for a <strong>road</strong> to be built.</span></li><li class="translation"><span></span><span>ËØ•ÂõûÊî∂Á´ôÂõ†‰øÆÂª∫‰∏ÄÊù°ÈÅìË∑ØËÄåË¢´ÊãÜÈô§„ÄÇ</span></li><li><span class="num">34.</span><span>People need a <strong>permit</strong> to research on the site.</span></li><li class="translation"><span></span><span>‰∫∫‰ª¨ÈúÄË¶ÅËÆ∏ÂèØËØÅÊâçËÉΩÂú®ËØ•Âú∞ÁÇπËøõË°åÁ†îÁ©∂„ÄÇ</span></li><li><span class="num">35.</span><span>Over the years, people's <strong>travelling</strong> and immigration pattern have changed.</span></li><li class="translation"><span></span><span>Â§öÂπ¥Êù•Ôºå‰∫∫‰ª¨ÁöÑÊóÖË°åÂíåÁßªÊ∞ëÊ®°ÂºèÂ∑≤ÁªèÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ</span></li><li><span class="num">36.</span><span>On the south islands, a lot of <strong>white</strong> buildings can be found.</span></li><li class="translation"><span></span><span>Âú®ÂçóÈÉ®Â≤õÂ±ø‰∏äÔºåÂèØ‰ª•ÊâæÂà∞ÂæàÂ§öÁôΩËâ≤ÁöÑÂª∫Á≠ë„ÄÇ</span></li><li><span class="num">37.</span><span>Early settlers ate huge <strong>birds</strong> which are high in fat.</span></li><li class="translation"><span></span><span>Êó©ÊúüÂÆöÂ±ÖËÄÖÈ£üÁî®ÂØåÂê´ËÑÇËÇ™ÁöÑÂ∑®È∏ü„ÄÇ</span></li><li><span class="num">38.</span><span>Rare <strong>glass</strong> objects can be found in European middens.</span></li><li class="translation"><span></span><span>Âú®Ê¨ßÊ¥≤ÁöÑË¥ù‰∏ò‰∏≠ÂèØ‰ª•ÂèëÁé∞Á®ÄÊúâÁöÑÁéªÁíÉÂà∂ÂìÅ„ÄÇ</span></li><li><span class="num">39.</span><span>There are some <strong>lakes</strong> beside the mountains where people live.</span></li><li class="translation"><span></span><span>Âú®‰∫∫‰ª¨Â±Ö‰ΩèÁöÑÂ±±ËÑâÊóÅËæπÊúâ‰∏Ä‰∫õÊπñÊ≥ä„ÄÇ</span></li><li><span class="num">40.</span><span>Evidence was found where <strong>soldiers</strong> used to stay in the region.</span></li><li class="translation"><span></span><span>ÊúâËØÅÊçÆË°®ÊòéÂ£´ÂÖµÊõæÁªèÂú®ËØ•Âú∞Âå∫ÂÅúÁïô„ÄÇ</span></li>`},
          'page-test6':{title:'Saffron', startNum:31, dates:'(2018.2.3 ‰∫öÂ§™/2015.7.4/2013.8.24)', audioSrc:'./part4.6.Saffron.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T6: Saffron</h4><p class="date-info">(2018.2.3 ‰∫öÂ§™/2015.7.4/2013.8.24)</p></div><p class="fill-in-question"><b>31.</b> <input type="text" name="t6_q1"> of saffron used to make 50 grams</p><p class="fill-in-question"><b>32.</b> method of preserving saffron: <input type="text" name="t6_q2"></p><p class="fill-in-question"><b>33.</b> sold as a whole or as <input type="text" name="t6_q3"></p><p class="fill-in-question"><b>34.</b> good for cooking in <input type="text" name="t6_q4"> dishes</p><p class="fill-in-question"><b>35.</b> saffron can improve problem in <input type="text" name="t6_q5"> for human</p><p class="fill-in-question"><b>36.</b> as a protection from various types of <input type="text" name="t6_q6"> for animals</p><p class="fill-in-question"><b>37.</b> Ancient Crete use saffron as a dye of <input type="text" name="t6_q7"></p><p class="fill-in-question"><b>38.</b> Ancient Rome use saffron as a <input type="text" name="t6_q8"> in public bath</p><p class="fill-in-question"><b>39.</b> to produce <input type="text" name="t6_q9"></p><p class="fill-in-question"><b>40.</b> Ancient Persia use saffron as a dye of making <input type="text" name="t6_q10"></p></div><div class="results-in-page" id="results-page-test6"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span><strong>14,000</strong> of saffron used to make 50 grams.</span></li><li class="translation"><span></span><span>Âà∂‰Ωú50ÂÖãËóèÁ∫¢Ëä±ÈúÄË¶Å14000ÊúµËä±„ÄÇ</span></li><li><span class="num">32.</span><span>method of preserving saffron: <strong>drying</strong>.</span></li><li class="translation"><span></span><span>‰øùÂ≠òËóèÁ∫¢Ëä±ÁöÑÊñπÊ≥ïÊòØÔºöÂπ≤Áá•„ÄÇ</span></li><li><span class="num">33.</span><span>sold as a whole or as <strong>powder</strong>.</span></li><li class="translation"><span></span><span>‰ª•Êï¥Ê†πÊàñÁ≤âÊú´ÂΩ¢ÂºèÂá∫ÂîÆ„ÄÇ</span></li><li><span class="num">34.</span><span>good for cooking in <strong>rice</strong> dishes.</span></li><li class="translation"><span></span><span>ÈÄÇÂêàÁî®‰∫éÁÉπÈ•™Á±≥È•≠ËèúËÇ¥„ÄÇ</span></li><li><span class="num">35.</span><span>saffron can improve problem in <strong>eyes</strong> for human.</span></li><li class="translation"><span></span><span>ËóèÁ∫¢Ëä±ÂèØ‰ª•ÊîπÂñÑ‰∫∫Á±ªÁöÑÁúºÈÉ®ÈóÆÈ¢ò„ÄÇ</span></li><li><span class="num">36.</span><span>as a protection from various types of <strong>lights</strong> for animals.</span></li><li class="translation"><span></span><span>‰Ωú‰∏∫‰∏ÄÁßç‰øùÊä§Âä®Áâ©ÂÖçÂèóÂêÑÁßçÂÖâÁ∫ø‰º§ÂÆ≥ÁöÑÊé™ÊñΩ„ÄÇ</span></li><li><span class="num">37.</span><span>Ancient Crete use saffron as a dye of <strong>clothes</strong>.</span></li><li class="translation"><span></span><span>Âè§ÂÖãÈáåÁâπ‰∫∫‰ΩøÁî®ËóèÁ∫¢Ëä±‰Ωú‰∏∫Ë°£Áâ©ÁöÑÊüìÊñô„ÄÇ</span></li><li><span class="num">38.</span><span>Ancient Rome use saffron as a <strong>perfume</strong> in public bath.</span></li><li class="translation"><span></span><span>Âè§ÁΩóÈ©¨‰∫∫Â∞ÜËóèÁ∫¢Ëä±Áî®‰ΩúÂÖ¨ÂÖ±Êµ¥Ê±†ÁöÑÈ¶ôÊ∞¥„ÄÇ</span></li><li><span class="num">39.</span><span>to produce <strong>cosmetics</strong>.</span></li><li class="translation"><span></span><span>Áî®‰∫éÁîü‰∫ßÂåñÂ¶ÜÂìÅ„ÄÇ</span></li><li><span class="num">40.</span><span>Ancient Persia use saffron as a dye of making <strong>carpets</strong>.</span></li><li class="translation"><span></span><span>Âè§Ê≥¢ÊñØ‰∫∫‰ΩøÁî®ËóèÁ∫¢Ëä±‰Ωú‰∏∫Âà∂‰ΩúÂú∞ÊØØÁöÑÊüìÊñô„ÄÇ</span></li>`},
          'page-test7':{title:'Paper Discussion', startNum:26, dates:'(2018.3.10 ‰∫öÂ§™/2017.1.14/2010.10.30)', audioSrc:'./part4.7.Paper Discussion.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T7: Paper Discussion</h4><p class="date-info">(2018.3.10 ‰∫öÂ§™/2017.1.14/2010.10.30)</p></div><p class="fill-in-question"><b>26.</b> Kathy thinks it is a good essay to separate several <input type="text" name="t7_q1"></p><p class="fill-in-question"><b>27.</b> The man says these articles look like <input type="text" name="t7_q2"> rather than essay</p><p class="fill-in-question"><b>28.</b> The man thinks it is good to use as many <input type="text" name="t7_q3"> as possible</p><p class="fill-in-question"><b>29.</b> and use connectives to link his <input type="text" name="t7_q4"></p><p class="fill-in-question"><b>30.</b> The professor recommends a wide <input type="text" name="t7_q5"></p></div><div class="results-in-page" id="results-page-test7"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">26.</span><span>Kathy thinks it is a good essay to separate several <strong>subtopics</strong>.</span></li><li class="translation"><span></span><span>ÂáØË•øËÆ§‰∏∫Â∞ÜÂá†‰∏™ÂâØ‰∏ªÈ¢òÂàÜÂºÄÊòØ‰∏ÄÁØáÂ•ΩÊñáÁ´†„ÄÇ</span></li><li><span class="num">27.</span><span>The man says these articles look like <strong>reports</strong> rather than essay.</span></li><li class="translation"><span></span><span>Ëøô‰ΩçÁî∑Â£´ËØ¥Ëøô‰∫õÊñáÁ´†ÁúãËµ∑Êù•Êõ¥ÂÉèÊòØÊä•ÂëäËÄå‰∏çÊòØËÆ∫Êñá„ÄÇ</span></li><li><span class="num">28.</span><span>The man thinks it is good to use as many <strong>examples</strong> as possible.</span></li><li class="translation"><span></span><span>Ëøô‰ΩçÁî∑Â£´ËÆ§‰∏∫Â∞ΩÂèØËÉΩÂ§öÂú∞‰ΩøÁî®‰æãÂ≠êÊòØÂ•ΩÁöÑ„ÄÇ</span></li><li><span class="num">29.</span><span>and use connectives to link his <strong>ideas</strong>.</span></li><li class="translation"><span></span><span>Âπ∂‰ΩøÁî®ËøûÊé•ËØçÊù•ËøûÊé•‰ªñÁöÑËßÇÁÇπ„ÄÇ</span></li><li><span class="num">30.</span><span>The professor recommends a wide <strong>reading</strong>.</span></li><li class="translation"><span></span><span>ÊïôÊéàÊé®ËçêËøõË°åÂπøÊ≥õÈòÖËØª„ÄÇ</span></li>`},
          'page-test8':{title:'Autonomous Underwater Vehicle (AUV)', startNum:31, dates:'(2016.5.28/2014.4.26/2013.1.12)', audioSrc:'./part4.8.Autonomous Underwater Vehicle (AUV).mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T8: Autonomous Underwater Vehicle (AUV)</h4><p class="date-info">(2016.5.28/2014.4.26/2013.1.12)</p></div><p class="fill-in-question"><b>31.</b> looks like a small <input type="text" name="t8_q1"></p><p class="fill-in-question"><b>32.</b> acts as <input type="text" name="t8_q2"></p><p class="fill-in-question"><b>33-34.</b> Take measurements <input type="text" name="t8_q3_1"> level in water and water <input type="text" name="t8_q3_2"></p><p class="fill-in-question"><b>35.</b> study the impact of ocean on <input type="text" name="t8_q4"></p><p class="fill-in-question"><b>36.</b> isn't connected to boat by <input type="text" name="t8_q5"></p><p class="fill-in-question"><b>37.</b> can't take samples so can't assess <input type="text" name="t8_q6"> level in water</p><p class="fill-in-question"><b>38.</b> <input type="text" name="t8_q7"> is pumped between two bladders</p><p class="fill-in-question"><b>39.</b> Information are collected and bring to the <input type="text" name="t8_q8"></p><p class="fill-in-question"><b>40.</b> Antenna embedded in the <input type="text" name="t8_q9"> wing-tip.</p></div><div class="results-in-page" id="results-page-test8"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>looks like a small <strong>airplane</strong>.</span></li><li class="translation"><span></span><span>ÁúãËµ∑Êù•ÂÉè‰∏ÄÊû∂Â∞èÈ£ûÊú∫„ÄÇ</span></li><li><span class="num">32.</span><span>acts as <strong>robot</strong>.</span></li><li class="translation"><span></span><span>‰Ωú‰∏∫Êú∫Âô®‰∫∫Â∑•‰Ωú„ÄÇ</span></li><li><span class="num">33-34.</span><span>Take measurements <strong>salt</strong> level in water and water <strong>quality</strong>.</span></li><li class="translation"><span></span><span>ÊµãÈáèÊ∞¥‰∏≠ÁöÑÁõêÂ∫¶ÂíåÊ∞¥Ë¥®„ÄÇ</span></li><li><span class="num">35.</span><span>study the impact of ocean on <strong>climate</strong>.</span></li><li class="translation"><span></span><span>Á†îÁ©∂Êµ∑Ê¥ãÂØπÊ∞îÂÄôÁöÑÂΩ±Âìç„ÄÇ</span></li><li><span class="num">36.</span><span>isn't connected to boat by <strong>cables</strong>.</span></li><li class="translation"><span></span><span>‰∏çÈÄöËøáÁîµÁºÜËøûÊé•Âà∞Ëàπ‰∏ä„ÄÇ</span></li><li><span class="num">37.</span><span>can't take samples so can't assess <strong>chemical</strong> level in water.</span></li><li class="translation"><span></span><span>‰∏çËÉΩÈááÈõÜÊ†∑Êú¨ÔºåÂõ†Ê≠§Êó†Ê≥ïËØÑ‰º∞Ê∞¥‰∏≠ÁöÑÂåñÂ≠¶Áâ©Ë¥®Ê∞¥Âπ≥„ÄÇ</span></li><li><span class="num">38.</span><span><strong>Oil</strong> is pumped between two bladders.</span></li><li class="translation"><span></span><span>Ê≤πÂú®‰∏§‰∏™Ê∞îÂõä‰πãÈó¥Ë¢´Ê≥µÈÄÅ„ÄÇ</span></li><li><span class="num">39.</span><span>Information are collected and bring to the <strong>surface</strong>.</span></li><li class="translation"><span></span><span>‰ø°ÊÅØË¢´Êî∂ÈõÜÂπ∂Â∏¶Âà∞Ê∞¥Èù¢„ÄÇ</span></li><li><span class="num">40.</span><span>Antenna embedded in the <strong>right</strong> wing-tip.</span></li><li class="translation"><span></span><span>Â§©Á∫øÂµåÂÖ•Âú®Âè≥ÁøºÂ∞ñ„ÄÇ</span></li>`},
          'page-test9':{title:'Health Research of Night-Shift Workers', startNum:31, dates:'(2016.1.9/2013.4.27/2007.1.31)', audioSrc:'./part4.9.Health Research of Night-Shift Workers.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T9: Health Research of Night-Shift Workers</h4><p class="date-info">(2016.1.9/2013.4.27/2007.1.31)</p></div><p class="fill-in-question"><b>31.</b> Population of night shift workers reached 10,000 in number of a huge <input type="text" name="t9_q1"></p><p class="fill-in-question"><b>32.</b> Night shift workers <input type="text" name="t9_q2"> disordered</p><p class="fill-in-question"><b>33.</b> Human's internal clock make people tell the difference of <input type="text" name="t9_q3_1"> and <input type="text" name="t9_q3_2"></p><p class="fill-in-question"><b>34.</b> Night shift work resulted in <input type="text" name="t9_q4"></p><p class="fill-in-question"><b>35.</b> lack of sleep is not good for <input type="text" name="t9_q5_1"> and <input type="text" name="t9_q5_2"></p><p class="fill-in-question"><b>36.</b> all of these reasons would lead to <input type="text" name="t9_q6"></p><p class="fill-in-question"><b>37.</b> affect their <input type="text" name="t9_q7_1">, and therefore affect their <input type="text" name="t9_q7_2"></p><p class="fill-in-question"><b>38.</b> The third example is <input type="text" name="t9_q8"></p><p class="fill-in-question"><b>39.</b> It will ruin <input type="text" name="t9_q9"> and some other relationship</p><p class="fill-in-question"><b>40.</b> Peer group <input type="text" name="t9_q10"></p></div><div class="results-in-page" id="results-page-test9"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>Population of night shift workers reached 10,000 in number of a huge <strong>increase</strong>.</span></li><li class="translation"><span></span><span>Â§úÁè≠Â∑•‰∫∫ÁöÑÊï∞ÈáèËææÂà∞‰∫Ü10000‰∫∫ÔºåËøôÊòØ‰∏Ä‰∏™Â∑®Â§ßÁöÑÂ¢ûÈïø„ÄÇ</span></li><li><span class="num">32.</span><span>Night shift workers <strong>internal clock</strong> disordered.</span></li><li class="translation"><span></span><span>Â§úÁè≠Â∑•‰∫∫ÁöÑÁîüÁâ©ÈíüÁ¥ä‰π±„ÄÇ</span></li><li><span class="num">33.</span><span>Human's internal clock make people tell the difference of <strong>dark and light</strong>.</span></li><li class="translation"><span></span><span>‰∫∫Á±ªÁöÑÁîüÁâ©Èíü‰Ωø‰∫∫‰ª¨ËÉΩÂ§üÂàÜËæ®ÈªëÊöó‰∏éÂÖâÊòé„ÄÇ</span></li><li><span class="num">34.</span><span>Night shift work resulted in <strong>unsocial hours</strong>.</span></li><li class="translation"><span></span><span>Â§úÁè≠Â∑•‰ΩúÂØºËá¥‰∫Ü‰∏çËßÑÂæãÁöÑÂ∑•‰ΩúÊó∂Èó¥„ÄÇ</span></li><li><span class="num">35.</span><span>lack of sleep is not good for <strong>stomach and heart</strong>.</span></li><li class="translation"><span></span><span>Áù°Áú†‰∏çË∂≥ÂØπËÉÉÂíåÂøÉËÑèÈÉΩ‰∏çÂ•Ω„ÄÇ</span></li><li><span class="num">36.</span><span>all of these reasons would lead to <strong>depression</strong>.</span></li><li class="translation"><span></span><span>ÊâÄÊúâËøô‰∫õÂéüÂõ†ÈÉΩÂèØËÉΩÂØºËá¥ÊäëÈÉÅ„ÄÇ</span></li><li><span class="num">37.</span><span>affect their <strong>mental ability</strong>, and therefore affect their <strong>performance</strong>.</span></li><li class="translation"><span></span><span>ÂΩ±Âìç‰ªñ‰ª¨ÁöÑÂøÉÊô∫ËÉΩÂäõÔºå‰ªéËÄåÂΩ±Âìç‰ªñ‰ª¨ÁöÑË°®Áé∞„ÄÇ</span></li><li><span class="num">38.</span><span>The third example is <strong>social matters</strong>.</span></li><li class="translation"><span></span><span>Á¨¨‰∏â‰∏™‰æãÂ≠êÊòØÁ§æ‰ºöÈóÆÈ¢ò„ÄÇ</span></li><li><span class="num">39.</span><span>It will ruin <strong>family life</strong> and some other relationship.</span></li><li class="translation"><span></span><span>ÂÆÉ‰ºöÊØÅÊéâÂÆ∂Â∫≠ÁîüÊ¥ª‰ª•Âèä‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÂÖ≥Á≥ª„ÄÇ</span></li><li><span class="num">40.</span><span>Peer group <strong>friends</strong>.</span></li><li class="translation"><span></span><span>ÂêåÈæÑ‰∫∫Áæ§‰ΩìÁöÑÊúãÂèã‰ª¨„ÄÇ</span></li>`},
          'page-test10':{title:'The Different between Portland Concrete and Eco-concrete', startNum:31, dates:'(2021.4.21/2014.7.12/2011.1.8)', audioSrc:'./part4.10.The Different between Portland Concrete and Eco-concrete.mp3',questions:`<div class="group"><div class="test-title-container"><h4 class="test-title">T10: The Different between Portland Concrete and Eco-concrete</h4><p class="date-info">(2021.4.21/2014.7.12/2011.1.8)</p></div><p class="fill-in-question"><b>31.</b> Cement is made of <input type="text" name="t10_q1_1"> and <input type="text" name="t10_q1_2"></p><p class="fill-in-question"><b>32.</b> Why it became successful: New techniques of exposing it to <input type="text" name="t10_q2"></p><p class="fill-in-question"><b>33.</b> Cement is popular in construction industry because it is acceptable and <input type="text" name="t10_q3"></p><p class="fill-in-question"><b>34.</b> In the process of production, CO2 will be released in <input type="text" name="t10_q4"></p><p class="fill-in-question"><b>35.</b> World's 7% CO2 comes from <input type="text" name="t10_q5"> cement</p><p class="fill-in-question"><b>36.</b> It's highly being used in <input type="text" name="t10_q6"></p></div><div class="results-in-page" id="results-page-test10"></div><div style="height: 120px;"></div>`,transcript:`<li><span class="num">31.</span><span>Cement is made of <strong>chalk and clay</strong>.</span></li><li class="translation"><span></span><span>Ê∞¥Ê≥•ÊòØÁî±ÁôΩÂû©ÂíåÁ≤òÂúüÂà∂ÊàêÁöÑ„ÄÇ</span></li><li><span class="num">32.</span><span>Why it became successful: New techniques of exposing it to <strong>high temperature</strong>.</span></li><li class="translation"><span></span><span>ÂÆÉÊàêÂäüÁöÑÂéüÂõ†ÊòØÔºöÈááÁî®‰∫ÜÂ∞ÜÂÖ∂Êö¥Èú≤Âú®È´òÊ∏©‰∏ãÁöÑÊñ∞ÊäÄÊúØ„ÄÇ</span></li><li><span class="num">33.</span><span>Cement is popular in construction industry because it is acceptable and <strong>cheap</strong>.</span></li><li class="translation"><span></span><span>Ê∞¥Ê≥•Âú®Âª∫Á≠ë‰∏öÂæàÂèóÊ¨¢ËøéÔºåÂõ†‰∏∫ÂÆÉÂèØ‰ª•Êé•ÂèóÂπ∂‰∏î‰æøÂÆú„ÄÇ</span></li><li><span class="num">34.</span><span>In the process of production, CO2 will be released in <strong>ovens</strong>.</span></li><li class="translation"><span></span><span>Âú®Áîü‰∫ßËøáÁ®ã‰∏≠Ôºå‰∫åÊ∞ßÂåñÁ¢≥Â∞ÜÂú®ÁÉ§ÁÆ±‰∏≠ÈáäÊîæ„ÄÇ</span></li><li><span class="num">35.</span><span>World's 7% CO2 comes from <strong>man-made</strong> cement.</span></li><li class="translation"><span></span><span>‰∏ñÁïå‰∏ä7%ÁöÑ‰∫åÊ∞ßÂåñÁ¢≥Êù•Ëá™‰∫∫ÈÄ†Ê∞¥Ê≥•„ÄÇ</span></li><li><span class="num">36.</span><span>It's highly being used in <strong>developing countries</strong>.</span></li><li class="translation"><span></span><span>ÂÆÉË¢´ÂπøÊ≥õÁî®‰∫éÂèëÂ±ï‰∏≠ÂõΩÂÆ∂„ÄÇ</span></li>`}
        };
        this.answerKey = {
            't1_q1': 'parents', 't1_q2': 'versions', 't1_q3': 'country', 't1_q4': 'transport', 't1_q5': 'social', 't1_q6': 'funding', 't1_q7': 'competitions', 't1_q8': 'professional',
            't2_q1': 'salts', 't2_q2': 'hospitals', 't2_q3': 'slow', 't2_q4': 'international', 't2_q5': 'liters', 't2_q6': 'family', 't2_q7': 'glass', 't2_q8': 'germs', 't2_q9': '12.5', 't2_q10': 'water tank',
            't3_q1': 'learning', 't3_q2': 'team', 't3_q3': 'results', 't3_q4': 'behaviours', 't3_q5': 'diary', 't3_q6': 'video recording', 't3_q7': 'simulation', 't3_q8': 'test results', 't3_q9': 'internet', 't3_q10': 'interviews',
            't4_q1': 'vertical', 't4_q2': 'cabin', 't4_q3': 'camel', 't4_q4': 'young', 't4_q5': 'farmers', 't4_q6': 'grain', 't4_q7': 'clothing', 't4_q8': 'harvest', 't4_q9': 'tents', 't4_q10': 'intermediate',
            't5_q1': 'axe', 't5_q2': 'bones', 't5_q3': 'road', 't5_q4': 'permit', 't5_q5': 'travelling', 't5_q6': 'white', 't5_q7': 'birds', 't5_q8': 'glass', 't5_q9': 'lakes', 't5_q10': 'soldiers',
            't6_q1': '14,000', 't6_q2': 'drying', 't6_q3': 'powder', 't6_q4': 'rice', 't6_q5': 'eyes', 't6_q6': 'lights', 't6_q7': 'clothes', 't6_q8': 'perfume', 't6_q9': 'cosmetics', 't6_q10': 'carpets',
            't7_q1': 'subtopics', 't7_q2': 'reports', 't7_q3': 'examples', 't7_q4': 'ideas', 't7_q5': 'reading',
            't8_q1': 'airplane', 't8_q2': 'robot', 't8_q3_1': 'salt', 't8_q3_2': 'quality', 't8_q4': 'climate', 't8_q5': 'cables', 't8_q6': 'chemical', 't8_q7': 'oil', 't8_q8': 'surface', 't8_q9': 'right',
            't9_q1': 'increase', 't9_q2': 'internal clock', 't9_q3_1': 'dark', 't9_q3_2': 'light', 't9_q4': 'unsocial hours', 't9_q5_1': 'stomach', 't9_q5_2': 'heart', 't9_q6': 'depression', 't9_q7_1': 'mental ability', 't9_q7_2': 'performance', 't9_q8': 'social matters', 't9_q9': 'family life', 't9_q10': 'friends',
            't10_q1_1': 'chalk', 't10_q1_2': 'clay', 't10_q2': 'high temperature', 't10_q3': 'cheap', 't10_q4': 'ovens', 't10_q5': 'man-made', 't10_q6': 'developing countries'
        };
    }
};

document.addEventListener('DOMContentLoaded', () => App.init());
}());
</script>

<script src="../../../../js/practice-page-enhancer.js"></script>
</body>
</html>
