<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A unique golden textile - Reading Passage 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root { 
    --line:#e5e7eb; 
    --bg:#f6f7fb; 
    --panel:#fff; 
    --accent:#3b82f6; 
    --muted:#6b7280; 
    --shadow:0 6px 20px rgba(0,0,0,.12); 
  }
  * { box-sizing: border-box; }
  html,body { height:100%; }
  body { 
    margin:0; 
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
    background:var(--bg); 
    padding-bottom: 82px; 
  }
  
  /* 布局样式 */
  .shell { display:flex; height:100vh; width:100%; }
  .pane { background:var(--panel); overflow:auto; padding:20px; }
  #left { flex: 0 0 50%; min-width: 280px; }
  #right { flex: 1 1 auto; min-width: 320px; background:#fbfbff; border-left:1px solid var(--line); }
  #divider { flex: 0 0 8px; background: linear-gradient(90deg,#e5e7eb,#d1d5db); cursor: ew-resize; position:relative; z-index: 5; user-select:none; }
  
  /* 文本样式 */
  h2,h3,h4 { margin:0 0 10px; }
  #left p { margin: 0 0 12px; line-height: 1.6; word-break: normal; overflow-wrap: normal; hyphens: none; }
  
  /* 组件样式 */
  .group { background:#fff; border:1px solid var(--line); border-radius:10px; padding:12px; margin-bottom:14px; }
  input.blank { 
    border:none; 
    border-bottom:1px solid #9ca3af; 
    padding:2px 4px; 
    font-size:1em; 
    background:transparent; 
    min-width: 80px;
  }
  input.blank:focus { outline:none; border-bottom:2px solid var(--accent); }
  
  /* 按钮样式 */
  button { 
    padding:8px 12px; 
    border:1px solid var(--line); 
    background:#fff; 
    border-radius:6px; 
    cursor:pointer; 
    transition:all 0.2s; 
    font-size:14px; 
  }
  button:hover { background:#f8fafc; border-color:#cbd5e1; }
  button.primary { 
    background:var(--accent); 
    color:#fff; 
    border-color:var(--accent); 
  }
  button.primary:hover { background:#2563eb; }
  
    /* 计时器样式*/
  #timer { 
    background:#fff; 
    color:var(--muted); 
    border:1px solid var(--line); 
    border-radius:6px; 
    padding:6px 12px; 
    cursor:pointer; 
    font-family: 'Courier New', monospace; 
    transition:all 0.2s; 
    min-width: 70px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
  }
  #timer:hover { 
    background:#f1f5f9; 
    border-color:var(--accent); 
  }
  #timer.paused { 
    color: #ef4444; 
    border-color: #fecaca; 
    background: #fef2f2; 
  }

/* 选择工具栏*/
  #selbar { 
    position: fixed; 
    display:none; 
    z-index: 2000; 
    background:#111; 
    color:#fff; 
    border-radius: 8px; 
    padding: 6px; 
    box-shadow: var(--shadow); 
    font-size: 13px; 
    gap:6px; 
    align-items: center; 
  }
  #selbar button { 
    background: transparent; 
    color:#fff; 
    border: 1px solid rgba(255,255,255,.25); 
    padding: 4px 8px; 
    border-radius: 6px; 
    cursor:pointer; 
  }
  #selbar button:hover { border-color:#fff; }
  
  /* 笔记面板 */
  #notes { 
    position: fixed; 
    right: 12px; 
    bottom: 12px; 
    width: 320px; 
    height: 42vh; 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius: 12px; 
    display:none; 
    flex-direction: column; 
    z-index:1500; 
    box-shadow: var(--shadow); 
  }
  #notes header { 
    display:flex; 
    align-items:center; 
    justify-content: space-between; 
    padding:8px 10px; 
    border-bottom:1px solid var(--line); 
  }
  #notes textarea { 
    flex:1; 
    border:0; 
    padding:10px; 
    resize:none; 
    font-size:14px; 
    line-height:1.5; 
  }
  
  /* Toast通知 */
  #toast { 
    position: fixed; 
    bottom: 20px; 
    left: 50%; 
    transform: translateX(-50%); 
    background: rgba(0,0,0,0.8); 
    color: #fff; 
    padding: 8px 16px; 
    border-radius: 4px; 
    display: none; 
    z-index: 3000; 
    font-size: 14px; 
  }
  
  /* 答题导航 */
  .practice-nav { 
    background:#fff; 
    padding:12px 20px; 
    display:flex; 
    align-items:center; 
    gap:16px; 
    box-shadow:0 2px 4px rgba(0,0,0,.05); 
    flex-wrap:wrap; 
    position:fixed; 
    left:0; 
    right:0; 
    bottom:0; 
    border-top:2px solid var(--line); 
    z-index:4000; 
  }
  .practice-nav .title { font-weight:600; color:var(--muted); }
  .practice-nav .questions { 
    display:flex; 
    gap:8px; 
    align-items:center; 
    flex-wrap:wrap; 
  }
  .practice-nav .q-item { 
    padding:6px 10px; 
    border:1px solid var(--line); 
    border-radius:6px; 
    background:#fff; 
    cursor:pointer; 
    font-size:14px; 
    transition:all 0.2s; 
    min-width:36px; 
    text-align:center; 
  }
  .practice-nav .q-item:hover { 
    background:#f1f5f9; 
    border-color:var(--accent); 
  }
  .practice-nav .q-item.answered { 
    background:#e0e7ff; 
    border-color:var(--accent); 
    color:var(--accent); 
    font-weight:500; 
  }
  .practice-nav .q-item.active { 
    background:var(--accent); 
    color:#fff; 
  }
  .practice-nav .controls { 
    display:flex; 
    gap:12px; 
    margin-left:auto; 
    align-items:center; 
  }
  
  /* 答题结果显示 */
  #results { 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius:10px; 
    padding:12px; 
    margin:16px 0; 
    font-family: monospace; 
    white-space:pre-wrap; 
  }
  #results p { margin:0 0 8px; }
  .badge { 
    background:#e0e7ff; 
    color:var(--accent); 
    padding:2px 8px; 
    border-radius:999px; 
    font-size:12px; 
  }
  
  /* 答案框*/
  details.answerbox { 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius:10px; 
    padding:12px; 
    margin-top:10px; 
  }
  details.answerbox summary { 
    cursor:pointer; 
    font-weight:600; 
    list-style:none; 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
  }
  details.answerbox summary::-webkit-details-marker { display:none; }
  #answerContent { margin-top:10px; }
  #answerContent ol { margin:0; padding-left:20px; }
  #answerContent li { margin:4px 0; }
  
  /* 高亮样式 */
  .hl {
    background: #fff3a3;
    box-shadow: inset 0 -2px 0 rgba(0, 0, 0, .05);
    cursor: pointer;
  }

  /* 黑暗模式样式 */
  body.dark {
    --bg: #1a1a1a;
    --panel: #2a2a2a;
    --line: #4a4a4a;
    --muted: #999;
    color: #e0e0e0;
    background: var(--bg);
  }

  body.dark .pane {
    background: var(--panel);
    color: #e0e0e0;
  }

  body.dark #right {
    background: #222;
  }

  body.dark button {
    background: #3a3a3a;
    color: #e0e0e0;
    border-color: #555;
  }

  body.dark button:hover {
    background: #4a4a4a;
    border-color: var(--accent);
  }

  body.dark button.primary {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }

  body.dark input.blank {
    color: #e0e0e0;
    border-bottom-color: #666;
  }

  body.dark input.blank:focus {
    border-bottom-color: var(--accent);
  }

  body.dark .group {
    background: #2f2f2f;
    border-color: var(--line);
  }

  body.dark .practice-nav {
    background: #252525;
    border-top-color: #444;
  }

  body.dark .practice-nav .q-item {
    background: #3a3a3a;
    color: #ccc;
    border-color: #555;
  }

  body.dark .practice-nav .q-item:hover {
    background: #4a4a4a;
    border-color: var(--accent);
  }

  body.dark .practice-nav .q-item.answered {
    background: #3949ab;
    border-color: #5c6bc0;
    color: #e8eaf6;
  }

  body.dark .practice-nav .q-item.active {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }

  body.dark #timer {
    background: #3a3a3a;
    color: #ccc;
    border-color: #555;
  }

  body.dark #timer:hover {
    background: #4a4a4a;
    border-color: var(--accent);
  }

  body.dark #notes {
    background: #2f2f2f;
    border-color: var(--line);
    color: #e0e0e0;
  }

  body.dark #selbar {
    background: #111;
    color: #fff;
  }

  body.dark .hl {
    background-color: #5b21b6;
    color: #f5f3ff;
  }

  body.dark details.answerbox {
    background: #2f2f2f;
    border-color: var(--line);
  }
  
  /* 滚动条样式*/
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #c5c5d2; border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: #999; }
  body.dark ::-webkit-scrollbar-thumb { background: #4a5568; }
  body.dark ::-webkit-scrollbar-thumb:hover { background: #718096; }
  
  table { border-collapse: collapse; width:100%; }
  th, td { border:1px solid var(--line); padding:6px; text-align:center; font-size:14px; }
  th:first-child, td:first-child { width:92px; }

  /* 主题切换按钮 */
  .theme-toggle { 
    cursor: pointer; 
    background: transparent; 
    border: 1px solid var(--line);
    border-radius: 8px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    font-size: 16px;
    transition: all 0.2s ease;
  }
  .theme-toggle:hover {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
    transform: scale(1.05);
  }
  .theme-toggle:active {
    transform: scale(0.95);
  }

  body.dark .theme-toggle {
    background: #3a3a3a;
    color: #e0e0e0;
    border-color: #555;
  }

  body.dark .theme-toggle:hover {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }
</style>
</head>
<body>

<div class="practice-nav">
  <div class="title">Questions</div>
  <div class="questions">
    <div class="q-item" id="q14-nav" onclick="scrollToElement('q14-anchor')">14</div>
    <div class="q-item" id="q15-nav" onclick="scrollToElement('q15-anchor')">15</div>
    <div class="q-item" id="q16-nav" onclick="scrollToElement('q16-anchor')">16</div>
    <div class="q-item" id="q17-nav" onclick="scrollToElement('q17-anchor')">17</div>
    <div class="q-item" id="q18-nav" onclick="scrollToElement('q18-anchor')">18</div>
    <div class="q-item" id="q19-nav" onclick="scrollToElement('q19-anchor')">19</div>
    <div class="q-item" id="q20-nav" onclick="scrollToElement('q20-anchor')">20</div>
    <div class="q-item" id="q21-nav" onclick="scrollToElement('q21-anchor')">21</div>
    <div class="q-item" id="q22-nav" onclick="scrollToElement('q22-anchor')">22</div>
    <div class="q-item" id="q23-nav" onclick="scrollToElement('q23-anchor')">23</div>
    <div class="q-item" id="q24-nav" onclick="scrollToElement('q24-anchor')">24</div>
    <div class="q-item" id="q25-nav" onclick="scrollToElement('q25-anchor')">25</div>
    <div class="q-item" id="q26-nav" onclick="scrollToElement('q26-anchor')">26</div>
  </div>
  <div class="controls">
    <span id="timer" onclick="toggleTimer()">00:00</span>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">🌙</button>
  </div>
</div>

<div class="shell">
  <section class="pane" id="left">
    <h2>READING PASSAGE 2</h2>
    <p>You should spend about 20 minutes on Questions 14–26, which are based on Reading Passage 2 below.</p>
    <h3>A unique golden textile</h3>
    
    <h4>Paragraph A</h4>
    <p>In the early 2000s, a remarkable discovery was made in a tomb near the village of Sampul in western China. Archaeologists unearthed a piece of fabric that appeared to be made of gold threads, dating back approximately 2,500 years. This textile, with its intricate patterns and shimmering metallic appearance, immediately captured the attention of researchers worldwide. Unlike other ancient textiles that had deteriorated over time, this golden fabric remained remarkably well-preserved, allowing scientists to study its composition and manufacturing techniques in detail. The discovery raised numerous questions about the technological capabilities of ancient civilizations and the trade networks that might have facilitated the spread of such sophisticated materials.</p>
    
    <h4>Paragraph B</h4>
    <p>Initial analysis of the fabric revealed that it was not made of pure gold, but rather of thin gold threads wrapped around a core of silk. This technique, known as "gold-wrapping," required exceptional skill and precision. The gold threads were incredibly fine, measuring only a few micrometers in diameter, yet they were strong enough to be woven into complex patterns. The silk core provided flexibility and durability to the otherwise brittle gold, creating a material that was both beautiful and functional. This combination of materials suggested a sophisticated understanding of metallurgy and textile production that was previously unknown in this region during that time period.</p>
    
    <h4>Paragraph C</h4>
    <p>The patterns woven into the fabric depicted mythological creatures and geometric designs that were characteristic of ancient Persian art. This stylistic influence, combined with the advanced manufacturing techniques, suggested that the textile had originated in the Persian Empire and had traveled along the Silk Road to reach China. The Silk Road was a network of trade routes that connected the East and West, facilitating the exchange of goods, ideas, and technologies. The presence of this Persian-style textile in a Chinese tomb indicated the extensive reach of these trade networks and the high value placed on luxury goods in ancient societies.</p>
    
    <h4>Paragraph D</h4>
    <p>Further examination of the fabric revealed evidence of a complex manufacturing process that involved multiple stages. First, gold was hammered into extremely thin sheets and then cut into narrow strips. These strips were then wrapped around silk fibers, which had been carefully selected for their strength and fineness. The resulting gold-wrapped silk threads were then woven on a loom using techniques that required considerable expertise. The precision of the weaving and the consistency of the gold threads suggested that this was not a one-off creation, but rather the product of an established industry with skilled craftspeople and specialized tools.</p>
    
    <h4>Paragraph E</h4>
    <p>The discovery of the golden textile challenged previous assumptions about the technological capabilities of ancient civilizations. Prior to this find, historians believed that the techniques required to produce such fine gold threads and to weave them into complex patterns had not been developed until much later. The textile demonstrated that ancient craftspeople possessed advanced knowledge of metallurgy, textile production, and artistic design. It also highlighted the importance of cross-cultural exchange in the development of technology and art, as techniques and styles spread along trade routes and were adapted by different civilizations.</p>
    
    <h4>Paragraph F</h4>
    <p>The tomb in which the textile was found contained other artifacts that provided context for understanding its significance. These included Chinese coins, indicating that the tomb's occupant was likely a local dignitary or merchant who had acquired the textile through trade. The presence of the textile in a burial site also suggested its importance in ancient Chinese culture, possibly as a symbol of wealth, status, or spiritual significance. The care with which the textile was preserved and buried with its owner indicated that it was considered a valuable and meaningful object.</p>
    
    <h4>Paragraph G</h4>
    <p>Modern scientific techniques have allowed researchers to gain even deeper insights into the golden textile's composition and manufacturing methods. Scanning electron microscopy has revealed the microscopic structure of the gold threads and the silk cores, while chemical analysis has identified trace elements that provide clues about the origin of the gold. These studies have not only enhanced our understanding of this particular artifact but have also contributed to broader knowledge about ancient textile production and trade. The textile continues to be a subject of research, with new discoveries still being made about its creation and significance.</p>
    
  </section>
  <div id="divider" title="Drag to resize"></div>
  <section class="pane" id="right">
    <h3>Questions</h3>
    
    <div class="group">
      <h4>Questions 14–20</h4>
      <p>Reading Passage 2 has seven paragraphs, A–G.</p>
      <p>Which paragraph contains the following information?</p>
      <p>Write the correct letter, A–G, in boxes 14–20 on your answer sheet.</p>
      
      <div id="q14-anchor">
        <p><span class="q-item">14</span> &nbsp;&nbsp;&nbsp; A reference to the scientific techniques used to analyze the textile<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q14" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="G"> G</p>
      </div>
      
      <div id="q15-anchor">
        <p><span class="q-item">15</span> &nbsp;&nbsp;&nbsp; A description of the materials used to make the textile<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q15" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="G"> G</p>
      </div>
      
      <div id="q16-anchor">
        <p><span class="q-item">16</span> &nbsp;&nbsp;&nbsp; A reference to the tomb where the textile was found<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q16" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="G"> G</p>
      </div>
      
      <div id="q17-anchor">
        <p><span class="q-item">17</span> &nbsp;&nbsp;&nbsp; A reference to the artistic influences on the textile's design<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q17" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="G"> G</p>
      </div>
      
      <div id="q18-anchor">
        <p><span class="q-item">18</span> &nbsp;&nbsp;&nbsp; A reference to the trade routes that may have facilitated the textile's spread<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q18" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="G"> G</p>
      </div>
      
      <div id="q19-anchor">
        <p><span class="q-item">19</span> &nbsp;&nbsp;&nbsp; A description of the manufacturing process used to create the textile<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q19" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="G"> G</p>
      </div>
      
      <div id="q20-anchor">
        <p><span class="q-item">20</span> &nbsp;&nbsp;&nbsp; A reference to how the textile challenged previous assumptions<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q20" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="G"> G</p>
      </div>
    </div>
    
    <div class="group">
      <h4>Questions 21–26</h4>
      <p>Do the following statements agree with the information given in Reading Passage 2?</p>
      <p>In boxes 21–26 on your answer sheet, write</p>
      <p><strong>TRUE</strong> &nbsp;&nbsp;&nbsp; if the statement agrees with the information<br>
      <strong>FALSE</strong> &nbsp;&nbsp;&nbsp; if the statement contradicts the information<br>
      <strong>NOT GIVEN</strong> &nbsp;&nbsp;&nbsp; if there is no information on this</p>
      
      <div id="q21-anchor">
        <p><span class="q-item">21</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q21" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q21" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q21" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The golden textile was made entirely of pure gold.</p>
      </div>
      
      <div id="q22-anchor">
        <p><span class="q-item">22</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q22" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q22" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q22" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The textile's patterns were characteristic of ancient Chinese art.</p>
      </div>
      
      <div id="q23-anchor">
        <p><span class="q-item">23</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q23" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q23" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q23" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The tomb also contained Chinese coins.</p>
      </div>
      
      <div id="q24-anchor">
        <p><span class="q-item">24</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q24" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q24" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q24" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The textile was found in perfect condition.</p>
      </div>
      
      <div id="q25-anchor">
        <p><span class="q-item">25</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q25" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q25" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q25" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Silk Road connected the East and West.</p>
      </div>
      
      <div id="q26-anchor">
        <p><span class="q-item">26</span> &nbsp;&nbsp;&nbsp; <input type="radio" name="q26" value="TRUE"> TRUE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q26" value="FALSE"> FALSE &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q26" value="NOT GIVEN"> NOT GIVEN<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The textile was made using techniques that were not developed until much later.</p>
      </div>
    </div>
    
    <div style="display:flex;gap:8px;margin-bottom:10px;">
      <button class="primary" onclick="grade()">Submit</button>
      <button onclick="resetForm()">Reset</button>
      <button onclick="toggleNotes()">Notes</button>
    </div>
    <div id="results"></div>
    <details class="answerbox" id="answerBox">
      <summary>Show answers (click to toggle) <span class="badge">hidden</span></summary>
      <div id="answerContent"></div>
    </details>
  </section>
</div>

<div aria-label="Selection tools" id="selbar" role="toolbar">
  <button id="btnHL">Highlight</button>
  <button id="btnUH">Remove</button>
  <button id="btnNote">Note</button>
</div>

<div id="notes">
  <header>
    <span>Notes</span>
    <button id="btnClose">×</button>
  </header>
  <textarea id="noteArea" placeholder="Write your notes here..."></textarea>
  <div style="padding:8px;border-top:1px solid var(--line);">
    <button id="btnCopy" style="font-size:12px;padding:4px 8px;">Copy</button>
  </div>
</div>

<div id="toast"></div>

<script>
// 页面滚动功能
function scrollToElement(id) {
  const element = document.getElementById(id);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth', block: 'center' });
    // 高亮显示题目
    element.style.backgroundColor = '#e0e7ff';
    setTimeout(() => {
      element.style.backgroundColor = '';
    }, 1000);
  }
}

// 重置表单功能
function resetForm() {
  // 重置单选按钮
  document.querySelectorAll('input[type="radio"]').forEach(radio => {
    radio.checked = false;
  });
  
  // 重置文本输入框
  document.querySelectorAll('input.blank').forEach(input => {
    input.value = '';
  });
  
  // 清除结果
  document.getElementById('results').innerHTML = '';
  
  // 更新导航状态
  updateAnswerStatus();
  
  showToast('Form reset');
}

// Toast通知功能
var toastEl = document.getElementById('toast');
function showToast(msg) {
  toastEl.textContent = msg;
  toastEl.style.display = 'block';
  setTimeout(function () { toastEl.style.display = 'none'; }, 1200);
}

// 练习记录和数据通信功能
function collectPracticeData() {
  const data = {
    examId: 'P2-unique-golden-textile',
    title: 'A unique golden textile',
    category: 'P2',
    frequency: '高频',
    startTime: Date.now(),
    answers: {},
    completed: false
  };
  
  // 收集答案数据
  for (let i = 14; i <= 26; i++) {
    const inputs = document.querySelectorAll(`input[name="q${i}"]`);
    inputs.forEach(input => {
      if (input.checked) {
        data.answers[`q${i}`] = input.value;
      }
    });
  }
  
  return data;
}

function sendPracticeData(data) {
  try {
    // 发送数据到主系统
    if (window.opener && window.opener.practiceSystem) {
      window.opener.practiceSystem.recordPractice(data);
      console.log('[DataComm] 练习数据已发送到主系统');
    } else {
      // 降级到本地存储
      const records = JSON.parse(localStorage.getItem('practiceRecords') || '[]');
      records.push(data);
      localStorage.setItem('practiceRecords', JSON.stringify(records));
      console.log('[DataComm] 练习数据已保存到本地存储');
    }
  } catch (error) {
    console.error('[DataComm] 数据发送失败', error);
  }
}

// 计时器功能
let _t = 0;
let timerRunning = true;
let timerInterval;
const _timerEl = document.getElementById('timer');

function updateTimer() {
  const m = Math.floor(_t / 60);
  const s = _t % 60;
  _timerEl.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
}

function startTimer() {
  timerInterval = setInterval(() => {
    if (timerRunning) {
      _t++;
      updateTimer();
    }
  }, 1000);
}

function toggleTimer() {
  if (timerRunning) {
    clearInterval(timerInterval);
    timerRunning = false;
    _timerEl.classList.add('paused');
    showToast('Timer paused');
  } else {
    startTimer();
    timerRunning = true;
    _timerEl.classList.remove('paused');
    showToast('Timer resumed');
  }
}

// 主题切换功能
function toggleTheme() {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  localStorage.setItem('darkMode', isDark);
  const themeButton = document.querySelector('.theme-toggle');
  themeButton.textContent = isDark ? '☀️' : '🌙';
}

// 拖拽分栏功能
var divider = document.getElementById('divider');
var left = document.getElementById('left');
var right = document.getElementById('right');
var dragging = false;

function startDrag(e) {
  dragging = true;
  document.body.style.cursor = 'ew-resize';
  if (e.preventDefault) e.preventDefault();
}

function endDrag() {
  dragging = false;
  document.body.style.cursor = '';
}

function onMove(clientX) {
  var container = document.querySelector('.shell').getBoundingClientRect();
  var x = clientX - container.left;
  x = Math.max(280, Math.min(container.width - 320, x));
  left.style.flex = '0 0 ' + x + 'px';
  right.style.flex = '1 1 auto';
}

divider.addEventListener('mousedown', function(e) { startDrag(e); });
window.addEventListener('mousemove', function(e) { if (dragging) onMove(e.clientX); });
window.addEventListener('mouseup', endDrag);
divider.addEventListener('touchstart', function(e) { startDrag(e.touches[0]); }, { passive: false });
window.addEventListener('touchmove', function(e) { if (dragging) onMove(e.touches[0].clientX); }, { passive: false });
window.addEventListener('touchend', endDrag);

// 高亮和笔记功能- 按照P3模板标准实现
var selbar = document.getElementById('selbar');
var lastRange = null, currentHlNode = null, keepToolbar = false;

function positionSelbarForRect(rect) {
  selbar.style.display = 'flex';
  requestAnimationFrame(function () {
    var top = window.scrollY + rect.top - selbar.offsetHeight - 8;
    var leftPos = window.scrollX + rect.left + rect.width / 2 - selbar.offsetWidth / 2;
    selbar.style.top = ((top > 0) ? top : (window.scrollY + rect.bottom + 8)) + 'px';
    selbar.style.left = Math.max(8, leftPos) + 'px';
  });
}

function updateSelbar() {
  var sel = window.getSelection();
  if (!sel || sel.rangeCount === 0 || sel.isCollapsed) {
    selbar.style.display = 'none';
    currentHlNode = null;
    return;
  }
  var range = sel.getRangeAt(0);
  lastRange = range.cloneRange();
  currentHlNode = null;
  positionSelbarForRect(range.getBoundingClientRect());
}

document.getElementById('left').addEventListener('mouseup', updateSelbar);
document.getElementById('right').addEventListener('mouseup', updateSelbar);
document.addEventListener('selectionchange', function () {
  var sel = window.getSelection();
  if (!sel || sel.rangeCount === 0 || sel.isCollapsed) {
    if (!keepToolbar && !currentHlNode) {
      selbar.style.display = 'none';
    }
  }
});
document.addEventListener('scroll', function () {
  if (selbar.style.display === 'flex') updateSelbar();
});

document.addEventListener('mousedown', function (e) {
  var t = e.target;
  if (t.classList && t.classList.contains('hl')) {
    keepToolbar = true;
  } else {
    keepToolbar = false;
  }
}, true);

document.addEventListener('click', function (e) {
  var target = e.target;
  if (target.classList && target.classList.contains('hl')) {
    currentHlNode = target;
    lastRange = null;
    positionSelbarForRect(target.getBoundingClientRect());
    var sel = window.getSelection();
    if (sel) sel.removeAllRanges();
    setTimeout(function () { keepToolbar = false; }, 0);
  }
}, true);

function doHighlight() {
  if (currentHlNode) return;
  if (!lastRange || lastRange.collapsed) return;
  var span = document.createElement('span');
  span.className = 'hl';
  try {
    lastRange.surroundContents(span);
  } catch (e) {
    var wrap = document.createElement('span');
    wrap.className = 'hl';
    wrap.appendChild(lastRange.cloneContents());
    lastRange.deleteContents();
    lastRange.insertNode(wrap);
  }
  selbar.style.display = 'none';
  showToast('Highlighted');
}

function removeHighlight() {
  if (currentHlNode) {
    var p = currentHlNode.parentNode;
    while (currentHlNode.firstChild) p.insertBefore(currentHlNode.firstChild, currentHlNode);
    p.removeChild(currentHlNode);
    p.normalize();
    currentHlNode = null;
    selbar.style.display = 'none';
    showToast('Highlight removed');
    return;
  }
  if (!lastRange) return;
  var selRect = lastRange.getBoundingClientRect();
  var walker = document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT);
  var toRemove = [];
  while (walker.nextNode()) {
    var n = walker.currentNode;
    if (n.classList && n.classList.contains('hl')) {
      var r = n.getBoundingClientRect();
      if (!(r.right < selRect.left || r.left > selRect.right || r.bottom < selRect.top || r.top > selRect.bottom)) toRemove.push(n);
    }
  }
  toRemove.forEach(function (el) {
    var p = el.parentNode;
    while (el.firstChild) p.insertBefore(el.firstChild, el);
    p.removeChild(el);
    p.normalize();
  });
  selbar.style.display = 'none';
  showToast('Highlight removed');
}

document.getElementById('btnHL').addEventListener('click', doHighlight);
document.getElementById('btnUH').addEventListener('click', removeHighlight);

// 笔记功能 - 按照P3模板标准实现
var notes = document.getElementById('notes');
var noteArea = document.getElementById('noteArea');

function toggleNotes() {
  notes.style.display = (notes.style.display === 'flex' ? 'none' : 'flex');
}

window.toggleNotes = toggleNotes;
document.getElementById('btnClose').addEventListener('click', toggleNotes);
document.getElementById('btnCopy').addEventListener('click', async function () {
  await navigator.clipboard.writeText(noteArea.value || '');
  showToast('Copied');
});

document.getElementById('btnNote').addEventListener('click', function () {
  var text = '';
  if (currentHlNode) {
    text = (currentHlNode.textContent || '').trim();
  } else if (lastRange) {
    var frag = lastRange.cloneContents();
    text = (frag.textContent || '').trim();
  }
  toggleNotes();
  if (text) noteArea.value = (noteArea.value ? noteArea.value + '\n' : '') + '> ' + text + '\n';
  selbar.style.display = 'none';
});

// 答题状态更新
function updateAnswerStatus() {
  for (let i = 14; i <= 26; i++) {
    const inputs = document.querySelectorAll(`input[name="q${i}"]`);
    const navItem = document.getElementById(`q${i}-nav`);
    if (navItem) {
      let answered = false;
      inputs.forEach(input => {
        if ((input.type === 'radio' || input.type === 'checkbox') && input.checked) {
          answered = true;
        } else if (input.type === 'text' && input.value.trim()) {
          answered = true;
        }
      });
      if (answered) {
        navItem.classList.add('answered');
      } else {
        navItem.classList.remove('answered');
      }
    }
  }
}

// 答案和评分系统
var answers = {
  "q14": "G", "q15": "B", "q16": "A", "q17": "C", "q18": "C", "q19": "D", "q20": "E",
  "q21": "FALSE", "q22": "FALSE", "q23": "TRUE", "q24": "NOT GIVEN", "q25": "TRUE", "q26": "FALSE"
};

function grade() {
  var total = 0, correct = 0, lines = [];
  
  // 检查单选题 (14-26)
  for (let n = 14; n <= 26; n++) {
    const q = `q${n}`;
    total++;
    const selected = document.querySelector(`input[name="${q}"]:checked`);
    const userAnswer = selected ? selected.value : '';
    const isCorrect = userAnswer === answers[q];
    if (isCorrect) correct++;
    lines.push(`${q.toUpperCase()}: ${userAnswer || 'None'} ${isCorrect ? '✓' : '✗'}`);
  }
  
  // 显示结果
  const acc = Math.round(100 * correct / total);
  document.getElementById('results').innerHTML = `
    <p><strong>Score:</strong> ${correct}/${total} <span class="badge">Accuracy ${acc}%</span></p>
    <pre>${lines.join('\n')}</pre>
  `;
  
  // 显示答案
  document.getElementById('answerContent').innerHTML = `
    <ol>
      <li>14. G</li>
      <li>15. B</li>
      <li>16. A</li>
      <li>17. C</li>
      <li>18. C</li>
      <li>19. D</li>
      <li>20. E</li>
      <li>21. FALSE</li>
      <li>22. FALSE</li>
      <li>23. TRUE</li>
      <li>24. NOT GIVEN</li>
      <li>25. TRUE</li>
      <li>26. FALSE</li>
    </ol>
  `;
  document.querySelector('#answerBox .badge').textContent = 'tap to view';
  
  // 发送练习数据
  const practiceData = collectPracticeData();
  practiceData.completed = true;
  practiceData.score = correct;
  practiceData.totalQuestions = total;
  practiceData.accuracy = acc;
  practiceData.endTime = Date.now();
  practiceData.duration = Math.floor((practiceData.endTime - practiceData.startTime) / 1000);
  
  sendPracticeData(practiceData);
  updateAnswerStatus();
}

// 监听答案变化
document.addEventListener('change', updateAnswerStatus);
document.addEventListener('input', updateAnswerStatus);

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
  // 启动计时器
  startTimer();
  
  // 初始化答题状态
  updateAnswerStatus();
  
  // 加载保存的主题
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark');
    const themeButton = document.querySelector('.theme-toggle');
    if (themeButton) themeButton.textContent = '☀️';
  }
  
  // 初始化练习数据收集
  console.log('[PracticeSystem] 练习页面已初始化');
});

// 练习页面增强脚本集成
if (!window.practicePageEnhancer) {
  const script = document.createElement('script');
  script.src = '../../../js/practice-page-enhancer.js';
  script.onload = function () { console.log('Practice page enhancer loaded'); };
  script.onerror = function () { 
    console.error('Practice page enhancer failed to load'); 
    // 降级到内联增强器
    loadInlineEnhancer();
  };
  document.head.appendChild(script);
}

// 内联增强器（降级方案）
function loadInlineEnhancer() {
  if (window.practicePageEnhancer) return;
  
  window.practicePageEnhancer = {
    initialize: function() {
      console.log('[InlineEnhancer] 内联增强器已初始化');
          this.setupCommunication();
      this.setupAnswerListeners();
    },
    
    setupCommunication: function() {
      // 设置跨窗口通信
      window.addEventListener('message', function(event) {
        if (event.data && event.data.type === 'requestPracticeData') {
          const data = collectPracticeData();
          event.source.postMessage({type: 'practiceData', data: data}, '*');
        }
      });
    },
    
    setupAnswerListeners: function() {
      // 监听答题状态变化
      document.addEventListener('change', function() {
        updateAnswerStatus();
        // 发送状态更新
        if (window.opener && window.opener.practiceSystem) {
          const data = collectPracticeData();
          window.opener.practiceSystem.updateProgress(data);
        }
      });
    }
  };
  
  window.practicePageEnhancer.initialize();
}
  
</script>

</body>
</html>
