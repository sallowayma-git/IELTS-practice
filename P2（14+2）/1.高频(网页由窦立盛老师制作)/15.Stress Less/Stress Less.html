<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>P2 - Stress Less</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root { 
    --line:#e5e7eb; 
    --bg:#f6f7fb; 
    --panel:#fff; 
    --accent:#3b82f6; 
    --muted:#6b7280; 
    --shadow:0 6px 20px rgba(0,0,0,.12); 
  }
  * { box-sizing: border-box; }
  html,body { height:100%; }
  body { 
    margin:0; 
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
    background:var(--bg); 
    padding-bottom: 82px; 
  }
  
  /* 布局样式 */
  .shell { display:flex; height:100vh; width:100%; }
  .pane { background:var(--panel); overflow:auto; padding:20px; }
  #left { flex: 0 0 50%; min-width: 280px; }
  #right { flex: 1 1 auto; min-width: 320px; background:#fbfbff; border-left:1px solid var(--line); }
  #divider { flex: 0 0 8px; background: linear-gradient(90deg,#e5e7eb,#d1d5db); cursor: ew-resize; position:relative; z-index: 5; user-select:none; }
  
  /* 文本样式 */
  h2,h3,h4 { margin:0 0 10px; }
  #left p { margin: 0 0 12px; line-height: 1.6; word-break: normal; overflow-wrap: normal; hyphens: none; }
  
  /* 组件样式 */
  .group { background:#fff; border:1px solid var(--line); border-radius:10px; padding:12px; margin-bottom:14px; }
  input.blank { 
    border:none; 
    border-bottom:1px solid #9ca3af; 
    padding:2px 4px; 
    font-size:1em; 
    background:transparent; 
    min-width: 80px;
  }
  input.blank:focus { outline:none; border-bottom:2px solid var(--accent); }
  select {
    border:1px solid var(--line);
    border-radius:6px;
    padding:6px 10px;
    background:#fff;
    font-size:14px;
    cursor:pointer;
  }
  
  /* 按钮样式 */
  button { 
    padding:8px 12px; 
    border:1px solid var(--line); 
    background:#fff; 
    border-radius:6px; 
    cursor:pointer; 
    transition:all 0.2s; 
    font-size:14px; 
  }
  button:hover { background:#f8fafc; border-color:#cbd5e1; }
  button.primary { 
    background:var(--accent); 
    color:#fff; 
    border-color:var(--accent); 
  }
  button.primary:hover { background:#2563eb; }
  
  /* 计时器样式*/
  #timer { 
    background:#fff; 
    color:var(--muted); 
    border:1px solid var(--line); 
    border-radius:6px; 
    padding:4px 8px; 
    cursor:pointer; 
    font-family: monospace; 
    transition:all 0.2s; 
    min-width: 52px;
    text-align: center;
  }
  #timer:hover { 
    background:#f1f5f9; 
    border-color:var(--accent); 
  }
  #timer.paused { 
    color: #ef4444; 
    border-color: #fecaca; 
    background: #fef2f2; 
  }
  
  /* 主题切换按钮 */
  .theme-toggle { 
    background:#fff; 
    color:var(--muted); 
    border:1px solid var(--line); 
    border-radius:6px; 
    width: 36px;
    height: 36px;
    font-size: 16px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .theme-toggle:hover {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
    transform: scale(1.05);
  }
  .theme-toggle:active {
    transform: scale(0.95);
  }
  
  /* 拖拽相关样式 */
  .dropzone { 
    border:2px dashed #cbd5e1; 
    background:#f8fafc; 
    border-radius:10px; 
    min-height:54px; 
    padding:8px; 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    gap:8px; 
  }
  .droplabel { color:#64748b; }
  .cardpool { 
    background:#f1f5f9; 
    border-radius:10px; 
    padding:12px; 
    display:grid; 
    gap:8px; 
  }
  .pool-slot { min-height:40px; }
  .card { 
    background:#fff; 
    border:1px solid #e5e7eb; 
    border-radius:8px; 
    padding:8px 10px; 
    display:inline-flex; 
    gap:8px; 
    align-items:center; 
    cursor:grab; 
    box-shadow:0 1px 0 rgba(0,0,0,.03); 
  }
  .card:active { cursor:grabbing; }
  .tag { 
    background:#eef2ff; 
    color:#4338ca; 
    padding:2px 8px; 
    border-radius:999px; 
    font-size:12px; 
  }
  .btn-clear { 
    border:1px solid #e5e7eb; 
    background:#fff; 
    border-radius:8px; 
    padding:6px 8px; 
    cursor:pointer; 
  }
  .ghost { opacity: .5; }
  .over { outline:2px dashed #3b82f6; }
  
  /* 深色模式样式 */
  body.dark { 
    --bg: #0f172a; 
    --panel: #1e293b; 
    --line: #334155; 
    --muted: #94a3b8; 
    color: #e2e8f0; 
  }
  body.dark #right { background: #0f172a; }
  body.dark .group { background: #1e293b; border-color: #334155; }
  body.dark button { background: #1e293b; color: #e2e8f0; border-color: #334155; }
  body.dark button:hover { background: #334155; }
  body.dark button.primary { background: var(--accent); color: #fff; }
  body.dark #results { background: #1e293b; border-color: #334155; }
  body.dark #notes { background: #1e293b; border-color: #334155; color: #e2e8f0; }
  body.dark .practice-nav { 
    background: #1e293b; 
    border-top-color: #334155; 
  }
  body.dark .practice-nav .q-item { 
    background: #0f172a; 
    color: #e2e8f0; 
    border-color: #334155; 
  }
  body.dark .practice-nav .q-item:hover { 
    background: #334155; 
    border-color: var(--accent); 
  }
  body.dark .practice-nav .q-item.answered { 
    background: #1e40af; 
    border-color: var(--accent); 
    color: #93c5fd; 
  }
  body.dark .practice-nav .q-item.active { 
    background: var(--accent); 
    color: #fff; 
    border-color: var(--accent); 
  }
  body.dark #timer { background: #1e293b; color: #e2e8f0; border-color: #334155; }
  body.dark #timer:hover { background: #334155; border-color: var(--accent); }
  body.dark details.answerbox { background: #1e293b; border-color: #334155; }
  body.dark input.blank { color: #e2e8f0; border-bottom-color: #64748b; }
  body.dark input.blank:focus { border-bottom-color: var(--accent); }
  body.dark select { background: #1e293b; color: #e2e8f0; border-color: #334155; }
  body.dark .cardpool { background:#1e293b; }
  body.dark .card { background:#334155; border-color: #475569; }
  body.dark .dropzone { background:#1e293b; border-color: #475569; }
  body.dark .tag { background:#334155; color:#93c5fd; }
  body.dark .btn-clear { background:#334155; border-color: #475569; }
  
  /* 响应式设计*/
  @media (max-width: 768px) {
    .shell { flex-direction: column; }
    #left, #right { flex: none; min-width: auto; }
    #divider { display: none; }
    .practice-nav .controls { gap: 8px; }
    #timer { font-size: 12px; padding: 3px 8px; }
    .theme-toggle { width: 32px; height: 32px; font-size: 14px; }
    #notes { width: calc(100vw - 24px); right: 12px; left: 12px; }
  }
  
  /* 选择工具栏*/
  #selbar { 
    position: fixed; 
    display:none; 
    z-index: 2000; 
    background:#111; 
    color:#fff; 
    border-radius: 8px; 
    padding: 6px; 
    box-shadow: var(--shadow); 
    font-size: 13px; 
    gap:6px; 
    align-items: center; 
  }
  #selbar button { 
    background: transparent; 
    color:#fff; 
    border: 1px solid rgba(255,255,255,.25); 
    padding: 4px 8px; 
    border-radius: 6px; 
    cursor:pointer; 
  }
  #selbar button:hover { border-color:#fff; }
  
  /* 笔记面板 */
  #notes { 
    position: fixed; 
    right: 12px; 
    bottom: 12px; 
    width: 320px; 
    height: 42vh; 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius: 12px; 
    display:none; 
    flex-direction: column; 
    z-index:1500; 
    box-shadow: var(--shadow); 
  }
  #notes header { 
    display:flex; 
    align-items:center; 
    justify-content: space-between; 
    padding:8px 10px; 
    border-bottom:1px solid var(--line); 
  }
  #notes textarea { 
    flex:1; 
    border:0; 
    padding:10px; 
    resize:none; 
    font-size:14px; 
    line-height:1.5; 
  }
  
  /* Toast通知 */
  #toast { 
    position: fixed; 
    bottom: 20px; 
    left: 50%; 
    transform: translateX(-50%); 
    background: rgba(0,0,0,0.8); 
    color: #fff; 
    padding: 8px 16px; 
    border-radius: 4px; 
    display: none; 
    z-index: 3000; 
    font-size: 14px; 
  }
  
  /* 答题导航 */
  .practice-nav { 
    background:#fff; 
    padding:12px 20px; 
    display:flex; 
    align-items:center; 
    gap:16px; 
    box-shadow:0 2px 4px rgba(0,0,0,.05); 
    flex-wrap:wrap; 
    position:fixed; 
    left:0; 
    right:0; 
    bottom:0; 
    border-top:2px solid var(--line); 
    z-index:4000; 
  }
  .practice-nav .title { font-weight:600; color:var(--muted); }
  .practice-nav .questions { 
    display:flex; 
    gap:8px; 
    align-items:center; 
    flex-wrap:wrap; 
  }
  .practice-nav .q-item { 
    padding:6px 10px; 
    border:1px solid var(--line); 
    border-radius:6px; 
    background:#fff; 
    cursor:pointer; 
    font-size:14px; 
    transition:all 0.2s; 
    min-width:36px; 
    text-align:center; 
  }
  .practice-nav .q-item:hover { 
    background:#f1f5f9; 
    border-color:var(--accent); 
  }
  .practice-nav .q-item.answered { 
    background:#e0e7ff; 
    border-color:var(--accent); 
    color:var(--accent); 
    font-weight:500; 
  }
  .practice-nav .q-item.active { 
    background:var(--accent); 
    color:#fff; 
  }
  .practice-nav .controls { 
    display:flex; 
    gap:12px; 
    margin-left:auto; 
    align-items:center; 
  }
  
  /* 答题结果显示 */
  #results { 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius:10px; 
    padding:12px; 
    margin:16px 0; 
    font-family: monospace; 
    white-space:pre-wrap; 
  }
  #results p { margin:0 0 8px; }
  .badge { 
    background:#e0e7ff; 
    color:var(--accent); 
    padding:2px 8px; 
    border-radius:999px; 
    font-size:12px; 
  }
  
  /* 答案框*/
  details.answerbox { 
    background:#fff; 
    border:1px solid var(--line); 
    border-radius:10px; 
    padding:12px; 
    margin-top:10px; 
  }
  details.answerbox summary { 
    cursor:pointer; 
    font-weight:600; 
    list-style:none; 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
  }
  details.answerbox summary::-webkit-details-marker { display:none; }
  #answerContent { margin-top:10px; }
  #answerContent ol { margin:0; padding-left:20px; }
  #answerContent li { margin:4px 0; }
  
  /* 高亮样式 */
  .hl { background: #fff3a3; color: #000; }
  body.dark .hl { background: #5b21b6; color: #fff; }
  
  /* 滚动条样式*/
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #c5c5d2; border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: #999; }
  body.dark ::-webkit-scrollbar-thumb { background: #4a5568; }
  body.dark ::-webkit-scrollbar-thumb:hover { background: #718096; }
  
  table { border-collapse: collapse; width:100%; }
  th, td { border:1px solid var(--line); padding:6px; text-align:left; font-size:14px; }
  th:first-child, td:first-child { width:auto; }
</style>
</head>
<body>

<div class="practice-nav">
  <div class="title">Questions</div>
  <div class="questions">
    <div class="q-item" id="q14-nav" onclick="scrollToElement('q14-anchor')">14</div>
    <div class="q-item" id="q15-nav" onclick="scrollToElement('q15-anchor')">15</div>
    <div class="q-item" id="q16-nav" onclick="scrollToElement('q16-anchor')">16</div>
    <div class="q-item" id="q17-nav" onclick="scrollToElement('q17-anchor')">17</div>
    <div class="q-item" id="q18-nav" onclick="scrollToElement('q18-anchor')">18</div>
    <div class="q-item" id="q19-nav" onclick="scrollToElement('q19-anchor')">19</div>
    <div class="q-item" id="q20-nav" onclick="scrollToElement('q20-anchor')">20</div>
    <div class="q-item" id="q21-nav" onclick="scrollToElement('q21-anchor')">21</div>
    <div class="q-item" id="q22-nav" onclick="scrollToElement('q22-anchor')">22</div>
    <div class="q-item" id="q23-nav" onclick="scrollToElement('q23-anchor')">23</div>
    <div class="q-item" id="q24-nav" onclick="scrollToElement('q24-anchor')">24</div>
    <div class="q-item" id="q25-nav" onclick="scrollToElement('q25-anchor')">25</div>
    <div class="q-item" id="q26-nav" onclick="scrollToElement('q26-anchor')">26</div>
  </div>
  <div class="controls">
    <span id="timer" onclick="toggleTimer()">00:00</span>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">🌙</button>
  </div>
</div>

<div class="shell">
  <section class="pane" id="left">
    <h2>READING PASSAGE 2</h2>
    <p>You should spend about 20 minutes on Questions 14–26, which are based on Reading Passage 2 below.</p>
    <h3>Stress Less</h3>
    
    <h4>Paragraph A</h4>
    <p>Modern life is increasingly characterized by high levels of stress, which can have serious implications for both physical and mental health. From demanding work schedules to financial pressures and social media overload, people are constantly exposed to stressors that can trigger the body's natural fight-or-flight response. While this response was evolutionarily advantageous for dealing with immediate physical threats, chronic activation in response to modern psychological stressors can lead to a range of health problems including cardiovascular disease, depression, and weakened immune function. Understanding the mechanisms of stress and developing effective coping strategies has become essential for maintaining well-being in today's fast-paced world.</p>
    
    <h4>Paragraph B</h4>
    <p>The physiological response to stress begins in the brain, specifically in the amygdala, which processes emotions and detects threats. When the amygdala perceives a threat, it sends a distress signal to the hypothalamus, which acts as the command center for the nervous system. The hypothalamus then communicates with the adrenal glands through the sympathetic nervous system, triggering the release of adrenaline and other stress hormones. These hormones cause immediate physical changes such as increased heart rate, elevated blood pressure, and rapid breathing, preparing the body for action. Simultaneously, the hypothalamus activates the HPA axis (hypothalamic-pituitary-adrenal axis), leading to the release of cortisol, a hormone that helps maintain energy supplies during prolonged stress.</p>
    
    <h4>Paragraph C</h4>
    <p>While short-term stress can be beneficial, helping individuals respond to challenges and perform under pressure, chronic stress can have devastating effects on health. Prolonged elevation of stress hormones can disrupt almost all body systems, increasing the risk of numerous health problems. These include anxiety and depression, digestive problems, headaches, muscle tension, heart disease, sleep problems, weight gain, and memory impairment. Chronic stress can also accelerate the aging process and contribute to the development of serious conditions such as diabetes and autoimmune disorders. The immune system, in particular, is significantly compromised by chronic stress, making individuals more susceptible to infections and slowing the healing process.</p>
    
    <h4>Paragraph D</h4>
    <p>Recognizing the signs of stress is the first step toward managing it effectively. Common symptoms include physical manifestations such as headaches, muscle tension, fatigue, and changes in appetite or sleep patterns. Emotional symptoms may include anxiety, irritability, restlessness, lack of motivation, and feelings of being overwhelmed. Behavioral changes such as increased use of alcohol or drugs, social withdrawal, and procrastination can also indicate stress. Cognitive symptoms include difficulty concentrating, racing thoughts, constant worrying, and memory problems. When these symptoms persist or interfere with daily functioning, it's important to take action to reduce stress levels.</p>
    
    <h4>Paragraph E</h4>
    <p>Fortunately, there are numerous evidence-based strategies for managing stress effectively. Regular physical exercise is one of the most powerful stress-reduction tools, as it releases endorphins, improves mood, and serves as a healthy outlet for frustration. Mindfulness practices such as meditation, deep breathing exercises, and yoga have been shown to activate the body's relaxation response, counteracting the effects of stress hormones. Maintaining a healthy diet, getting adequate sleep, and limiting caffeine and alcohol intake can also help regulate the body's stress response. Social support is another crucial factor, as connecting with others provides emotional support and can help put problems in perspective.</p>
    
    <h4>Paragraph F</h4>
    <p>Time management and organizational skills play a significant role in stress reduction. Setting realistic goals, breaking large tasks into smaller manageable steps, and prioritizing responsibilities can help prevent feeling overwhelmed. Learning to say no to additional commitments when already overloaded is an important skill. Creating daily routines and schedules can provide structure and predictability, reducing uncertainty-related stress. Additionally, taking regular breaks throughout the day, engaging in hobbies, and ensuring work-life balance are essential for preventing burnout. Establishing boundaries between work and personal time, especially in our always-connected digital age, is increasingly important.</p>
    
    <h4>Paragraph G</h4>
    <p>For individuals experiencing severe or chronic stress, professional help may be necessary. Therapies such as cognitive behavioral therapy (CBT) can help people identify and change negative thought patterns that contribute to stress. Other therapeutic approaches, including acceptance and commitment therapy, dialectical behavior therapy, and mindfulness-based stress reduction, have also proven effective. In some cases, medication may be prescribed to help manage symptoms of anxiety or depression associated with chronic stress. Support groups can provide additional resources and a sense of community with others facing similar challenges. The key is recognizing when stress has become unmanageable and seeking appropriate help.</p>
    
    <h4>Paragraph H</h4>
    <p>Prevention is often more effective than treatment when it comes to stress management. Building resilience through regular self-care practices, developing healthy coping mechanisms, and maintaining strong social connections can help individuals better withstand life's inevitable stressors. Creating a supportive environment at home and work, setting realistic expectations, and practicing self-compassion are also important preventive measures. Teaching stress management skills to children and adolescents can help them develop healthy coping strategies early in life. Organizations also have a responsibility to create stress-reducing work environments through policies that promote work-life balance, provide mental health resources, and foster positive workplace cultures.</p>
    
  </section>
  <div id="divider" title="Drag to resize"></div>
  <section class="pane" id="right">
    <h3>Questions</h3>
    
    <div class="group">
      <h4>Questions 14–20</h4>
      <p>Reading Passage 2 has eight paragraphs, A–H.</p>
      <p>Which paragraph contains the following information?</p>
      <p>Write the correct letter, A–H, in boxes 14–20 on your answer sheet.</p>
      
      <div id="q14-anchor">
        <p><span class="q-item">14</span> &nbsp;&nbsp;&nbsp; A reference to the body's immediate physical response to stress<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q14" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q14" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q14" value="H"> H</p>
      </div>
      
      <div id="q15-anchor">
        <p><span class="q-item">15</span> &nbsp;&nbsp;&nbsp; A reference to the importance of setting boundaries between work and personal life<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q15" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q15" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q15" value="H"> H</p>
      </div>
      
      <div id="q16-anchor">
        <p><span class="q-item">16</span> &nbsp;&nbsp;&nbsp; A reference to the benefits of physical exercise in stress reduction<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q16" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q16" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q16" value="H"> H</p>
      </div>
      
      <div id="q17-anchor">
        <p><span class="q-item">17</span> &nbsp;&nbsp;&nbsp; A reference to the negative effects of chronic stress on the immune system<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q17" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q17" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q17" value="H"> H</p>
      </div>
      
      <div id="q18-anchor">
        <p><span class="q-item">18</span> &nbsp;&nbsp;&nbsp; A reference to the importance of teaching stress management skills to young people<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q18" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q18" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q18" value="H"> H</p>
      </div>
      
      <div id="q19-anchor">
        <p><span class="q-item">19</span> &nbsp;&nbsp;&nbsp; A reference to the role of social support in stress management<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q19" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q19" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q19" value="H"> H</p>
      </div>
      
      <div id="q20-anchor">
        <p><span class="q-item">20</span> &nbsp;&nbsp;&nbsp; A reference to the importance of seeking professional help for severe stress<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="q20" value="A"> A &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="B"> B &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="C"> C &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="D"> D &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="E"> E &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="F"> F &nbsp;&nbsp;&nbsp; 
        <input type="radio" name="q20" value="G"> G &nbsp;&nbsp;&nbsp;
        <input type="radio" name="q20" value="H"> H</p>
      </div>
    </div>
    
    <div class="group">
      <h4>Questions 21–26</h4>
      <p>Complete the sentences below.</p>
      <p>Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.</p>
      <p>Write your answers in boxes 21–26 on your answer sheet.</p>
      
      <div id="q21-anchor">
        <p><span class="q-item">21</span> &nbsp;&nbsp;&nbsp; The <select name="q21">
          <option value="">Select</option>
          <option value="amygdala">amygdala</option>
          <option value="hypothalamus">hypothalamus</option>
          <option value="adrenal">adrenal</option>
        </select> processes emotions and detects threats.</p>
      </div>
      
      <div id="q22-anchor">
        <p><span class="q-item">22</span> &nbsp;&nbsp;&nbsp; <select name="q22">
          <option value="">Select</option>
          <option value="Adrenaline">Adrenaline</option>
          <option value="Cortisol">Cortisol</option>
          <option value="Endorphins">Endorphins</option>
        </select> is a hormone that helps maintain energy supplies during prolonged stress.</p>
      </div>
      
      <div id="q23-anchor">
        <p><span class="q-item">23</span> &nbsp;&nbsp;&nbsp; <select name="q23">
          <option value="">Select</option>
          <option value="Physical">Physical</option>
          <option value="Emotional">Emotional</option>
          <option value="Behavioral">Behavioral</option>
        </select> symptoms of stress may include anxiety and irritability.</p>
      </div>
      
      <div id="q24-anchor">
        <p><span class="q-item">24</span> &nbsp;&nbsp;&nbsp; Mindfulness practices can activate the body's relaxation <select name="q24">
          <option value="">Select</option>
          <option value="response">response</option>
          <option value="system">system</option>
          <option value="mechanism">mechanism</option>
        </select>.</p>
      </div>
      
      <div id="q25-anchor">
        <p><span class="q-item">25</span> &nbsp;&nbsp;&nbsp; Setting realistic goals and breaking large tasks into smaller steps can help prevent feeling <select name="q25">
          <option value="">Select</option>
          <option value="overwhelmed">overwhelmed</option>
          <option value="stressed">stressed</option>
          <option value="anxious">anxious</option>
        </select>.</p>
      </div>
      
      <div id="q26-anchor">
        <p><span class="q-item">26</span> &nbsp;&nbsp;&nbsp; <select name="q26">
          <option value="">Select</option>
          <option value="CBT">CBT</option>
          <option value="MBSR">MBSR</option>
          <option value="DBT">DBT</option>
        </select> can help people identify and change negative thought patterns.</p>
      </div>
    </div>
    
    <div style="display:flex;gap:8px;margin-bottom:10px;">
      <button class="primary" onclick="grade()">Submit</button>
      <button onclick="resetForm()">Reset</button>
      <button onclick="toggleNotes()">Notes</button>
    </div>
    <div id="results"></div>
    <details class="answerbox" id="answerBox">
      <summary>Show answers (click to toggle) <span class="badge">hidden</span></summary>
      <div id="answerContent"></div>
    </details>
  </section>
</div>

<div aria-label="Selection tools" id="selbar" role="toolbar">
  <button id="btnHL">Highlight</button>
  <button id="btnUH">Remove</button>
  <button id="btnNote">Note</button>
</div>

<div id="notes">
  <header>
    <strong>Notes</strong>
    <div>
      <button id="btnCopy">Copy</button>
      <button id="btnClose">Close</button>
    </div>
  </header>
  <textarea id="noteArea" placeholder="Type your notes here..."></textarea>
</div>

<div id="toast"></div>

<script>
// 页面滚动功能
function scrollToElement(id) {
  const element = document.getElementById(id);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth', block: 'center' });
    // 高亮显示题目
    element.style.backgroundColor = '#e0e7ff';
    setTimeout(() => {
      element.style.backgroundColor = '';
    }, 1000);
  }
}

// 重置表单功能
function resetForm() {
  // 重置单选按钮
  document.querySelectorAll('input[type="radio"]').forEach(radio => {
    radio.checked = false;
  });
  
  // 重置下拉选择框
  document.querySelectorAll('select').forEach(select => {
    select.selectedIndex = 0;
  });
  
  // 重置文本输入框
  document.querySelectorAll('input.blank').forEach(input => {
    input.value = '';
  });
  
  // 清除结果
  document.getElementById('results').innerHTML = '';
  
  // 更新导航状态
  updateAnswerStatus();
  
  showToast('Form reset');
}

// Toast通知功能
function showToast(msg) {
  const toastEl = document.getElementById('toast');
  toastEl.textContent = msg;
  toastEl.style.display = 'block';
  setTimeout(() => {
    toastEl.style.display = 'none';
  }, 1500);
}

// 计时器功能
let _t = 0;
let timerRunning = true;
let timerInterval;
const _timerEl = document.getElementById('timer');

function updateTimer() {
  const m = Math.floor(_t / 60);
  const s = _t % 60;
  _timerEl.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
}

function startTimer() {
  timerInterval = setInterval(() => {
    if (timerRunning) {
      _t++;
      updateTimer();
    }
  }, 1000);
}

function toggleTimer() {
  if (timerRunning) {
    clearInterval(timerInterval);
    timerRunning = false;
    _timerEl.classList.add('paused');
    showToast('Timer paused');
  } else {
    startTimer();
    timerRunning = true;
    _timerEl.classList.remove('paused');
    showToast('Timer resumed');
  }
}

// 主题切换功能
function toggleTheme() {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  localStorage.setItem('darkMode', isDark);
  const themeButton = document.querySelector('.theme-toggle');
  themeButton.textContent = isDark ? '☀️' : '🌙';
}

// 拖拽分栏功能
var divider = document.getElementById('divider');
var left = document.getElementById('left');
var right = document.getElementById('right');
var dragging = false;

function startDrag(e) {
  dragging = true;
  document.body.style.cursor = 'ew-resize';
  if (e.preventDefault) e.preventDefault();
}

function endDrag() {
  dragging = false;
  document.body.style.cursor = '';
}

function onMove(clientX) {
  var container = document.querySelector('.shell').getBoundingClientRect();
  var x = clientX - container.left;
  x = Math.max(280, Math.min(container.width - 320, x));
  left.style.flex = '0 0 ' + x + 'px';
  right.style.flex = '1 1 auto';
}

divider.addEventListener('mousedown', function(e) { startDrag(e); });
window.addEventListener('mousemove', function(e) { if (dragging) onMove(e.clientX); });
window.addEventListener('mouseup', endDrag);
divider.addEventListener('touchstart', function(e) { startDrag(e.touches[0]); }, { passive: false });
window.addEventListener('touchmove', function(e) { if (dragging) onMove(e.touches[0].clientX); }, { passive: false });
window.addEventListener('touchend', endDrag);

// 高亮和笔记功能
var selbar = document.getElementById('selbar');
var btnHL = document.getElementById('btnHL');
var btnUH = document.getElementById('btnUH');
var btnNote = document.getElementById('btnNote');
var lastRange = null;
var currentHlNode = null;
var keepToolbar = false;

function positionSelbarForRect(rect) {
  selbar.style.display = 'flex';
  requestAnimationFrame(function() {
    var top = window.scrollY + rect.top - selbar.offsetHeight - 8;
    var leftPos = window.scrollX + rect.left + rect.width/2 - selbar.offsetWidth/2;
    selbar.style.top = ((top > 0) ? top : (window.scrollY + rect.bottom + 8)) + 'px';
    selbar.style.left = Math.max(8, leftPos) + 'px';
  });
}

function updateSelbar() {
  var sel = window.getSelection();
  if (!sel || sel.rangeCount === 0 || sel.isCollapsed) {
    selbar.style.display = 'none';
    currentHlNode = null;
    return;
  }
  var range = sel.getRangeAt(0);
  lastRange = range.cloneRange();
  currentHlNode = null;
  positionSelbarForRect(range.getBoundingClientRect());
}

document.getElementById('left').addEventListener('mouseup', updateSelbar);
document.getElementById('right').addEventListener('mouseup', updateSelbar);
document.addEventListener('selectionchange', function() {
  var sel = window.getSelection();
  if (!sel || sel.rangeCount === 0 || sel.isCollapsed) {
    if (!keepToolbar && !currentHlNode) {
      selbar.style.display = 'none';
    }
  }
});
document.addEventListener('scroll', function() {
  if (selbar.style.display === 'flex') updateSelbar();
});

document.addEventListener('mousedown', function(e) {
  var t = e.target;
  if (t.classList && t.classList.contains('hl')) {
    keepToolbar = true;
  } else {
    keepToolbar = false;
  }
}, true);

document.addEventListener('click', function(e) {
  var target = e.target;
  if (target.classList && target.classList.contains('hl')) {
    currentHlNode = target;
    lastRange = null;
    positionSelbarForRect(target.getBoundingClientRect());
    var sel = window.getSelection();
    if (sel) sel.removeAllRanges();
    setTimeout(function() { keepToolbar = false; }, 0);
  }
}, true);

function doHighlight() {
  if (currentHlNode) return;
  if (!lastRange || lastRange.collapsed) return;
  
  const startNode = lastRange.startContainer;
  const endNode = lastRange.endContainer;
  
  if (startNode === endNode) {
    try {
      const span = document.createElement('span');
      span.className = 'hl';
      lastRange.surroundContents(span);
      selbar.style.display = 'none';
      showToast('Highlighted');
      return;
    } catch (e) {}
  }
  
  const fragment = lastRange.cloneContents();
  const div = document.createElement('div');
  div.appendChild(fragment);
  
  function processNode(node) {
    if (node.nodeType === Node.TEXT_NODE) {
      if (node.textContent.trim().length > 0) {
        const span = document.createElement('span');
        span.className = 'hl';
        span.textContent = node.textContent;
        return span;
      }
      return node;
    }
    
    if (node.nodeType === Node.ELEMENT_NODE) {
      const isBlock = window.getComputedStyle(node).display.includes('block') ||
        ['P', 'H1', 'H2', 'H3', 'H4', 'DIV'].includes(node.tagName);
      
      const wrapper = isBlock ? document.createElement(node.tagName.toLowerCase()) : document.createElement('span');
      wrapper.className = isBlock ? node.className + ' hl' : 'hl';
      
      Array.from(node.attributes).forEach(attr => {
        wrapper.setAttribute(attr.name, attr.value);
      });
      
      while (node.firstChild) {
        const processedChild = processNode(node.firstChild);
        wrapper.appendChild(processedChild);
      }
      
      return wrapper;
    }
    
    return node;
  }
  
  const highlightedContent = processNode(div);
  lastRange.deleteContents();
  lastRange.insertNode(highlightedContent);
  
  selbar.style.display = 'none';
  showToast('Highlighted');
}

function removeHighlight() {
  if (currentHlNode) {
    const parent = currentHlNode.parentNode;
    while (currentHlNode.firstChild) {
      parent.insertBefore(currentHlNode.firstChild, currentHlNode);
    }
    parent.removeChild(currentHlNode);
    parent.normalize();
    currentHlNode = null;
    selbar.style.display = 'none';
    showToast('Highlight removed');
    return;
  }
  
  if (!lastRange) return;
  
  const selRect = lastRange.getBoundingClientRect();
  const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT);
  const toRemove = [];
  
  while (walker.nextNode()) {
    const node = walker.currentNode;
    if (node.classList && node.classList.contains('hl')) {
      const rect = node.getBoundingClientRect();
      if (!(rect.right < selRect.left || rect.left > selRect.right ||
        rect.bottom < selRect.top || rect.top > selRect.bottom)) {
        toRemove.push(node);
      }
    }
  }
  
  toRemove.forEach(el => {
    const parent = el.parentNode;
    while (el.firstChild) {
      parent.insertBefore(el.firstChild, el);
    }
    parent.removeChild(el);
    parent.normalize();
  });
  
  selbar.style.display = 'none';
  showToast('Highlight removed');
}

btnHL.addEventListener('click', doHighlight);
btnUH.addEventListener('click', removeHighlight);

// 笔记功能
var notes = document.getElementById('notes');
var noteArea = document.getElementById('noteArea');
var btnCopy = document.getElementById('btnCopy');
var btnClose = document.getElementById('btnClose');

function toggleNotes() {
  notes.style.display = (notes.style.display === 'flex' ? 'none' : 'flex');
}
window.toggleNotes = toggleNotes;

btnClose.addEventListener('click', toggleNotes);
btnCopy.addEventListener('click', async function() {
  await navigator.clipboard.writeText(noteArea.value || '');
  showToast('Copied');
});

btnNote.addEventListener('click', function() {
  var text = '';
  if (currentHlNode) {
    text = (currentHlNode.textContent || '').trim();
  } else if (lastRange) {
    var frag = lastRange.cloneContents();
    text = (frag.textContent || '').trim();
  }
  toggleNotes();
  if (text) {
    noteArea.value = (noteArea.value ? noteArea.value + '\n' : '') + '> ' + text + '\n';
  }
  selbar.style.display = 'none';
});

// 答题状态更新
function updateAnswerStatus() {
  for (let i = 14; i <= 26; i++) {
    const inputs = document.querySelectorAll(`input[name="q${i}"], select[name="q${i}"]`);
    const navItem = document.getElementById(`q${i}-nav`);
    if (navItem) {
      let answered = false;
      inputs.forEach(input => {
        if ((input.type === 'radio' || input.type === 'checkbox') && input.checked) {
          answered = true;
        } else if (input.type === 'text' && input.value.trim()) {
          answered = true;
        } else if (input.tagName === 'SELECT' && input.selectedIndex > 0) {
          answered = true;
        }
      });
      if (answered) {
        navItem.classList.add('answered');
      } else {
        navItem.classList.remove('answered');
      }
    }
  }
}

// 答案和评分系统
var answers = {
  "q14": "B", "q15": "F", "q16": "E", "q17": "C", "q18": "H", "q19": "E", "q20": "G",
  "q21": "amygdala", "q22": "Cortisol", "q23": "Emotional", "q24": "response", "q25": "overwhelmed", "q26": "CBT"
};

function grade() {
  var total = 0, correct = 0, lines = [];
  
  // 检查单选题 (14-20)
  for (let n = 14; n <= 20; n++) {
    const q = `q${n}`;
    total++;
    const selected = document.querySelector(`input[name="${q}"]:checked`);
    const userAnswer = selected ? selected.value : '';
    const isCorrect = userAnswer === answers[q];
    if (isCorrect) correct++;
    lines.push(`${q.toUpperCase()}: ${userAnswer || 'None'} ${isCorrect ? '✓' : '✗'}`);
  }
  
  // 检查选择框(21-26)
  for (let n = 21; n <= 26; n++) {
    const q = `q${n}`;
    total++;
    const select = document.querySelector(`select[name="${q}"]`);
    const userAnswer = select ? select.value : '';
    const isCorrect = userAnswer === answers[q];
    if (isCorrect) correct++;
    lines.push(`${q.toUpperCase()}: ${userAnswer || 'None'} ${isCorrect ? '✓' : '✗'}`);
  }
  
  // 显示结果
  const acc = Math.round(100 * correct / total);
  document.getElementById('results').innerHTML = `
    <p><strong>Score:</strong> ${correct}/${total} <span class="badge">Accuracy ${acc}%</span></p>
    <pre>${lines.join('\n')}</pre>
  `;
  
  // 显示答案
  document.getElementById('answerContent').innerHTML = `
    <ol>
      <li>14. B</li>
      <li>15. F</li>
      <li>16. E</li>
      <li>17. C</li>
      <li>18. H</li>
      <li>19. E</li>
      <li>20. G</li>
      <li>21. amygdala</li>
      <li>22. Cortisol</li>
      <li>23. Emotional</li>
      <li>24. response</li>
      <li>25. overwhelmed</li>
      <li>26. CBT</li>
    </ol>
  `;
  document.querySelector('#answerBox .badge').textContent = 'tap to view';
  
  updateAnswerStatus();
}

// 监听答案变化
document.addEventListener('change', updateAnswerStatus);
document.addEventListener('input', updateAnswerStatus);

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
  startTimer();
  updateAnswerStatus(); // 初始化答题状态
  
  // 加载保存的主题
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark');
    document.querySelector('.theme-toggle').textContent = '☀️';
  }
});

// 练习页面增强脚本集成
function loadPracticePageEnhancer() {
  const script = document.createElement('script');
  script.src = '../../../js/practice-page-enhancer.js';
  script.onload = function() {
    console.log('练习页面增强脚本已加载');
      };
  script.onerror = function() {
    console.error('练习页面增强脚本加载失败');
    // 降级到内联增强
    loadInlineEnhancer();
  };
  document.head.appendChild(script);
}

// 内联增强器（降级方案）
function loadInlineEnhancer() {
  if (window.practicePageEnhancer) return;
  
  window.practicePageEnhancer = {
    initialize: function() {
      console.log('[InlineEnhancer] 内联增强器已初始化');
          this.setupCommunication();
      this.setupAnswerListeners();
      this.interceptSubmit();
    },
    
    setupCommunication: function() {
      this.parentWindow = window.opener || window.parent;
      window.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'INIT_SESSION') {
          this.sessionId = event.data.data.sessionId;
          this.sendMessage('SESSION_READY', {
            pageType: this.detectPageType(),
            url: window.location.href
          });
        }
      });
    },
    
    detectPageType: function() {
      const title = document.title || '';
      if (title.includes('P1')) return 'P1';
      if (title.includes('P2')) return 'P2';
      if (title.includes('P3')) return 'P3';
      return 'unknown';
    },
    
    setupAnswerListeners: function() {
      this.answers = {};
      this.startTime = Date.now();
      
      document.addEventListener('change', (e) => {
        if (e.target.name && e.target.name.startsWith('q')) {
          this.answers[e.target.name] = e.target.value;
        }
      });
      
      document.addEventListener('input', (e) => {
        if (e.target.name && e.target.name.startsWith('q')) {
          this.answers[e.target.name] = e.target.value;
        }
      });
    },
    
    interceptSubmit: function() {
      // 拦截grade函数
      if (typeof window.grade === 'function') {
        const originalGrade = window.grade;
        window.grade = () => {
          const result = originalGrade();
          setTimeout(() => this.handleSubmit(), 200);
          return result;
        };
      }
      
      // 监听提交按钮
      document.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON' &&
          (e.target.textContent.includes('Submit') ||
            e.target.onclick && e.target.onclick.toString().includes('grade'))) {
          setTimeout(() => this.handleSubmit(), 300);
        }
      });
    },
    
    handleSubmit: function() {
      const results = {
        sessionId: this.sessionId,
        startTime: this.startTime,
        endTime: Date.now(),
        duration: Math.round((Date.now() - this.startTime) / 1000),
        answers: this.answers,
        scoreInfo: this.extractScore(),
        pageType: this.detectPageType(),
        url: window.location.href
      };
      
      this.sendMessage('PRACTICE_COMPLETE', results);
    },
    
    extractScore: function() {
      const resultsEl = document.getElementById('results');
      if (!resultsEl) return null;
      
      const text = resultsEl.textContent || '';
      const scoreMatch = text.match(/Score:\s*(\d+)\/(\d+)/i);
      if (scoreMatch) {
        const correct = parseInt(scoreMatch[1]);
        const total = parseInt(scoreMatch[2]);
        return {
          correct: correct,
          total: total,
          accuracy: total > 0 ? correct / total : 0,
          percentage: Math.round((correct / total) * 100),
          source: 'inline_extraction'
        };
      }
      return null;
    },
    
    sendMessage: function(type, data) {
      if (this.parentWindow) {
        this.parentWindow.postMessage({
          type: type,
          data: data,
          source: 'practice_page'
        }, '*');
      }
    }
  };
  
  // 初始化
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      window.practicePageEnhancer.initialize();
    });
  } else {
    window.practicePageEnhancer.initialize();
  }
}

// 加载增强脚本
loadPracticePageEnhancer();
</script>

</body>
</html>
